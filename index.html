

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Flask AppBuilder</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="https://flask-appbuilder.readthedocs.io/en/latest/" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'index'
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html#document-index" class="icon icon-home"> Flask-AppBuilder
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-cli">Command Line Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-config">Base Configuration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-views">Base Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-quickhowto">Model Views (Quick How to)</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-rest_api">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-quickhowto_mongo">Model Views on MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-quickcharts">Chart Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-quickfiles">Model Views with Files and Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-quickminimal">Quick Minimal Application</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-relations">Model Relations/Composite keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-actions">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-advanced">Advanced Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-customizing">Customizing</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-templates">Templates</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-addons">AddOn development</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-generic_datasource">Generic Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-multipledbs">Multiple Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-i18n">i18n Translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-security">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-user_registration">User Registration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-diagrams">Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-api">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-versionmigration">Version Migration</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html#document-index">Flask-AppBuilder</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html#document-index">Docs</a> &raquo;</li>
        
      <li>Flask AppBuilder</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/dpgaspar/Flask-AppBuilder/blob/master/docs/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-flask_appbuilder">
<span id="flask-appbuilder"></span><h1>Flask-AppBuilder<a class="headerlink" href="#module-flask_appbuilder" title="Permalink to this headline">¶</a></h1>
<p>Simple and rapid application development framework, built on top of <a class="reference external" href="http://flask.pocoo.org/">Flask</a>.
Includes detailed security, auto CRUD generation for your models, google charts and much more.</p>
<p>Lots of <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples">examples</a>
and a live <a class="reference external" href="http://flaskappbuilder.pythonanywhere.com/">Demo</a> (login has guest/welcome).</p>
<div class="section" id="fixes-bugs-and-contributions">
<h2>Fixes, bugs and contributions<a class="headerlink" href="#fixes-bugs-and-contributions" title="Permalink to this headline">¶</a></h2>
<p>You’re welcome to report bugs, propose new features, or even better contribute to this project.</p>
<p><a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/issues/new">Issues, bugs and new features</a></p>
<p><a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/fork">Contribute</a></p>
</div>
<div class="section" id="contents">
<h2>Contents:<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-intro"></span><div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>The main goal for this project is to provide a simple development framework
that handles the main problems any web application or site encounters.
It will help you adhere to the DRY (Don’t repeat yourself) principle.</p>
<p>Keep in mind that it is possible to develop directly on Flask/Jinja2 for custom pages or flows,
that painlessly integrate with the framework.</p>
<p>This framework goes further than an admin scaffolding package.
It has builtin presentation and behaviour alternatives, and you can easily build your own.
It’s highly configurable, and ships with extra goodies.</p>
<p>It’s intended to lower errors, bugs and project’s time to deliver.</p>
<p>This package has some CSS and JS batteries included:</p>
<blockquote>
<div><ul class="simple">
<li>Google charts CSS and JS</li>
<li>BootStrap CSS and JS</li>
<li>BootsWatch Themes</li>
<li>Font-Awesome CSS and Fonts</li>
</ul>
</div></blockquote>
<p>– Includes</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>Database</dt>
<dd><ul class="first last">
<li>SQLAlchemy, multiple database support: sqlite, MySQL, ORACLE, MSSQL, DB2 etc.</li>
<li>MongoDB, using mongoEngine, still partial support (only normalized).</li>
<li>Multiple database connections support (Vertical partitioning).</li>
<li>Easy mixin audit to models (created/changed by user, and timestamps).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Security</dt>
<dd><ul class="first last">
<li>Automatic permissions lookup, based on exposed methods. It will grant all permissions to the Admin Role.</li>
<li>Inserts on the Database all the detailed permissions possible on your application.</li>
<li>Public (no authentication needed) and Private permissions.</li>
<li>Role based permissions.</li>
<li>Authentication support for OAuth, OpenID, Database, LDAP and REMOTE_USER environ var.</li>
<li>Support for self user registration.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Views and Widgets</dt>
<dd><ul class="first last">
<li>Automatic menu generation.</li>
<li>Automatic CRUD generation.</li>
<li>Multiple actions on db records.</li>
<li>Big variety of filters for your lists.</li>
<li>Various view widgets: lists, master-detail, list of thumbnails etc.</li>
<li>Select2, Datepicker, DateTimePicker.</li>
<li>Select2 related fields.</li>
<li>Google charts with automatic group by or direct values and filters.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Forms</dt>
<dd><ul class="first last">
<li>Automatic, Add, Edit and Show from Database Models</li>
<li>Labels and descriptions for each field.</li>
<li>Automatic base validators from model’s definition.</li>
<li>Custom validators, extra fields, custom filters for related dropdown lists.</li>
<li>Image and File support for upload and database field association. It will handle everything for you.</li>
<li>Field sets for Form’s (Django style).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>i18n</dt>
<dd><ul class="first last">
<li>Support for multi-language via Babel.</li>
</ul>
</dd>
</dl>
</li>
<li>Bootstrap 3.3.1 CSS and js, with Select2 and DatePicker.</li>
<li>Font-Awesome icons, for menu icons and actions.</li>
<li>Bootswatch Themes.</li>
</ul>
</div></blockquote>
</div>
<span id="document-installation"></span><div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>Installation is straightforward, using the normal python package install.
I do advise you to additionally install the base skeleton application
so that you can immediately have a running application (without any models yet) and an easy to grow boilerplate.</p>
<p>Checkout installation video on <a class="reference external" href="http://youtu.be/xvum4vfwldg">YouTube</a></p>
<div class="section" id="using-pip">
<h4>Using pip<a class="headerlink" href="#using-pip" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><strong>Simple Install</strong></p>
<blockquote>
<div><p>You can install the framework simply by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install flask-appbuilder
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Advised Virtual Environment Install</strong></p>
<blockquote>
<div><p>Virtual env is highly advisable because the more projects you have,
the more likely it is that you will be working with
different versions of Python itself, or at least different versions of Python libraries.
Let’s face it: quite often libraries break backwards compatibility,
and it’s unlikely that any serious application will have zero dependencies.
So what do you do if two or more of your projects have conflicting dependencies?</p>
<p>If you are on Mac OS X or Linux, chances are that one of the following two commands will work for you:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo easy_install virtualenv
</pre></div>
</div>
<p>or even better:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo pip install virtualenv
</pre></div>
</div>
<p>One of these will probably install virtualenv on your system.
Maybe it’s even in your package manager. If you use a debian system (like Ubuntu), try:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install python-virtualenv
</pre></div>
</div>
<p>Next create a virtualenv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ virtualenv venv
New python executable in venv/bin/python
Installing distribute............done.
$ . venv/bin/activate
(venv)$
</pre></div>
</div>
<p>Now install F.A.B on the virtual env,
it will install all the dependencies and these will be isolated from your system’s python packages</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(venv)$ pip install flask-appbuilder
</pre></div>
</div>
<p>Once you have virtualenv installed, use <strong>Flask</strong> the command line tool to create your first app.
So create a skeleton application and the first admin user:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(venv)$ flask fab create-app
Your new app name: first_app
Your engine type, SQLAlchemy or MongoEngine [SQLAlchemy]:
Downloaded the skeleton app, good coding!
(venv)$ cd first_app
(venv)$ export FLASK_APP=app
(venv)$ flask fab create-admin
Username [admin]:
User first name [admin]:
User last name [user]:
Email [admin@fab.org]:
Password:
Repeat for confirmation:
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are two type of skeletons available you can choose from SQLAlchemy default or MongoEngine for
MongoDB. <strong>To use the MongoEngine skeleton you need to install flask-mongoengine extension.</strong></p>
</div>
<p>The framework will immediately insert all possible permissions on the database, these will be associated with
the <em>Admin</em> role that belongs to the <em>admin</em> user you just created. Your ready to run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(venv)$ flask run
</pre></div>
</div>
<p>This will start a web development server</p>
<p>You now have a running development server on <a class="reference external" href="http://localhost:8080">http://localhost:8080</a>.</p>
<p>The skeleton application is not actually needed for you to run AppBuilder, but it’s a good way to start.
This first application is SQLAlchemy based.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="initialization">
<h4>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h4>
<p>When starting your application for the first time,
all AppBuilder security tables will be created for you.
All your models can easily be created too (optionally).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since version 1.3.0 no admin user is automatically created, you must use <strong>flask fab cli</strong> to do it.
There are lot’s of other useful options you can use with <strong>flask fab</strong> like reset user’s password,
list all your users and views, etc.</p>
</div>
</div>
<div class="section" id="installation-requirements">
<h4>Installation Requirements<a class="headerlink" href="#installation-requirements" title="Permalink to this headline">¶</a></h4>
<p>pip installs all the requirements for you.</p>
<p>Flask App Builder dependes on</p>
<blockquote>
<div><ul class="simple">
<li>flask : The web framework, this is what we’re extending.</li>
<li>flask-sqlalchemy : DB access (see SQLAlchemy).</li>
<li>flask-login : Login, session on flask.</li>
<li>flask-openid : Open ID authentication.</li>
<li>flask-wtform : Web forms.</li>
<li>flask-Babel : For internationalization.</li>
</ul>
</div></blockquote>
<p>If you plan to use Image processing or upload, you will need to install PIL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pillow</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">PIL</span>
</pre></div>
</div>
</div>
<div class="section" id="python-2-and-3-compatibility">
<h4>Python 2 and 3 Compatibility<a class="headerlink" href="#python-2-and-3-compatibility" title="Permalink to this headline">¶</a></h4>
<p>The framework removed support for python 2 since version 1.13.X</p>
</div>
</div>
<span id="document-cli"></span><div class="section" id="command-line-manager">
<h3>Command Line Manager<a class="headerlink" href="#command-line-manager" title="Permalink to this headline">¶</a></h3>
<p>Since version 1.13.1 F.A.B. has a new command line manager, integrated with Flask cli.
The old <code class="docutils literal notranslate"><span class="pre">fabmanager</span></code> command line is now deprecated and will be completely removed on 2.2.X.
It’s very easy to migrate to the new command line, all sub commands are still the same and
use the same parameters.</p>
<p>To use the new commands integrated with <strong>Flask cli</strong> you must specify on to import your app.
Take a look at <a class="reference external" href="http://flask.pocoo.org/docs/cli/">Flask docs</a>.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Using the default skeleton application
$ export FLASK_APP=app

# Using factory app pattern
$ FLASK_APP=&quot;app:create_app(&#39;config&#39;)&quot;
</pre></div>
</div>
<p>FAB creates a <strong>Flask</strong> command group named <code class="docutils literal notranslate"><span class="pre">fab</span></code>, so all commands are issued like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flask fab &lt;command&gt; &lt;parameters&gt;
</pre></div>
</div>
<p>To Run your application on development:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flask run --with-threads --reload
</pre></div>
</div>
<p>Take a quick look to the current possibilities. (The bold ones require app context)</p>
<blockquote>
<div><ul class="simple">
<li>babel-compile - Babel, Compiles all translations</li>
<li>babel-extract - Babel, Extracts and updates all messages.</li>
<li><strong>create-admin</strong> - Creates an admin user</li>
<li><strong>create-user</strong> - Create user with arbitrary role</li>
<li>create-app - Create a Skeleton application (SQLAlchemy or MongoEngine).</li>
<li>create-addon - Create a Skeleton AddOn.</li>
<li><strong>create-db</strong> - Create all your database objects (SQLAlchemy only)</li>
<li><strong>collect-static</strong> - Copies static files from flask-appbuilder to your static folder. Nice to have on certain deploys</li>
<li><strong>list-users</strong> - List all users on the database.</li>
<li><strong>list-views</strong> - List all registered views.</li>
<li><strong>reset-password</strong> - Resets a user’s password.</li>
<li><strong>security-cleanup</strong> - Cleanup unused permissions from views and roles. <a class="reference internal" href="index.html#document-security"><span class="doc">Security</span></a></li>
<li><strong>security-converge</strong> - Converges all security view and permission names from all your roles. <a class="reference internal" href="index.html#document-security"><span class="doc">Security</span></a></li>
<li><strong>upgrade-db</strong> - Upgrade your database after F.A.B upgrade.</li>
<li><strong>version</strong> - Flask-AppBuilder package version.</li>
</ul>
</div></blockquote>
<p>Command Line uses the excellent click package, so you can have a detailed help for each command, for instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flask fab create-app --help
Usage: flask fab create-app [OPTIONS]

Create a Skeleton application

Options:
--name TEXT                     Your application name, directory will have
                              this name
--engine [SQLAlchemy|MongoEngine]
                              Write your engine type
--help                          Show this message and exit.
</pre></div>
</div>
<div class="section" id="create-app-create-new-applications">
<h4><strong>create-app</strong> - Create new Applications<a class="headerlink" href="#create-app-create-new-applications" title="Permalink to this headline">¶</a></h4>
<p>To create a ready to dev skeleton application, you can use this command for SQLAlchemy engine and MongoEngine (MongoDB).
This commands needs an internet connection to <strong>github.com</strong>, because it will download a zip version of the skeleton repos.</p>
</div>
<div class="section" id="create-admin-create-an-admin-user">
<h4><strong>create-admin</strong> - Create an admin user<a class="headerlink" href="#create-admin-create-an-admin-user" title="Permalink to this headline">¶</a></h4>
<p>Use this to create your first <strong>Admin</strong> user, or additional ones.
This admin user can be used to any type of authentication method configured, but <em>flask fab create-admin</em>
will not check it, so it will always ask for a password (assumes AUTH_DB).</p>
</div>
<div class="section" id="babel-extract-babel-extracts-and-updates-all-messages">
<h4><strong>babel-extract</strong> - Babel, Extracts and updates all messages.<a class="headerlink" href="#babel-extract-babel-extracts-and-updates-all-messages" title="Permalink to this headline">¶</a></h4>
<p>Use multi <strong>-k</strong> options separated by space to specify how to locate the strings you want to translate.
Default values: <strong>lazy_gettext, gettext, _, __</strong>.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flask</span> <span class="n">fab</span> <span class="n">babel</span><span class="o">-</span><span class="n">extract</span> <span class="o">--</span><span class="n">target</span> <span class="n">flask_appbuilder</span><span class="o">/</span><span class="n">translations</span><span class="o">/</span> <span class="o">-</span><span class="n">k</span> <span class="n">_</span> <span class="o">-</span><span class="n">k</span> <span class="n">__</span>
</pre></div>
</div>
</div>
<div class="section" id="create-addon-create-new-addons">
<h4><strong>create-addon</strong> - Create new AddOns<a class="headerlink" href="#create-addon-create-new-addons" title="Permalink to this headline">¶</a></h4>
<p>To create a ready to dev skeleton addon.
This commands needs an internet connection to <strong>github.com</strong>, because it will download a zip version of the skeleton repos.</p>
</div>
<div class="section" id="collect-static-collect-static-files">
<h4><strong>collect-static</strong> - Collect static files<a class="headerlink" href="#collect-static-collect-static-files" title="Permalink to this headline">¶</a></h4>
<p>Use this to copy all static files from flask-appbuilder package to your application static folder. Nice to have
on certain deploys, if your web server is serving the static files directly.</p>
</div>
<div class="section" id="upgrade-db-upgrade-your-database-after-f-a-b-upgrade-to-1-3-0">
<h4><strong>upgrade-db</strong> - Upgrade your database after F.A.B. upgrade to 1.3.0<a class="headerlink" href="#upgrade-db-upgrade-your-database-after-f-a-b-upgrade-to-1-3-0" title="Permalink to this headline">¶</a></h4>
<p>Will upgrade your database, necessary if you’re already using F.A.B. Users now are able to have multiple roles.
Take a look at <a class="reference internal" href="index.html#document-versionmigration"><span class="doc">Version Migration</span></a></p>
</div>
<div class="section" id="reset-password-resets-a-user-s-password">
<h4><strong>reset-password</strong> - Resets a user’s password.<a class="headerlink" href="#reset-password-resets-a-user-s-password" title="Permalink to this headline">¶</a></h4>
<p>Reset a user’s password</p>
</div>
</div>
<span id="document-config"></span><div class="section" id="base-configuration">
<h3>Base Configuration<a class="headerlink" href="#base-configuration" title="Permalink to this headline">¶</a></h3>
<div class="section" id="configuration-keys">
<h4>Configuration keys<a class="headerlink" href="#configuration-keys" title="Permalink to this headline">¶</a></h4>
<p>Use config.py to configure the following parameters. By default it will use SQLLITE DB, and bootstrap’s default theme:</p>
<table border="1" class="table-bordered table-hover docutils">
<colgroup>
<col width="39%" />
<col width="49%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Description</th>
<th class="head">Mandatory</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SQLALCHEMY_DATABASE_URI</td>
<td>DB connection string (flask-sqlalchemy)</td>
<td>Cond.</td>
</tr>
<tr class="row-odd"><td>MONGODB_SETTINGS</td>
<td>DB connection string (flask-mongoengine)</td>
<td>Cond.</td>
</tr>
<tr class="row-even"><td><dl class="first last docutils">
<dt>AUTH_TYPE = 0 | 1 | 2 | 3 | 4</dt>
<dd>or</dd>
<dt>AUTH_TYPE = AUTH_OID, AUTH_DB,</dt>
<dd>AUTH_LDAP, AUTH_REMOTE
AUTH_OAUTH</dd>
</dl>
</td>
<td><dl class="first last docutils">
<dt>This is the authentication type</dt>
<dd><ul class="first last simple">
<li>0 = Open ID</li>
<li>1 = Database style (user/password)</li>
<li>2 = LDAP, use AUTH_LDAP_SERVER also</li>
<li><dl class="first docutils">
<dt>3 = uses web server environ var</dt>
<dd>REMOTE_USER</dd>
</dl>
</li>
<li>4 = USE ONE OR MANY OAUTH PROVIDERS</li>
</ul>
</dd>
</dl>
</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>AUTH_USER_REGISTRATION =
True|False</td>
<td>Set to True to enable user self
registration</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AUTH_USER_REGISTRATION_ROLE</td>
<td>Set role name, to be assign when a user
registers himself. This role must already
exist. Mandatory when using user
registration</td>
<td>Cond.</td>
</tr>
<tr class="row-odd"><td>AUTH_LDAP_SERVER</td>
<td><p class="first">define your ldap server when AUTH_TYPE=2
example:</p>
<p>AUTH_TYPE = 2</p>
<p class="last">AUTH_LDAP_SERVER = “<a class="reference external" href="ldap://ldapserver.new">ldap://ldapserver.new</a>”</p>
</td>
<td>Cond.</td>
</tr>
<tr class="row-even"><td>AUTH_LDAP_BIND_USER</td>
<td><p class="first">Define the DN for the user that will be
used for the initial LDAP BIND.
This is necessary for OpenLDAP and can be
used on MSFT AD.</p>
<p class="last">AUTH_LDAP_BIND_USER =
“cn=queryuser,dc=example,dc=com”</p>
</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AUTH_LDAP_BIND_PASSWORD</td>
<td>Define password for the bind user.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AUTH_LDAP_TLS_DEMAND</td>
<td>Demands TLS peer certificate checking
(Bool)</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AUTH_LDAP_TLS_CACERTDIR</td>
<td>CA Certificate directory to check peer
certificate</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AUTH_LDAP_TLS_CACERTFILE</td>
<td>CA Certificate file to check peer
certificate</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AUTH_LDAP_TLS_CERTFILE</td>
<td>Certificate file for client auth
use with AUTH_LDAP_TLS_KEYFILE</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AUTH_LDAP_TLS_KEYFILE</td>
<td>Certificate key file for client aut</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AUTH_LDAP_SEARCH</td>
<td><p class="first">Use search with self user
registration or when using
AUTH_LDAP_BIND_USER.</p>
<p>AUTH_LDAP_SERVER = “<a class="reference external" href="ldap://ldapserver.new">ldap://ldapserver.new</a>”</p>
<p class="last">AUTH_LDAP_SEARCH = “ou=people,dc=example”</p>
</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AUTH_LDAP_SEARCH_FILTER</td>
<td><p class="first">Filter or limit allowable users from
the LDAP server, e.g., only the people
on your team.</p>
<p class="last">AUTH_LDAP_SEARCH_FILTER =
“(memberOf=cn=group name,OU=type,dc=ex
,cn=com)”</p>
</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AUTH_LDAP_UID_FIELD</td>
<td><p class="first">if doing an indirect bind to ldap, this
is the field that matches the username
when searching for the account to bind
to.
example:</p>
<p>AUTH_TYPE = 2</p>
<p>AUTH_LDAP_SERVER = “<a class="reference external" href="ldap://ldapserver.new">ldap://ldapserver.new</a>”</p>
<p>AUTH_LDAP_SEARCH = “ou=people,dc=example”</p>
<p class="last">AUTH_LDAP_UID_FIELD = “uid”</p>
</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AUTH_LDAP_FIRSTNAME_FIELD</td>
<td><p class="first">sets the field in the ldap directory that
stores the user’s first name. This field
is used to propagate user’s first name
into the User database.
Default is “givenName”.
example:</p>
<p>AUTH_TYPE = 2</p>
<p>AUTH_LDAP_SERVER = “<a class="reference external" href="ldap://ldapserver.new">ldap://ldapserver.new</a>”</p>
<p>AUTH_LDAP_SEARCH = “ou=people,dc=example”</p>
<p class="last">AUTH_LDAP_FIRSTNAME_FIELD = “givenName”</p>
</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AUTH_LDAP_LASTNAME_FIELD</td>
<td><p class="first">sets the field in the ldap directory that
stores the user’s last name. This field
is used to propagate user’s last name
into the User database.
Default is “sn”.
example:</p>
<p>AUTH_TYPE = 2</p>
<p>AUTH_LDAP_SERVER = “<a class="reference external" href="ldap://ldapserver.new">ldap://ldapserver.new</a>”</p>
<p>AUTH_LDAP_SEARCH = “ou=people,dc=example”</p>
<p class="last">AUTH_LDAP_LASTNAME_FIELD = “sn”</p>
</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AUTH_LDAP_EMAIL_FIELD</td>
<td><p class="first">sets the field in the ldap directory that
stores the user’s email address. This
field is used to propagate user’s email
address into the User database.
Default is “mail”.
example:</p>
<p>AUTH_TYPE = 2</p>
<p>AUTH_LDAP_SERVER = “<a class="reference external" href="ldap://ldapserver.new">ldap://ldapserver.new</a>”</p>
<p>AUTH_LDAP_SEARCH = “ou=people,dc=example”</p>
<p class="last">AUTH_LDAP_EMAIL_FIELD = “mail”</p>
</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AUTH_LDAP_ALLOW_SELF_SIGNED</td>
<td>Allow LDAP authentication to use self
signed certificates (LDAPS)</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AUTH_LDAP_APPEND_DOMAIN</td>
<td><p class="first">Append a domain to all logins. No need to
use <a class="reference external" href="mailto:john&#37;&#52;&#48;domain&#46;local">john<span>&#64;</span>domain<span>&#46;</span>local</a>. Set it like:</p>
<p>AUTH_LDAP_APPEND_DOMAIN = ‘domain.local’</p>
<p class="last">And the user can login using just ‘john’</p>
</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AUTH_LDAP_USERNAME_FORMAT</td>
<td><p class="first">It converts username to specific format for
LDAP authentications. For example,</p>
<p>username = “userexample”</p>
<p>AUTH_LDAP_USERNAME_FORMAT=”format-%s”.</p>
<p class="last">It authenticates with “format-userexample”.</p>
</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AUTH_ROLE_ADMIN</td>
<td>Configure the name of the admin role.</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AUTH_ROLE_PUBLIC</td>
<td>Special Role that holds the public
permissions, no authentication needed.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>APP_NAME</td>
<td>The name of your application.</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>APP_THEME</td>
<td>Various themes for you to choose
from (bootwatch).</td>
<td>No</td>
</tr>
<tr class="row-even"><td>APP_ICON</td>
<td>path of your application icons
will be shown on the left side of the menu</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>ADDON_MANAGERS</td>
<td>A list of addon manager’s classes
Take a look at addon chapter on docs.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>UPLOAD_FOLDER</td>
<td>Files upload folder.
Mandatory for file uploads.</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FILE_ALLOWED_EXTENSIONS</td>
<td>Tuple with allower extensions.
FILE_ALLOWED_EXTENSIONS = (‘txt’,’doc’)</td>
<td>No</td>
</tr>
<tr class="row-even"><td>IMG_UPLOAD_FOLDER</td>
<td>Image upload folder.
Mandatory for image uploads.</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>IMG_UPLOAD_URL</td>
<td>Image relative URL.
Mandatory for image uploads.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>IMG_SIZE</td>
<td>tuple to define default image resize.
(width, height, True|False).</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>BABEL_DEFAULT_LOCALE</td>
<td>Babel’s default language.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LANGUAGES</td>
<td>A dictionary mapping
the existing languages with the countries
name and flag</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FAB_API_SHOW_STACKTRACE</td>
<td>Sends api stack trace on uncaught
exceptions. (Boolean)</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FAB_API_MAX_PAGE_SIZE</td>
<td>Sets a limit for FAB Model Api page size</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FAB_API_SWAGGER_UI</td>
<td>Enables a Swagger UI view (Boolean)</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FAB_UPDATE_PERMS</td>
<td>Enables or disables update permissions
Default is True (Boolean)</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FAB_SECURITY_MANAGER_CLASS</td>
<td>Declare a new custom SecurityManager
class</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FAB_ADD_SECURITY_VIEWS</td>
<td>Enables or disables registering all
security views (boolean default:True)</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FAB_ADD_OPENAPI_VIEWS</td>
<td>Enables or disables registering all
OPENAPI views (boolean default:True)</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FAB_ROLES</td>
<td>Configure builtin roles see Security
chapter for further detail</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FAB_INDEX_VIEW</td>
<td>Path of your custom IndexView class
(str)</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FAB_MENU</td>
<td>Path of your custom Menu class
(str)</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FAB_BASE_TEMPLATE</td>
<td>Path of your custom base template</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FAB_STATIC_FOLDER</td>
<td>Path to override default static folder</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FAB_STATIC_URL_PATH</td>
<td>Path to override default static folder</td>
<td>No</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="using-config-py">
<h4>Using config.py<a class="headerlink" href="#using-config-py" title="Permalink to this headline">¶</a></h4>
<p>My favorite way, and the one I advise if you are building a medium to large size application
is to place all your configuration keys on a config.py file</p>
<p>Next you only have to import them to the Flask app object, like this</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Take a look at the skeleton <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder-Skeleton/blob/master/config.py">config.py</a></p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-views"></span><div class="section" id="base-views">
<h3>Base Views<a class="headerlink" href="#base-views" title="Permalink to this headline">¶</a></h3>
<p>Views are the base concept of F.A.B.
They work like a class that represent a concept and present the views and methods to implement it.</p>
<p>Each view is a Flask blueprint that will be created for you automatically by the framework.
This is a simple but powerful concept.
You will map your methods to routing points, and each method will be registered
as a possible security permission if you want.</p>
<p>So your methods will have automatic routing points much like Flask, but this time in a class.
Additionally you can have granular security (method access security) that can be associated with a user’s role
(take a look at <a class="reference internal" href="index.html#document-security"><span class="doc">Security</span></a> for more detail).</p>
<p>The views documented on this chapter are the building blocks of F.A.B, but the juicy part is on the next chapter
with ModelView, ChartView and others.</p>
<div class="section" id="baseview">
<h4>BaseView<a class="headerlink" href="#baseview" title="Permalink to this headline">¶</a></h4>
<p>All views inherit from this class.
Its constructor will register your exposed urls on flask as a Blueprint,
as well as all security permissions that need to be defined and protected.</p>
<p>You can use this kind of view to implement your own custom pages,
attach it to a menu or link it from any point to your site.</p>
<p>Decorate your url routing methods with <strong>&#64;expose</strong>.
Additionally add <strong>&#64;has_access</strong> decorator to tell flask that this is a security protected method.</p>
<p>Using the Flask-AppBuilder-Skeleton (take a look at the <a class="reference internal" href="index.html#document-installation"><span class="doc">Installation</span></a> chapter). Edit views.py file and add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">AppBuilder</span><span class="p">,</span> <span class="n">expose</span><span class="p">,</span> <span class="n">BaseView</span>
<span class="kn">from</span> <span class="nn">app</span> <span class="k">import</span> <span class="n">appbuilder</span>

<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">BaseView</span><span class="p">):</span>
    <span class="n">route_base</span> <span class="o">=</span> <span class="s2">&quot;/myview&quot;</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/method1/&lt;string:param1&gt;&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">method1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param1</span><span class="p">):</span>
        <span class="c1"># do something with param1</span>
        <span class="c1"># and return it</span>
        <span class="k">return</span> <span class="n">param1</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/method2/&lt;string:param1&gt;&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">method2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param1</span><span class="p">):</span>
        <span class="c1"># do something with param1</span>
        <span class="c1"># and render it</span>
        <span class="n">param1</span> <span class="o">=</span> <span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">param1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">param1</span>

<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view_no_menu</span><span class="p">(</span><span class="n">MyView</span><span class="p">())</span>
</pre></div>
</div>
<p>You can find this example on <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/simpleview1">SimpleView1</a>
look at the file app/views.py</p>
<p>This simple example will register your view with two routing urls on:</p>
<ul class="simple">
<li>/myview/method1/&lt;string:param1&gt;</li>
<li>/myview/method2/&lt;string:param1&gt;</li>
</ul>
<p>No menu will be created for this and no security permissions will be created.
If you want to enable detailed security access for your methods use the <strong>&#64;has_access</strong> decorator.</p>
<p>Now run this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export FLASK_APP=app
$ flask run
</pre></div>
</div>
<p>You can test your methods using the following urls:</p>
<p><a class="reference external" href="http://localhost:8080/myview/method1/john">http://localhost:8080/myview/method1/john</a></p>
<p><a class="reference external" href="http://localhost:8080/myview/method2/john">http://localhost:8080/myview/method2/john</a></p>
<p>As you can see, those methods are public. So let’s secure them. Change views.py to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">AppBuilder</span><span class="p">,</span> <span class="n">BaseView</span><span class="p">,</span> <span class="n">expose</span><span class="p">,</span> <span class="n">has_access</span>
<span class="kn">from</span> <span class="nn">app</span> <span class="k">import</span> <span class="n">appbuilder</span>


<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">BaseView</span><span class="p">):</span>

    <span class="n">default_view</span> <span class="o">=</span> <span class="s1">&#39;method1&#39;</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/method1/&#39;</span><span class="p">)</span>
    <span class="nd">@has_access</span>
    <span class="k">def</span> <span class="nf">method1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># do something with param1</span>
        <span class="c1"># and return to previous page or index</span>
        <span class="k">return</span> <span class="s1">&#39;Hello&#39;</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/method2/&lt;string:param1&gt;&#39;</span><span class="p">)</span>
    <span class="nd">@has_access</span>
    <span class="k">def</span> <span class="nf">method2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param1</span><span class="p">):</span>
        <span class="c1"># do something with param1</span>
        <span class="c1"># and render template with param</span>
        <span class="n">param1</span> <span class="o">=</span> <span class="s1">&#39;Goodbye </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">param1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">param1</span>

<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyView</span><span class="p">,</span> <span class="s2">&quot;Method1&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s1">&#39;My View&#39;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;Method2&quot;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="s1">&#39;/myview/method2/john&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s1">&#39;My View&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can find this example on <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/simpleview2">SimpleView2</a>.
Take a look at their definition:</p>
<span class="target" id="module-flask_appbuilder.baseviews"></span><dl class="function">
<dt id="flask_appbuilder.baseviews.expose">
<code class="descclassname">flask_appbuilder.baseviews.</code><code class="descname">expose</code><span class="sig-paren">(</span><em>url='/'</em>, <em>methods=('GET'</em>, <em>)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#expose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.expose" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to expose views on your view classes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> – Relative URL for the view</li>
<li><strong>methods</strong> – Allowed HTTP methods. By default only GET is allowed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-flask_appbuilder.security.decorators"></span><dl class="function">
<dt id="flask_appbuilder.security.decorators.has_access">
<code class="descclassname">flask_appbuilder.security.decorators.</code><code class="descname">has_access</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/decorators.html#has_access"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.decorators.has_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to enable granular security permissions to your methods.
Permissions will be associated to a role, and roles are associated to users.</p>
<p>By default the permission’s name is the methods name.</p>
</dd></dl>

<p>This will create the following menu</p>
<a class="reference internal image-reference" href="_images/simpleview2.png"><img alt="_images/simpleview2.png" src="_images/simpleview2.png" style="width: 100%;" /></a>
<p>Notice that these methods will render simple pages not integrated with F.A.B’s look and feel.
It’s easy to render your method’s response integrated with the app’s look and feel,
for this you have to create your own template.
Under your project’s directory and app folder create a folder named ‘templates’.
Inside it create a file name ‘method3.html’</p>
<p>1 - Develop your template (on your &lt;PROJECT_NAME&gt;/app/templates/method3.html):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;appbuilder/base.html&quot;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">content</span> <span class="o">%</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">param1</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>2 - Add the following method on your <em>MyView</em> class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">render_template</span>

<span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/method3/&lt;string:param1&gt;&#39;</span><span class="p">)</span>
<span class="nd">@has_access</span>
<span class="k">def</span> <span class="nf">method3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param1</span><span class="p">):</span>
    <span class="c1"># do something with param1</span>
    <span class="c1"># and render template with param</span>
    <span class="n">param1</span> <span class="o">=</span> <span class="s1">&#39;Goodbye </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">param1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_redirect</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;method3.html&#39;</span><span class="p">,</span>
                           <span class="n">param1</span> <span class="o">=</span> <span class="n">param1</span><span class="p">)</span>
</pre></div>
</div>
<p>3 - Create a menu link to your new method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;Method3&quot;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="s1">&#39;/myview/method3/john&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s1">&#39;My View&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see you just have to extend “appbuilder/base.html” on your template and then override <em>block content</em>.
You have many other <em>blocks</em> to override or extend things like css includes, javascript, headers, tails etc…
Next use <strong>Flask</strong> <strong>render_template</strong> to render your new template.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Update redirect, on version 0.10.3, the redirect algorithm was reviewed, and uses session cookies to keep
5 records of navigation history. This is very useful to redirect back, keeping url arguments and
improving UI experience. You must call <em>self.update_redirect()</em> to insert the current url into the
navigation history. Sometimes you may want to skip the update, for example on form validation errors, so that
the <em>back</em> operation won’t send you to the same form, prior to the validation error.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since version 1.3.0, you must render all your views templates like <em>self.render_template</em> this
is because the base_template (that can be overridden) and appbuilder are now always passed to the template.</p>
</div>
</div>
<div class="section" id="form-views">
<h4>Form Views<a class="headerlink" href="#form-views" title="Permalink to this headline">¶</a></h4>
<p>Subclass SimpleFormView or PublicFormView to provide base processing for your customized form views.</p>
<p>Usually you will need this kind of view to present forms that are not Database Model based,
because when they do, F.A.B. can automatically generate them and you can add or remove fields to it,
as well as custom validators. For this you can use ModelView instead.</p>
<p>To create a custom form view, first define your <a class="reference external" href="https://wtforms.readthedocs.org/en/latest/">WTForm</a>
fields and inherit them from F.A.B. <em>DynamicForm</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">wtforms</span> <span class="k">import</span> <span class="n">Form</span><span class="p">,</span> <span class="n">StringField</span>
<span class="kn">from</span> <span class="nn">wtforms.validators</span> <span class="k">import</span> <span class="n">DataRequired</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.fieldwidgets</span> <span class="k">import</span> <span class="n">BS3TextFieldWidget</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.forms</span> <span class="k">import</span> <span class="n">DynamicForm</span>


<span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">DynamicForm</span><span class="p">):</span>
    <span class="n">field1</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">((</span><span class="s1">&#39;Field1&#39;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Your field number one!&#39;</span><span class="p">),</span>
        <span class="n">validators</span> <span class="o">=</span> <span class="p">[</span><span class="n">DataRequired</span><span class="p">()],</span> <span class="n">widget</span><span class="o">=</span><span class="n">BS3TextFieldWidget</span><span class="p">())</span>
    <span class="n">field2</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">((</span><span class="s1">&#39;Field2&#39;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Your field number two!&#39;</span><span class="p">),</span> <span class="n">widget</span><span class="o">=</span><span class="n">BS3TextFieldWidget</span><span class="p">())</span>
</pre></div>
</div>
<p>Now define your form view to expose urls, create a menu entry, create security accesses, define pre and post processing.</p>
<p>Implement <em>form_get</em> and <em>form_post</em> to implement your form pre-processing and post-processing.
You can use <em>form_get</em> to prefill the form with your data, and/or pre process something on your application, then
use <em>form_post</em> to post process the form after the user submits it, you can save the data to database, send an email
or any other action required.</p>
<p>On your form_post method, you can also return None, or a Flask response to render a custom template or redirect the user.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">SimpleFormView</span>
<span class="kn">from</span> <span class="nn">flask_babel</span> <span class="k">import</span> <span class="n">lazy_gettext</span> <span class="k">as</span> <span class="n">_</span>


<span class="k">class</span> <span class="nc">MyFormView</span><span class="p">(</span><span class="n">SimpleFormView</span><span class="p">):</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">MyForm</span>
    <span class="n">form_title</span> <span class="o">=</span> <span class="s1">&#39;This is my first form view&#39;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;My form submitted&#39;</span>

    <span class="k">def</span> <span class="nf">form_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="n">form</span><span class="o">.</span><span class="n">field1</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;This was prefilled&#39;</span>

    <span class="k">def</span> <span class="nf">form_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="c1"># post process form</span>
        <span class="n">flash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="s1">&#39;info&#39;</span><span class="p">)</span>

<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyFormView</span><span class="p">,</span> <span class="s2">&quot;My form View&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-group&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;My form View&#39;</span><span class="p">),</span>
                     <span class="n">category</span><span class="o">=</span><span class="s2">&quot;My Forms&quot;</span><span class="p">,</span> <span class="n">category_icon</span><span class="o">=</span><span class="s2">&quot;fa-cogs&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice that this class derives from <em>BaseView</em> so all properties from the parent class can be overridden.
Notice also how label uses babel’s lazy_gettext as _(‘text’) function so that your menu items can be translated.</p>
<p>Most important Base Properties:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">form_title:</th><td class="field-body">The title to be presented (this is mandatory)</td>
</tr>
<tr class="field-even field"><th class="field-name">form_columns:</th><td class="field-body">The form column names to include</td>
</tr>
<tr class="field-odd field"><th class="field-name">form:</th><td class="field-body">Your form class (<a class="reference external" href="https://wtforms.readthedocs.org/en/latest/">WTForm</a>) (this is mandatory)</td>
</tr>
</tbody>
</table>
<p>You can find this example on <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/simpleform">SimpleForm</a>.</p>
</div>
</div>
<span id="document-quickhowto"></span><div class="section" id="model-views-quick-how-to">
<h3>Model Views (Quick How to)<a class="headerlink" href="#model-views-quick-how-to" title="Permalink to this headline">¶</a></h3>
<p>On this chapter we will create a very simple contacts application you can try a
<a class="reference external" href="http://flaskappbuilder.pythonanywhere.com/">Live Demo</a> (login with guest/welcome).</p>
<p>And the source code for this chapter on
<a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickhowto">examples</a></p>
<div class="section" id="the-base-skeleton-application">
<h4>The Base Skeleton Application<a class="headerlink" href="#the-base-skeleton-application" title="Permalink to this headline">¶</a></h4>
<p>If you’re working with the base skeleton application (take a look at the <a class="reference internal" href="index.html#document-installation"><span class="doc">Installation</span></a> chapter).</p>
<p>you now have the following directory structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">your</span> <span class="n">project</span> <span class="n">name</span><span class="o">&gt;/</span>
    <span class="n">config</span><span class="o">.</span><span class="n">py</span> <span class="p">:</span> <span class="n">All</span> <span class="n">the</span> <span class="n">application</span><span class="s1">&#39;s configuration</span>
    <span class="n">app</span><span class="o">/</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="p">:</span> <span class="n">Application</span><span class="s1">&#39;s initialization</span>
        <span class="n">models</span><span class="o">.</span><span class="n">py</span> <span class="p">:</span> <span class="n">Declare</span> <span class="n">your</span> <span class="n">database</span> <span class="n">models</span> <span class="n">here</span>
        <span class="n">views</span><span class="o">.</span><span class="n">py</span>  <span class="p">:</span> <span class="n">Implement</span> <span class="n">your</span> <span class="n">views</span> <span class="n">here</span>
</pre></div>
</div>
<p>It’s very easy and fast to create an application out of the box, with detailed security.</p>
<p>Please take a look at github <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples">examples</a></p>
</div>
<div class="section" id="simple-contacts-application">
<h4>Simple contacts application<a class="headerlink" href="#simple-contacts-application" title="Permalink to this headline">¶</a></h4>
<p>Let’s create a very simple contacts application.
F.A.B uses the excellent SQLAlchemy ORM package, and its Flask extension.
you should be familiar with its declarative syntax to define your database models on F.A.B.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since 1.3.0 there is partial support for <strong>MongoDB</strong> using MongoEngine. You can declare any <em>normalized</em>
database schema, just like on SQLAlchemy, and use ModelView and CharView’s exactly the same way. Next releases
will gradually support non normalized schemas for MongoDB.</p>
</div>
<p>On our example application we are going to define two tables,
a <em>Contacts</em> table that will hold the contact’s detailed information,
and a <em>ContactGroup</em> table to group our contacts or classify them.
We could additionally define a <em>Gender</em> table, to serve the role of enumerated values for ‘Male’ and ‘Female’.</p>
<p>Although you’re not obliged to, I advise you to inherit your model classes from <strong>Model</strong> class.
Model class is exactly the same as Flask-SQLALchemy <strong>db.Model</strong> but without the underlying connection.
You can of course inherit from <strong>db.Model</strong> normal Flask-SQLAlchemy.
The reason for this is that <strong>Model</strong> is on the same declarative space of F.A.B.
and using it will allow you to define relations to Users.</p>
<p>You can add automatic <em>Audit</em> triggered columns to your models,
by inheriting them from <em>AuditMixin</em> also. (see <a class="reference internal" href="index.html#document-api"><span class="doc">API Reference</span></a>)</p>
<p>So, first we are going to create a <em>ContactGroup</em> model, to group our contacts</p>
</div>
<div class="section" id="define-your-models-models-py">
<h4>Define your models (models.py)<a class="headerlink" href="#define-your-models-models-py" title="Permalink to this headline">¶</a></h4>
<p>The <em>ContactGroup</em> model.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">,</span> <span class="n">Date</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="k">import</span> <span class="n">relationship</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">Model</span>

<span class="k">class</span> <span class="nc">ContactGroup</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p>The <em>Contacts</em> table.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Contact</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span>  <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">=</span>  <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">564</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;Street &#39;</span><span class="p">)</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">)</span>
    <span class="n">personal_phone</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
    <span class="n">personal_cellphone</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
    <span class="n">contact_group_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;contact_group.id&#39;</span><span class="p">))</span>
    <span class="n">contact_group</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;ContactGroup&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p>Notice that SqlAlchemy properties used here like ‘unique’, ‘nullable’ and ‘default’, will have special
treatment. In this case when adding a new <em>Contact</em> a query will be made to validate
if someone with the same name already exists. Contacts with empty names will not be allowed. Column types
are validated. The address field will contain ‘Street ‘ as the default.
You can add your own custom validations too, take a look at <a class="reference internal" href="index.html#document-advanced"><span class="doc">Advanced Configuration</span></a></p>
</div>
<div class="section" id="define-your-views-views-py">
<h4>Define your Views (views.py)<a class="headerlink" href="#define-your-views-views-py" title="Permalink to this headline">¶</a></h4>
<p>Now we are going to define our view for <em>ContactGroup</em> model.
This view will setup functionality for create, remove, update and show primitives for your model’s definition.</p>
<p>We inherit from the <em>ModelView</em> class, which inherits from <em>BaseCRUDView</em>, which itself inherits from <em>BaseModelView</em>,
so you can override all their public properties to configure many details for your CRUD primitives.
Take a look at <a class="reference internal" href="index.html#document-advanced"><span class="doc">Advanced Configuration</span></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">ModelView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>

<span class="k">class</span> <span class="nc">GroupModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">ContactGroup</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">ContactModelView</span><span class="p">]</span>
</pre></div>
</div>
<p>I hope this was easy enough! Some questions may arise…</p>
<p>Required properties:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">datamodel:</th><td class="field-body">is the db abstraction layer. Initialize it with your view’s model.</td>
</tr>
</tbody>
</table>
<p>Optional properties:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">related_views:</th><td class="field-body">if you want a master/detail view on the show and edit. F.A.B.
will relate 1/N relations automatically, it will display a show or edit view with tab (or accordion)
with a list related record. You can relate charts also.</td>
</tr>
</tbody>
</table>
<p>This is the most basic configuration (with an added related view).</p>
<p>But where is ContactModelView ? (that was a reference in <em>related_views</em> list)</p>
<p>Let’s define it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>

    <span class="n">label_columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;contact_group&#39;</span><span class="p">:</span><span class="s1">&#39;Contacts Group&#39;</span><span class="p">}</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;personal_cellphone&#39;</span><span class="p">,</span><span class="s1">&#39;birthday&#39;</span><span class="p">,</span><span class="s1">&#39;contact_group&#39;</span><span class="p">]</span>

    <span class="n">show_fieldsets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span>
            <span class="s1">&#39;Summary&#39;</span><span class="p">,</span>
            <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="s1">&#39;contact_group&#39;</span><span class="p">]}</span>
        <span class="p">),</span>
        <span class="p">(</span>
            <span class="s1">&#39;Personal Info&#39;</span><span class="p">,</span>
            <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;birthday&#39;</span><span class="p">,</span> <span class="s1">&#39;personal_phone&#39;</span><span class="p">,</span> <span class="s1">&#39;personal_cellphone&#39;</span><span class="p">],</span> <span class="s1">&#39;expanded&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
        <span class="p">),</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>Some explanation:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">label_columns:</th><td class="field-body">defines the labels for your columns.
The framework will define the missing ones for you, with a pretty version of your column names.</td>
</tr>
<tr class="field-even field"><th class="field-name">show_fieldsets:</th><td class="field-body">A fieldset (Django style). You can use show_fieldsets, add_fieldsets, edit_fieldsets
customize the show, add and edit views independently.</td>
</tr>
</tbody>
</table>
<p>Additionally, you can customize which columns are displayed and their order on lists and forms.
Remember you can include columns, relations or methods from a model’s definition. If you have a long
list of columns and want to exclude just a few from add/edit/show form you can use the exclude columns
property:</p>
<span class="target" id="module-flask_appbuilder.baseviews"></span><dl class="class">
<dt id="flask_appbuilder.baseviews.BaseCRUDView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.baseviews.</code><code class="descname">BaseCRUDView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for ModelView, all properties are inherited
Customize ModelView overriding this properties</p>
<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_columns">
<code class="descname">add_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be displayed on the add form view.
Use it to control the order of the display</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_exclude_columns">
<code class="descname">add_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns to exclude from the add form.
By default all columns are included.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_columns">
<code class="descname">edit_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be displayed on the edit form view.
Use it to control the order of the display</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_exclude_columns">
<code class="descname">edit_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>A list of columns to exclude from the edit form.</dt>
<dd>By default all columns are included.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.list_columns">
<code class="descname">list_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.list_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be displayed on the list view.
Use it to control the order of the display</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.show_columns">
<code class="descname">show_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.show_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be displayed on the show view.
Use it to control the order of the display</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.show_exclude_columns">
<code class="descname">show_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.show_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns to exclude from the show view.
By default all columns are included.</p>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<p>You can also control which columns will be included on search, use the same logic for this:</p>
<span class="target" id="module-flask_appbuilder.baseviews"></span><dl class="class">
<dt id="flask_appbuilder.baseviews.BaseModelView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.baseviews.</code><code class="descname">BaseModelView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseModelView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class of ModelView and ChartView, all properties are inherited
Customize ModelView and ChartView overriding this properties</p>
<p>This class supports all the basics for query</p>
<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.search_columns">
<code class="descname">search_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.search_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>List with allowed search columns, if not provided
all possible search columns will be used
If you want to limit the search (<em>filter</em>) columns possibilities,
define it with a list of column names from your model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
    <span class="n">search_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;address&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.search_exclude_columns">
<code class="descname">search_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.search_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>List with columns to exclude from search.
Search includes all possible columns by default</p>
</dd></dl>

</dd></dl>

<p>You can easily use builtin alternative look, using widgets
take a look at the <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/widgets">widgets</a> example.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Fields that reference relationships, will display the defined related model representation
(on this case __repr__() methods on ContactGroup Model), so by default these fields can’t be ordered.
To enable order by on a list for relationship fields, you can (since 1.1.1) reference
them using dotted notation. On this example you can reference them using ‘contact_group.name’.</p>
</div>
</div>
<div class="section" id="register-views-py">
<h4>Register (views.py)<a class="headerlink" href="#register-views-py" title="Permalink to this headline">¶</a></h4>
<p>Register everything, to present the models and create the menu. Issue <strong>create_all</strong> to create your models also.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
    <span class="n">GroupModelView</span><span class="p">,</span>
    <span class="s2">&quot;List Groups&quot;</span><span class="p">,</span>
    <span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa-folder-open-o&quot;</span><span class="p">,</span>
    <span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;Contacts&quot;</span><span class="p">,</span>
    <span class="n">category_icon</span> <span class="o">=</span> <span class="s2">&quot;fa-envelope&quot;</span>
<span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
    <span class="n">ContactModelView</span><span class="p">,</span>
    <span class="s2">&quot;List Contacts&quot;</span><span class="p">,</span>
    <span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa-envelope&quot;</span><span class="p">,</span>
    <span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;Contacts&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Take a look at the <a class="reference internal" href="index.html#document-api"><span class="doc">API Reference</span></a> for add_view method.</p>
</div>
<div class="section" id="security">
<h4>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h4>
<p>FAB will create all possible permissions and add them to the <code class="docutils literal notranslate"><span class="pre">AUTH_ROLE_ADMIN</span></code> config key
that defaults to <strong>Admin</strong>. you can completely override the default inferred permissions
and reduce the level of granularity, for mode detail about this read the <a class="reference internal" href="index.html#document-security"><span class="doc">Security</span></a> chapter.</p>
</div>
<div class="section" id="example-and-live-demo">
<h4>Example and Live Demo<a class="headerlink" href="#example-and-live-demo" title="Permalink to this headline">¶</a></h4>
<p>You can find this example at: <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickhowto">https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickhowto</a></p>
<p>Live quickhowto <a class="reference external" href="http://flaskappbuilder.pythonanywhere.com/">Demo</a> (login with guest/welcome).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The icons for the menu on this example are from font-awesome,
Checkout fontAwesome <a class="reference external" href="http://fontawesome.io/icons/">Icons</a>  names.
Font-Awesome is already included and you can use any icon you like on menus and actions</p>
</div>
<p>With this very few lines of code (and could be fewer), you now have a web application
with detailed security for each CRUD primitives and Menu options, authentication,
and form field validation. Yet you can extensively change many details,
add your own triggers before or after CRUD primitives, develop your own web views and integrate them.</p>
<p>Some images:</p>
<a class="reference internal image-reference" href="_images/login_db.png"><img alt="_images/login_db.png" src="_images/login_db.png" style="width: 100%;" /></a>
<a class="reference internal image-reference" href="_images/group_list.png"><img alt="_images/group_list.png" src="_images/group_list.png" style="width: 100%;" /></a>
<a class="reference internal image-reference" href="_images/contact_list.png"><img alt="_images/contact_list.png" src="_images/contact_list.png" style="width: 100%;" /></a>
</div>
<div class="section" id="exposed-methods">
<h4>Exposed methods<a class="headerlink" href="#exposed-methods" title="Permalink to this headline">¶</a></h4>
<p>Your <strong>ModelView</strong> classes expose the following methods as flask endpoints</p>
<ul class="simple">
<li>list</li>
<li>show</li>
<li>add</li>
<li>edit</li>
<li>delete</li>
<li>download</li>
<li>action</li>
<li>API methods</li>
</ul>
<p>This exposes a REST API (not completely strict). You also have an AJAX REST API.
Each method has its own security permission, so you can control accesses at this level.</p>
<p>The API methods take the same arguments as list, show, add, edit and delete, but return JSON and HTTP return codes
in case of success or errors. See the following table for a description of each method.</p>
<table border="1" class="table-bordered table-hover docutils">
<colgroup>
<col width="27%" />
<col width="50%" />
<col width="16%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Description</th>
<th class="head">Permission Name</th>
<th class="head">HTTP</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/api</td>
<td>Return the existing API URL’s</td>
<td>can_list</td>
<td>GET</td>
</tr>
<tr class="row-odd"><td>/api/read</td>
<td>Queries models data, receives args as list</td>
<td>can_list</td>
<td>GET</td>
</tr>
<tr class="row-even"><td>/api/column</td>
<td>Returns results for related column</td>
<td>can_list</td>
<td>GET</td>
</tr>
<tr class="row-odd"><td>/api/create</td>
<td>Receives a form as POST and creates record</td>
<td>can_add</td>
<td>POST</td>
</tr>
<tr class="row-even"><td>/api/update</td>
<td>Receives a form as PUT and updates record</td>
<td>can_edit</td>
<td>PUT</td>
</tr>
<tr class="row-odd"><td>/api/column/add/&lt;COL NAME/</td>
<td>Returns values for a related field</td>
<td>can_add</td>
<td>GET</td>
</tr>
<tr class="row-even"><td>/api/column/add/&lt;COL NAME/</td>
<td>Returns values for a related field</td>
<td>can_edit</td>
<td>GET</td>
</tr>
<tr class="row-odd"><td>/api/readvalues</td>
<td>Queries models data, ready to use on select2 combos</td>
<td>can_list</td>
<td>GET</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rest-api">
<h4>REST API<a class="headerlink" href="#rest-api" title="Permalink to this headline">¶</a></h4>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">note:</th><td class="field-body">This sort of automatic REST API is going to be deprecated, and will
be completely removed in 2.3.X. Checkout the new API on <a class="reference internal" href="index.html#document-rest_api"><span class="doc">REST API</span></a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="url-api">
<h4>URL=/api<a class="headerlink" href="#url-api" title="Permalink to this headline">¶</a></h4>
<p>The root of the API returns information about the available methods, like their URL’s using url_for from Flask.
The users permissions on this view, labels etc…</p>
<p>Let’s take a close look at the returned JSON structure from this method. The returned object is a dictionary containing
the following keys:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">api_urls:</th><td class="field-body">Dictionary with All builtin CRUD methods and their URL’s</td>
</tr>
<tr class="field-even field"><th class="field-name">can_add:</th><td class="field-body">User’s permission on this view. Returns true or false.</td>
</tr>
<tr class="field-odd field"><th class="field-name">can_delete:</th><td class="field-body">User’s permission on this view. Returns true or false.</td>
</tr>
<tr class="field-even field"><th class="field-name">can_edit:</th><td class="field-body">User’s permission on this view. Returns true or false.</td>
</tr>
<tr class="field-odd field"><th class="field-name">can_show:</th><td class="field-body">User’s permission on this view. Returns true or false.</td>
</tr>
<tr class="field-even field"><th class="field-name">can_update:</th><td class="field-body">User’s permission on this view. Returns true or false.</td>
</tr>
<tr class="field-odd field"><th class="field-name">label_columns:</th><td class="field-body">Dictionary for label_columns exactly equal as the ModelView property</td>
</tr>
<tr class="field-even field"><th class="field-name">list_columns:</th><td class="field-body">The columns to use when listing.</td>
</tr>
<tr class="field-odd field"><th class="field-name">modelview_name:</th><td class="field-body">The name of the ModelView class.</td>
</tr>
<tr class="field-even field"><th class="field-name">modelview_urls:</th><td class="field-body">Dictionary with the UI’s URLS for Add, Edit and Show.</td>
</tr>
<tr class="field-odd field"><th class="field-name">order_columns:</th><td class="field-body">List with the columns allowed to do order by commands.</td>
</tr>
<tr class="field-even field"><th class="field-name">page_size:</th><td class="field-body">The default page size.</td>
</tr>
<tr class="field-odd field"><th class="field-name">search_fields:</th><td class="field-body">Dictionary with column names as keys, and WTForm html fields as values.</td>
</tr>
<tr class="field-even field"><th class="field-name">search_filters:</th><td class="field-body">Dictionary with column names as keys and a List with allowed operations for filters as values.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="url-api-read">
<h4>URL=/api/read<a class="headerlink" href="#url-api-read" title="Permalink to this headline">¶</a></h4>
<p>This is the read method of the API, will query your model with filter, ordering and paging operations.</p>
<p>Let’s take a close look at the returned JSON structure from this method. The returned object is a dictionary containing
the following keys:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">count:</th><td class="field-body">Returns an Int with the total number of records.</td>
</tr>
<tr class="field-even field"><th class="field-name">label_columns:</th><td class="field-body">Dictionary for label_columns exactly equal as the ModelView property</td>
</tr>
<tr class="field-odd field"><th class="field-name">list_columns:</th><td class="field-body">The columns to use when listing.</td>
</tr>
<tr class="field-even field"><th class="field-name">modelview_name:</th><td class="field-body">The name of the ModelView class.</td>
</tr>
<tr class="field-odd field"><th class="field-name">order_columns:</th><td class="field-body">List with the columns allowed to do order by commands.</td>
</tr>
<tr class="field-even field"><th class="field-name">page:</th><td class="field-body">Returns an Int, with the page on some page size where the result is located.</td>
</tr>
<tr class="field-odd field"><th class="field-name">page_size:</th><td class="field-body">Returns an Int with the current page size.</td>
</tr>
<tr class="field-even field"><th class="field-name">pks:</th><td class="field-body">Returns a List with the results private keys.</td>
</tr>
<tr class="field-odd field"><th class="field-name">result:</th><td class="field-body">Returns a List with a dictionary for each record.</td>
</tr>
</tbody>
</table>
<p>This method accepts as parameters the following:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Set page size:</th><td class="field-body">_psize_&lt;YOUR MODEL VIEW&gt;=&lt;PAGE SIZE&gt;</td>
</tr>
<tr class="field-even field"><th class="field-name">Set page:</th><td class="field-body">_page_&lt;YOUR MODEL VIEW&gt;=&lt;PAGE&gt;</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Order by column:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">_oc_&lt;&lt;YOUR MODEL VIEW&gt;=&lt;COLUMN NAME&gt;</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Order by direction:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">_od_&lt;&lt;YOUR MODEL VIEW&gt;=&lt;asc|desc&gt;</td>
</tr>
<tr class="field-odd field"><th class="field-name">Filters:</th><td class="field-body">_flt_&lt;INDEX of the search operations for this column&gt;_&lt;COLUMN NANE&gt;=&lt;VALUE&gt; example: _flt_0_name=A</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="url-api-delete-pk">
<h4>URL=/api/delete/&lt;PK&gt;<a class="headerlink" href="#url-api-delete-pk" title="Permalink to this headline">¶</a></h4>
<p>Deletes a record from the model only accepts HTTP DELETE operations. if you want to delete a record with 8 as primary
key issue an HTTP DELETE to the following URL: htpp://localhost:8080/contactmodelview/delete/8</p>
<p>It will return a dictionary that on case of success will have the following keys (returns HTTP 200):</p>
<p>{
“message”: “Deleted Row”,
“severity”: “success”
}</p>
<p>In case of error (returns HTTP 500):</p>
<p>{
“message”: “General Error &lt;class ‘sqlalchemy.orm.exc.UnmappedInstanceError’&gt;”,
“severity”: “danger”
}</p>
</div>
<div class="section" id="extra-views">
<h4>Extra Views<a class="headerlink" href="#extra-views" title="Permalink to this headline">¶</a></h4>
<p>F.A.B. as some extra views like <strong>ModelView</strong> but with different behaviours. You can radically change the way a ModelView
looks like using various approaches like changing CRUD templates or widgets, CSS, inserting or injecting your own
HTML etc, take a look at <a class="reference internal" href="index.html#document-templates"><span class="doc">Templates</span></a>, <a class="reference internal" href="index.html#document-advanced"><span class="doc">Advanced Configuration</span></a>, <a class="reference internal" href="index.html#document-customizing"><span class="doc">Customizing</span></a>.</p>
<p>Yet the framework brings 3 extra subclasses from BaseCRUDView (<strong>ModelView</strong> is a subclass of <strong>BaseCRUDView</strong>, this means
that it implements complete CRUD based on models as well as JSON exposure). This views implement alternative CRUD GUI.</p>
<p>For rendering multiple views (subclasses of BaseModelView) on the same page use <strong>MultipleView</strong>.
Using our previous example you could render the Group list and Contact list on the same page, to do it
add the following view after the definition of <strong>GroupModelView</strong> and <strong>ContactModelView</strong>:</p>
<p>First remember to import:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">MultipleView</span>
</pre></div>
</div>
<p>Then define your View:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MultipleViewsExp</span><span class="p">(</span><span class="n">MultipleView</span><span class="p">):</span>
    <span class="n">views</span> <span class="o">=</span> <span class="p">[</span><span class="n">GroupModelView</span><span class="p">,</span> <span class="n">ContactModelView</span><span class="p">]</span>
</pre></div>
</div>
<p>Then register the view with a menu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
    <span class="n">MultipleViewsExp</span><span class="p">,</span>
    <span class="s2">&quot;Multiple Views&quot;</span><span class="p">,</span>
    <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-envelope&quot;</span><span class="p">,</span>
    <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Contacts&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>You can render as many views on the same page as you want, this includes Chart type views also,
take a look at <a class="reference internal" href="index.html#document-quickcharts"><span class="doc">Chart Views</span></a> to learn about Chart views.</p>
<p>Another interesting alternative view is the <strong>MasterDetailView</strong> as the name implies it implements a master detail
GUI, it will render a menu version of a chosen model and then relate with a previous defined BaseModelView subclass
of you choice.
Again using the Contact application example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GroupMasterView</span><span class="p">(</span><span class="n">MasterDetailView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">ContactGroup</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">ContactModelView</span><span class="p">]</span>
</pre></div>
</div>
<p>The datamodel is the master and the <strong>related_views</strong> property are the views to be filtered by the user’s selection
of the group. You can define as many detail views as you like and again you can even include Chart type views
(they are subclasses of BaseModelView), remember there must be a model relation between the master and the details,
and again the framework will figure out how to relate them by inspecting the backend defined relationships.</p>
</div>
</div>
<span id="document-rest_api"></span><div class="section" id="rest-api">
<h3>REST API<a class="headerlink" href="#rest-api" title="Permalink to this headline">¶</a></h3>
<p>On this chapter we are going to describe how you can define a RESTful API
using almost the same concept as defining your MVC views.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">note:</th><td class="field-body">Follow this example on Flask-AppBuilder project ./examples/base_api/</td>
</tr>
</tbody>
</table>
<p>First let’s see a basic example on how you can define your own
custom API endpoints:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.api</span> <span class="k">import</span> <span class="n">BaseApi</span><span class="p">,</span> <span class="n">expose</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">appbuilder</span>


<span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>
    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/greeting&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>


<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_api</span><span class="p">(</span><span class="n">ExampleApi</span><span class="p">)</span>
</pre></div>
</div>
<p>On the previous example, we are exposing an HTTP GET endpoint,
that returns the following JSON payload:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&#64;expose</span></code> decorator registers your class method as a Flask route that is going
to be associated with a Flask blueprint. A <code class="docutils literal notranslate"><span class="pre">BaseApi</span></code> class defines a blueprint that
contains all exposed methods. By default the base route of the class blueprint is
defined by:</p>
<p><code class="docutils literal notranslate"><span class="pre">/api/v1/&lt;LOWERCASE_CLASS_NAME&gt;</span></code></p>
<p>So we can make a request to our method using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl http://localhost:8080/api/v1/exampleapi/greeting
</pre></div>
</div>
<p>To override the base route class blueprint, override the <code class="docutils literal notranslate"><span class="pre">base_route</span></code> property,
so on our previous example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.api</span> <span class="k">import</span> <span class="n">BaseApi</span><span class="p">,</span> <span class="n">expose</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">appbuilder</span>


<span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>

    <span class="n">base_route</span> <span class="o">=</span> <span class="s1">&#39;/newapi/v2/nice&#39;</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/greeting&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>


<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_api</span><span class="p">(</span><span class="n">ExampleApi</span><span class="p">)</span>
</pre></div>
</div>
<p>Now our endpoint will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl http://localhost:8080/newapi/v2/nice/greeting
</pre></div>
</div>
<p>We can also just override the version and/or resource name,
using <code class="docutils literal notranslate"><span class="pre">version</span></code> and <code class="docutils literal notranslate"><span class="pre">resource_name</span></code> properties:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.api</span> <span class="k">import</span> <span class="n">BaseApi</span><span class="p">,</span> <span class="n">expose</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">appbuilder</span>


<span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>

    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;example&#39;</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/greeting&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>


<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_api</span><span class="p">(</span><span class="n">ExampleApi</span><span class="p">)</span>
</pre></div>
</div>
<p>Now our endpoint will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl http://localhost:8080/api/v1/example/greeting
</pre></div>
</div>
<p>The other HTTP methods (PUT, POST, DELETE, …) can be defined just like
a Flask route signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.api</span> <span class="k">import</span> <span class="n">BaseApi</span><span class="p">,</span> <span class="n">expose</span>

<span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>

    <span class="o">....</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/greeting2&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">greeting2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello (GET)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello (POST)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The previous example will expose a new <cite>greeting2</cite> endpoint on HTTP GET and POST
so we can request it by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl http://localhost:8080/api/v1/example/greeting2
{
    &quot;message&quot;: &quot;Hello (GET)&quot;
}
$ curl -XPOST http://localhost:8080/api/v1/example/greeting2
{
    &quot;message&quot;: &quot;Hello (POST)&quot;
}
</pre></div>
</div>
<p>Let’s make our method a bit more interesting, and send our name on the HTTP
GET method. You can optionally use a <code class="docutils literal notranslate"><span class="pre">&#64;rison</span></code> decorator that will parse
the HTTP URI arguments from a <em>Rison</em> structure to a python data structure.
On this example it may seem a bit overboard but with <em>Rison</em> we can handle
complex HTTP GET arguments in a human readable and predictable way.
<em>Rison</em> is a slight variation of JSON that looks vastly superior after URI encoding.
Rison still expresses exactly the same set of data structures as JSON,
so data can be translated back and forth without loss or guesswork:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.api</span> <span class="k">import</span> <span class="n">BaseApi</span><span class="p">,</span> <span class="n">expose</span><span class="p">,</span> <span class="n">rison</span>

<span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>

    <span class="o">...</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/greeting3&#39;</span><span class="p">)</span>
    <span class="nd">@rison</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">greeting3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;name&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;rison&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span>
                <span class="mi">200</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;rison&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_400</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;Please send your name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And to test our method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl &#39;http://localhost:8080/api/v1/example/greeting3?q=(name:daniel)&#39;
{
    &quot;message&quot;: &quot;Hello daniel&quot;
}
</pre></div>
</div>
<p>To test this concept let’s create a new method where we send a somewhat complex
data structure that will use numbers, booleans and lists, and send it back JSON formatted.
First our data structure, let’s first think JSON:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bool&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span>
    <span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="mi">777</span><span class="p">,</span>
    <span class="s2">&quot;string&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="s2">&quot;null&quot;</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>
</pre></div>
</div>
<p>On <em>Rison</em> format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(bool:!t,list:!(a,b,c),null:!n,number:777,string:&#39;string&#39;)
</pre></div>
</div>
<p>Behind the scenes FAB is using <em>prison</em> a very nicely done fork developed by &#64;betodealmeida
We can use this package, to help us dump or load python structures to Rison:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">prison</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;bool&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span>
    <span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="mi">777</span><span class="p">,</span>
    <span class="s2">&quot;string&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="s2">&quot;null&quot;</span><span class="p">:</span> <span class="kc">None</span>
<span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="n">prison</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</pre></div>
</div>
<p>So to test our concept:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>

<span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/risonjson&#39;</span><span class="p">)</span>
<span class="nd">@rison</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">rison_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;rison&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Then call it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl &#39;http://localhost:8080/api/v1/example/risonjson?q=(bool:!t,list:!(a,b,c),null:!n,number:777,string:&#39;string&#39;)&#39;
{
  &quot;result&quot;: {
    &quot;bool&quot;: true,
    &quot;list&quot;: [
      &quot;a&quot;,
      &quot;b&quot;,
      &quot;c&quot;
    ],
    &quot;null&quot;: null,
    &quot;number&quot;: 777,
    &quot;string&quot;: &quot;string&quot;
  }
}
</pre></div>
</div>
<p>Notice how the data types are preserved. Remember that we are building a Flask app
so you can always use <em>normal</em> URI arguments using Flask’s <code class="docutils literal notranslate"><span class="pre">request.args</span></code></p>
<p>If we send an invalid <em>Rison</em> argument we get an error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -v &#39;http://localhost:8080/api/v1/example/risonjson?q=(bool:!t&#39;
...
&lt; HTTP/1.0 400 BAD REQUEST
&lt; Content-Type: application/json; charset=utf-8
...
{
  &quot;message&quot;: &quot;Not a valid rison argument&quot;
}
</pre></div>
</div>
<p>You can additionally pass a JSON schema to
validate your Rison arguments, this way you can implement a very strict API easily:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="o">...</span>

<span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/greeting4&#39;</span><span class="p">)</span>
<span class="nd">@rison</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">greeting4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span>
        <span class="mi">200</span><span class="p">,</span>
        <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;rison&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Finally to properly handle all possible exceptions use the <code class="docutils literal notranslate"><span class="pre">safe</span></code> decorator,
that will catch all uncaught exceptions for you and return a proper error response.
You can enable or disable stack trace response using the
<code class="docutils literal notranslate"><span class="pre">FAB_API_SHOW_STACKTRACE</span></code> configuration key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.api</span> <span class="k">import</span> <span class="n">BaseApi</span><span class="p">,</span> <span class="n">expose</span><span class="p">,</span> <span class="n">rison</span><span class="p">,</span> <span class="n">safe</span>

<span class="o">...</span>

<span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/error&#39;</span><span class="p">)</span>
<span class="nd">@safe</span>
<span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">Exception</span>
</pre></div>
</div>
<div class="section" id="openapi-spec">
<h4>OpenAPI spec<a class="headerlink" href="#openapi-spec" title="Permalink to this headline">¶</a></h4>
<p>We can define an OpenAPI specification by using YAML on the docs section of our
methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/greeting&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Send a greeting</span>
<span class="sd">    ---</span>
<span class="sd">    get:</span>
<span class="sd">      responses:</span>
<span class="sd">        200:</span>
<span class="sd">          description: Greet the user</span>
<span class="sd">          content:</span>
<span class="sd">            application/json:</span>
<span class="sd">              schema:</span>
<span class="sd">                type: object</span>
<span class="sd">                properties:</span>
<span class="sd">                  message:</span>
<span class="sd">                    type: string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We are defining that, our endpoint will respond to HTTP GET with a JSON object that contains
a key <code class="docutils literal notranslate"><span class="pre">message</span></code> with values of type <strong>string</strong>. To access all our OpenAPI specifications
request it on <code class="docutils literal notranslate"><span class="pre">/api/v1/_openapi</span></code>, this is a dynamic endpoint that will serve all specs
from different API versions. So if we register an API for version <strong>v2</strong> we access it’s
spec on <code class="docutils literal notranslate"><span class="pre">/api/v2/_openapi</span></code>. Please note that OpenAPI specs are subject to authentication.</p>
<p>So our spec for a method that accepts two HTTP verbs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/greeting2&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">greeting2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Send a greeting</span>
<span class="sd">    ---</span>
<span class="sd">    get:</span>
<span class="sd">      responses:</span>
<span class="sd">        200:</span>
<span class="sd">          description: Greet the user</span>
<span class="sd">          content:</span>
<span class="sd">            application/json:</span>
<span class="sd">              schema:</span>
<span class="sd">                type: object</span>
<span class="sd">                properties:</span>
<span class="sd">                  message:</span>
<span class="sd">                    type: string</span>
<span class="sd">    post:</span>
<span class="sd">      responses:</span>
<span class="sd">        201:</span>
<span class="sd">          description: Greet the user</span>
<span class="sd">          content:</span>
<span class="sd">            application/json:</span>
<span class="sd">              schema:</span>
<span class="sd">                type: object</span>
<span class="sd">                properties:</span>
<span class="sd">                  message:</span>
<span class="sd">                    type: string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello (GET)&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello (POST)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To access Swagger UI you must enable <code class="docutils literal notranslate"><span class="pre">FAB_API_SWAGGER_UI</span> <span class="pre">=</span> <span class="pre">True</span></code> on your config file
then goto <code class="docutils literal notranslate"><span class="pre">http://localhost:8080/swaggerview/v1</span></code> for OpenAPI <strong>v1</strong> definitions
On Swagger UI our example API looks like:</p>
<a class="reference internal image-reference" href="_images/swagger001.png"><img alt="_images/swagger001.png" src="_images/swagger001.png" style="width: 70%;" /></a>
<p>Notice the <code class="docutils literal notranslate"><span class="pre">get</span></code> and <code class="docutils literal notranslate"><span class="pre">put</span></code> structures, we should always detail all our
possible responses. The <code class="docutils literal notranslate"><span class="pre">BaseApi</span></code> class comes with some pre packaged HTTP
responses we can use for the sake of brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/error&#39;</span><span class="p">)</span>
<span class="nd">@protect</span><span class="p">()</span>
<span class="nd">@safe</span>
<span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Error 500</span>
<span class="sd">    ---</span>
<span class="sd">    get:</span>
<span class="sd">      responses:</span>
<span class="sd">        500:</span>
<span class="sd">          $ref: &#39;#/components/responses/500&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">Exception</span>
</pre></div>
</div>
<p>A complete list of packaged responses you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>responses:
  400:
    $ref: &#39;#/components/responses/400&#39;
  401:
    $ref: &#39;#/components/responses/401&#39;
  404:
    $ref: &#39;#/components/responses/404&#39;
  422:
    $ref: &#39;#/components/responses/422&#39;
  500:
    $ref: &#39;#/components/responses/500&#39;
</pre></div>
</div>
<p>The automatic OpenAPI spec generation also supports <strong>Rison</strong> arguments and their
json schema spec. Since both are compatible we can reuse our Json schema spec on OpenAPI.
First we need to register our spec, using <code class="docutils literal notranslate"><span class="pre">apispec_parameter_schemas</span></code> dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>

    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;example&#39;</span>
    <span class="n">apispec_parameter_schemas</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;greeting_schema&quot;</span><span class="p">:</span> <span class="n">greeting_schema</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>FAB will register your schema on <code class="docutils literal notranslate"><span class="pre">/components/parameters</span></code>, so you can now
easily reference them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/greeting4&#39;</span><span class="p">)</span>
<span class="nd">@rison</span><span class="p">(</span><span class="n">greeting_schema</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">greeting4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get item from Model</span>
<span class="sd">    ---</span>
<span class="sd">    get:</span>
<span class="sd">      parameters:</span>
<span class="sd">      - $ref: &#39;#/components/parameters/greeting_schema&#39;</span>
<span class="sd">      responses:</span>
<span class="sd">        200:</span>
<span class="sd">          description: Greet the user</span>
<span class="sd">          content:</span>
<span class="sd">            application/json:</span>
<span class="sd">              schema:</span>
<span class="sd">                type: object</span>
<span class="sd">                properties:</span>
<span class="sd">                  message:</span>
<span class="sd">                    type: string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span>
        <span class="mi">200</span><span class="p">,</span>
        <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;rison&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="security">
<h4>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h4>
<p>FAB offers user management, several authentication backends and granular role base access
so we can use these features on the API also. Default API authentication method is done
using JSON Web Tokens (JWT).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">tip:</th><td class="field-body">FAB’s JWT authentication is done with flask-jwt-extended.
Checkout it’s documentation for custom configuration:
<a class="reference external" href="https://flask-jwt-extended.readthedocs.io/en/latest/options.html">https://flask-jwt-extended.readthedocs.io/en/latest/options.html</a></td>
</tr>
</tbody>
</table>
<p>Next, let’s see how to create a private method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.api</span> <span class="k">import</span> <span class="n">BaseApi</span><span class="p">,</span> <span class="n">expose</span><span class="p">,</span> <span class="n">rison</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.security.decorators</span> <span class="k">import</span> <span class="n">protect</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">appbuilder</span>


<span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>

    <span class="o">...</span>
    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/private&#39;</span><span class="p">)</span>
    <span class="nd">@protect</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">rison_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Say it&#39;s risonjson</span>
<span class="sd">        ---</span>
<span class="sd">        get:</span>
<span class="sd">          responses:</span>
<span class="sd">            200:</span>
<span class="sd">              description: Say it&#39;s private</span>
<span class="sd">              content:</span>
<span class="sd">                application/json:</span>
<span class="sd">                  schema:</span>
<span class="sd">                    type: object</span>
<span class="sd">            401:</span>
<span class="sd">              $ref: &#39;#/components/responses/401&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;This is private&quot;</span><span class="p">)</span>


<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_api</span><span class="p">(</span><span class="n">ExampleApi</span><span class="p">)</span>
</pre></div>
</div>
<p>Accessing this method as expected will
return an HTTP 401 not authorized code and message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -v &#39;http://localhost:8080/api/v1/example/private&#39;
...
&lt; HTTP/1.0 401 UNAUTHORIZED
&lt; Content-Type: application/json
...
{
  &quot;msg&quot;: &quot;Missing Authorization Header&quot;
}
</pre></div>
</div>
<p>So we need to first obtain our JSON Web token, for this, FAB registers a login endpoint.
For this we POST request with a JSON payload using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;USERNAME&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;PASSWORD&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;provider&quot;</span><span class="p">:</span> <span class="s2">&quot;db|ldap&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notice the <em>provider</em> argument, FAB currently supports DB and LDAP
authentication backends for the Api. The login endpoint returns a fresh <strong>access token</strong> and optionally
a <strong>refresh token</strong>. You can renew the <strong>access token</strong> using the <strong>refresh token</strong> but this time
the returned token will not be fresh. To obtain a new non fresh access token
use <code class="docutils literal notranslate"><span class="pre">refresh</span></code> endpoint with the <strong>refresh token</strong>. To obtain a <strong>refresh token</strong> on the login endpoint
send the optional parameter <strong>“refresh”: true</strong> on the JSON PUT payload.</p>
<p>Let’s request our Token then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># If not already, create an admin user
$ export FLASK_APP=app
$ flask fab create-admin
Username [admin]:
User first name [admin]:
User last name [user]:
Email [admin@fab.org]:
Password:
Repeat for confirmation:
...
Admin User admin created.

# Login to obtain a token
$ curl -XPOST http://localhost:8080/api/v1/security/login -d \
  &#39;{&quot;username&quot;: &quot;admin&quot;, &quot;password&quot;: &quot;password&quot;, &quot;provider&quot;: &quot;db&quot;}&#39; \
  -H &quot;Content-Type: application/json&quot;
{
  &quot;access_token&quot;: &quot;&lt;SOME TOKEN&gt;&quot;
}
# It&#39;s nice to use the Token as an env var
$ export TOKEN=&quot;&lt;SOME TOKEN&gt;&quot;
</pre></div>
</div>
<p>Next we can use our token on protected endpoints:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl &#39;http://localhost:8080/api/v1/example/private&#39; -H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;message&quot;: &quot;This is private&quot;
}
</pre></div>
</div>
<p>As always FAB created a new <strong>can_private</strong> permission
on the DB named “can private on ExampleApi”
Note that you can protect all your methods and make
them public or not by adding them to the <em>Public</em> Role.</p>
<p>Also to restrict the default permissions we can use <code class="docutils literal notranslate"><span class="pre">base_permissions</span></code>
list property. This can be specially useful on <code class="docutils literal notranslate"><span class="pre">ModelRestApi</span></code> (up next)
where we can restrict our Api resources to be read only, or only allow POST
methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>
    <span class="n">base_permissions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;can_private&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can create an alternate JWT user loader, this can be useful if you want
to use an external Authentication provider and map the JWT identity to your
user Model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@appbuilder</span><span class="o">.</span><span class="n">sm</span><span class="o">.</span><span class="n">jwt_manager</span><span class="o">.</span><span class="n">user_loader_callback_loader</span>
<span class="k">def</span> <span class="nf">alternate_user_loader</span><span class="p">(</span><span class="n">identity</span><span class="p">):</span>
    <span class="c1"># find the user by it&#39;s identity</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="n">user</span>
</pre></div>
</div>
<p>Optionally you can enable signed cookie sessions (from flask-login) on the
API. You can do it class or method wide:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>
    <span class="n">allow_browser_login</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>The previous example will enable cookie sessions on the all class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/private&#39;</span><span class="p">)</span>
    <span class="nd">@protect</span><span class="p">(</span><span class="n">allow_browser_login</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">private</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="o">....</span>
</pre></div>
</div>
<p>On the previous example, we are enabling signed cookies on the <code class="docutils literal notranslate"><span class="pre">private</span></code> method. Not that event then
valid a valid JWT is also accepted.</p>
</div>
<div class="section" id="model-rest-api">
<h4>Model REST API<a class="headerlink" href="#model-rest-api" title="Permalink to this headline">¶</a></h4>
<p>To automatically create a RESTfull CRUD Api from a database <em>Model</em>, use <code class="docutils literal notranslate"><span class="pre">ModelRestApi</span></code> class and
define it almost like an MVC <code class="docutils literal notranslate"><span class="pre">ModelView</span></code>. This class will expose the following REST endpoints</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">note:</th><td class="field-body">Follow this example on Flask-AppBuilder project ./examples/crud_rest_api/</td>
</tr>
</tbody>
</table>
<table border="1" class="table-bordered table-hover docutils">
<colgroup>
<col width="27%" />
<col width="50%" />
<col width="16%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Description</th>
<th class="head">Permission Name</th>
<th class="head">HTTP</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/_info</td>
<td>Returns info about the CRUD model and security</td>
<td>can_info</td>
<td>GET</td>
</tr>
<tr class="row-odd"><td>/</td>
<td>Queries models data, receives args as Rison</td>
<td>can_get</td>
<td>GET</td>
</tr>
<tr class="row-even"><td>/&lt;PK&gt;</td>
<td>Returns a single model from it’s primary key (id)</td>
<td>can_get</td>
<td>GET</td>
</tr>
<tr class="row-odd"><td>/</td>
<td>Receives a JSON payload as POST and creates record</td>
<td>can_post</td>
<td>POST</td>
</tr>
<tr class="row-even"><td>/</td>
<td>Receives a JSON payload as PUT and updates record</td>
<td>can_put</td>
<td>PUT</td>
</tr>
<tr class="row-odd"><td>/&lt;PK&gt;</td>
<td>Deletes a single model from it’s primary key (id)</td>
<td>can_delete</td>
<td>DELETE</td>
</tr>
</tbody>
</table>
<p>For each <code class="docutils literal notranslate"><span class="pre">ModelRestApi</span></code> you will get 5 CRUD endpoints and an extra information method.
All created CRUD endpoints have their OpenAPI spec accessible on <code class="docutils literal notranslate"><span class="pre">/api/&lt;version&gt;/_openapi</span></code>,
each class is tagged so the CRUD endpoints get nicely grouped when using Swagger UI.
Notice that <code class="docutils literal notranslate"><span class="pre">ModelRestApi</span></code> will generate a complete OpenAPI schema models for you data,
so you can get free documentation for you API’s.</p>
<p>FAB will create all possible permissions and add them to the <code class="docutils literal notranslate"><span class="pre">AUTH_ROLE_ADMIN</span></code> config key
that defaults to <strong>Admin</strong>. you can completely override the default inferred permissions
and reduce the level of granularity, for mode detail about this read the <a class="reference internal" href="index.html#document-security"><span class="doc">Security</span></a> chapter.</p>
<p>Let’s dive into a simple example using the quickhowto.
The quickhowto example as a Contact’s Model and a Group Model,
so each Contact belongs to a Group.</p>
<p>First let’s define a CRUD REST Api for our Group model resource:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.api</span> <span class="k">import</span> <span class="n">ModelRestApi</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">appbuilder</span>


<span class="k">class</span> <span class="nc">GroupModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;group&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">ContactGroup</span><span class="p">)</span>

<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_api</span><span class="p">(</span><span class="n">GroupModelApi</span><span class="p">)</span>
</pre></div>
</div>
<p>Behind the scenes FAB uses marshmallow-sqlalchemy to infer the Model to a Marshmallow Schema,
that can be safely serialized and deserialized. Let’s recall our Model definition for <code class="docutils literal notranslate"><span class="pre">ContactGroup</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactGroup</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p>Swagger UI API representation for groups (<a class="reference external" href="http://localhost:8080/swaggerview/v1">http://localhost:8080/swaggerview/v1</a>):</p>
<a class="reference internal image-reference" href="_images/swagger002.png"><img alt="_images/swagger002.png" src="_images/swagger002.png" style="width: 70%;" /></a>
<p>All endpoints are protected so we need to request a JWT and use it on our REST resource,
like shown before we need to make a PUT request to the login API endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Login to obtain a token
$ curl -XPOST http://localhost:8080/api/v1/security/login -d \
  &#39;{&quot;username&quot;: &quot;admin&quot;, &quot;password&quot;: &quot;password&quot;, &quot;provider&quot;: &quot;db&quot;}&#39; \
  -H &quot;Content-Type: application/json&quot;
{
  &quot;access_token&quot;: &quot;&lt;SOME TOKEN&gt;&quot;
}
# It&#39;s nice to use the Token as an env var
$ export TOKEN=&quot;&lt;SOME TOKEN&gt;&quot;
</pre></div>
</div>
<p>First let’s create a Group:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -XPOST http://localhost:8080/api/v1/group/ -d \
 &#39;{&quot;name&quot;: &quot;Friends&quot;}&#39; \
 -H &quot;Content-Type: application/json&quot; \
 -H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;id&quot;: 1,
  &quot;result&quot;: {
    &quot;name&quot;: &quot;Friends&quot;
  }
}
</pre></div>
</div>
<p>We got back a response with the model id and result with the inserted data.
Now let’s query our newly created Group:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl http://localhost:8080/api/v1/group/1 \
 -H &quot;Content-Type: application/json&quot; \
 -H &quot;Authorization: Bearer $TOKEN&quot;

{
  &quot;description_columns&quot;: {},
  &quot;show_title&quot;: &quot;Show Contact Group&quot;,
  &quot;show_columns&quot;: [
    &quot;name&quot;
  ],
  &quot;label_columns&quot;: {
    &quot;name&quot;: &quot;Name&quot;
  },
  &quot;id&quot;: &quot;1&quot;,
  &quot;result&quot;: {
    &quot;name&quot;: &quot;Friends&quot;
  }
}
</pre></div>
</div>
<p>As you can see, the API returns the model data, and extra meta data so you can properly render
a page with labels, descriptions and defined column order. This way it should be possible
to develop a React component (for example) that renders any model just by switching between HTTP endpoints.
It’s also possible to just ask for certain meta data keys, we will talk about this later.</p>
<p>Next let’s change our newly created model (HTTP PUT):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -XPUT http://localhost:8080/api/v1/group/1 -d \
 &#39;{&quot;name&quot;: &quot;Friends Changed&quot;}&#39; \
 -H &quot;Content-Type: application/json&quot; \
 -H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;result&quot;: {
    &quot;name&quot;: &quot;Friends Changed&quot;
  }
}
</pre></div>
</div>
<p>And finally test the delete method (HTTP DELETE):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -XDELETE http://localhost:8080/api/v1/group/1 \
 -H &quot;Content-Type: application/json&quot; \
 -H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;message&quot;: &quot;OK&quot;
}
</pre></div>
</div>
<p>Let’s check if it exists (HTTP GET):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl http://localhost:8080/api/v1/group/1 \
 -H &quot;Content-Type: application/json&quot; \
 -H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;message&quot;: &quot;Not found&quot;
}
</pre></div>
</div>
<p>We get an HTTP 404 (Not found).</p>
</div>
<div class="section" id="information-endpoint">
<h4>Information endpoint<a class="headerlink" href="#information-endpoint" title="Permalink to this headline">¶</a></h4>
<p>This endpoint serves as a method to fetch meta information about our CRUD
methods. Again the main purpose to serve meta data is to make possible for a frontend
layer to be able to render dynamically:</p>
<ul class="simple">
<li>Search options</li>
<li>Forms</li>
<li>Enable/disable features based on permissions.</li>
</ul>
<p>First a birds eye view from the output of the <strong>_info</strong> endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;add_columns&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
    <span class="s2">&quot;edit_columns&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
    <span class="s2">&quot;add_title&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
    <span class="s2">&quot;edit_title&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
    <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span>
    <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Let’s drill down this data structure, <code class="docutils literal notranslate"><span class="pre">add_columns</span></code> and <code class="docutils literal notranslate"><span class="pre">edit_columns</span></code> are similar
and serve to aid on rendering forms for add and edit so their response contains the
following data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;add_columns&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;COL_DESCRIPTION&gt;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;COL_LABEL&gt;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;COL_NAME&gt;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="n">true</span><span class="o">|</span><span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="n">true</span><span class="o">|</span><span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;String|Integer|Related|RelatedList|...&quot;</span><span class="p">,</span>
            <span class="s2">&quot;validate&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">validation</span> <span class="n">methods</span> <span class="o">...</span> <span class="p">]</span>
            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">optional</span> <span class="n">number</span><span class="o">&gt;</span>
            <span class="s2">&quot;values&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="n">optional</span> <span class="k">with</span> <span class="nb">all</span> <span class="n">possible</span> <span class="n">values</span> <span class="k">for</span> <span class="n">a</span> <span class="n">related</span> <span class="n">field</span> <span class="o">...</span> <span class="p">]</span>
        <span class="p">},</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Edit fields <code class="docutils literal notranslate"><span class="pre">edit_columns</span></code> is similar, but it’s content may be different, since
we can configure it in a distinct way</p>
<p>Next, filters, this returns all the necessary info to render all possible filters allowed
by the backend database for each field on the model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;&lt;COL_NAME&gt;&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;HUMAN READABLE AND I18N&gt;&quot;</span><span class="p">,</span>
                <span class="s2">&quot;operator&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;OPERATION_NAME&gt;&quot;</span>
            <span class="p">},</span>
            <span class="o">...</span>
        <span class="p">],</span>
        <span class="o">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that the <strong>operator</strong> value can be used to filter our list queries,
more about this later.</p>
<p>Finally the permissions, this declares all allowed permissions for the current user.
Remember that these can extend the automatic HTTP methods generated by <code class="docutils literal notranslate"><span class="pre">ModelRestApi</span></code>
by just defining new methods and protecting them with the <code class="docutils literal notranslate"><span class="pre">protect</span></code> decorator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;can_get&quot;</span><span class="p">,</span> <span class="s2">&quot;can_put&quot;</span><span class="p">,</span> <span class="o">...</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>On all GET HTTP methods we can select which meta data keys we want, this can
be done using <em>Rison</em> URI arguments. So the <strong>_info</strong> endpoint is no exception.
The across the board way to filter meta data is to send a GET request
using the following structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="n">LIST</span> <span class="n">OF</span> <span class="n">META</span> <span class="n">DATA</span> <span class="n">KEYS</span> <span class="o">...</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>That translates to the following in <em>Rison</em> for fetching just the permissions meta data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(keys:!(permissions))
</pre></div>
</div>
<p>So, back to our example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl &#39;http://localhost:8080/api/v1/group/_info?q=(keys:!(permissions))&#39; \
-H &quot;Content-Type: application/json&quot; \
-H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;permissions&quot;: [
    &quot;can_get&quot;,
    &quot;can_post&quot;,
    &quot;can_put&quot;,
    &quot;can_delete&quot;
  ]
}
</pre></div>
</div>
<p>And to fetch the permissions and Add form fields info:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl &#39;http://localhost:8080/api/v1/group/_info?q=(keys:!(permissions,add_columns))&#39; \
-H &quot;Content-Type: application/json&quot; \
-H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;add_columns&quot;: [ ... ],
  &quot;permissions&quot;: [
    &quot;can_get&quot;,
    &quot;can_post&quot;,
    &quot;can_put&quot;,
    &quot;can_delete&quot;
  ]
}
</pre></div>
</div>
<p>To fetch meta data with internationalization use <strong>_l_</strong> URI key argument with i18n
country code as the value. This will work on any HTTP GET endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl &#39;http://localhost:8080/api/v1/group/_info?q=(keys:!(permissions,add_columns))&amp;_l_=pt&#39; \
-H &quot;Content-Type: application/json&quot; \
-H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;add_columns&quot;: [ ... ],
  &quot;permissions&quot;: [
    &quot;can_get&quot;,
    &quot;can_post&quot;,
    &quot;can_put&quot;,
    &quot;can_delete&quot;
  ]
}
</pre></div>
</div>
<p>Render meta data with <em>Portuguese</em>, labels, description, filters</p>
<p>The <code class="docutils literal notranslate"><span class="pre">add_columns</span></code> and <code class="docutils literal notranslate"><span class="pre">edit_columns</span></code> keys also render all possible
values from related fields, using our <em>quickhowto</em> example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;add_columns&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;Gender&quot;</span><span class="p">,</span>
          <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;gender&quot;</span><span class="p">,</span>
          <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Related&quot;</span><span class="p">,</span>
          <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Male&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
              <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Female&quot;</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">},</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>These related field values can be filtered server side using the <code class="docutils literal notranslate"><span class="pre">add_query_rel_fields</span></code>
or <code class="docutils literal notranslate"><span class="pre">edit_query_rel_fields</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">add_query_rel_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">FilterStartsWith</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">]]</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>You can also impose an order for these values server side using <code class="docutils literal notranslate"><span class="pre">order_rel_fields</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">order_rel_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;contact_group&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;asc&#39;</span><span class="p">),</span>
        <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;asc&#39;</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The previous example will filter out only the <strong>Female</strong> gender from our list
of possible values</p>
<p>Note that these related fields may render a long list of values, so pagination
is available and subject to a max page size. You can paginate these values using
the following Rison argument structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;add_columns&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="o">&lt;</span><span class="n">COL_NAME</span><span class="o">&gt;</span> <span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="nb">int</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Using Rison example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">add_columns</span><span class="p">:(</span><span class="n">contact_group</span><span class="p">:(</span><span class="n">page</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="n">page_size</span><span class="p">:</span><span class="mi">10</span><span class="p">)))</span>
</pre></div>
</div>
<p>We can also restrict server side the available fields for add and edit using <code class="docutils literal notranslate"><span class="pre">add_columns</span></code>
and <code class="docutils literal notranslate"><span class="pre">edit_columns</span></code>. Additionally you can use <code class="docutils literal notranslate"><span class="pre">add_exclude_columns</span></code> and <code class="docutils literal notranslate"><span class="pre">edit_exclude_columns</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">add_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Will only return the field <em>name</em> from our <em>Contact</em> model information endpoint for <code class="docutils literal notranslate"><span class="pre">add_fields</span></code></p>
</div>
<div class="section" id="get-item">
<h4>Get Item<a class="headerlink" href="#get-item" title="Permalink to this headline">¶</a></h4>
<p>The get item endpoint is very simple, and was already covered to some extent.
The response data structure is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;Primary Key&gt;&quot;</span>
    <span class="s2">&quot;description_columnns&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;label_columns&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;show_columns&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;show_title&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now we are going to cover the <em>Rison</em> arguments for custom fetching
meta data keys or columns. This time the accepted arguments are slightly extended:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="n">List</span> <span class="n">of</span> <span class="n">meta</span> <span class="n">data</span> <span class="n">keys</span> <span class="n">to</span> <span class="k">return</span> <span class="o">...</span> <span class="p">],</span>
    <span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="n">List</span> <span class="n">of</span> <span class="n">columns</span> <span class="n">to</span> <span class="k">return</span> <span class="o">...</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>So for fetching only the <em>name</em> and <em>address</em> for a certain <em>Contact</em>, using <em>Rison</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(columns:!(name,address))
</pre></div>
</div>
<p>Our <em>curl</em> command will look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="s1">&#39;http://localhost:8080/api/v1/contact/1?q=(columns:!(name,address))&#39;</span> \
<span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> \
<span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Authorization: Bearer $TOKEN&quot;</span>
<span class="p">{</span>
  <span class="s2">&quot;description_columns&quot;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;show_columns&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;address&quot;</span>
  <span class="p">],</span>
  <span class="s2">&quot;show_title&quot;</span><span class="p">:</span> <span class="s2">&quot;Show Contact&quot;</span><span class="p">,</span>
  <span class="s2">&quot;label_columns&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="s2">&quot;Address&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="s2">&quot;Street phoung&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Wilko Kamboh&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And to only include the <em>label_columns</em> meta data, <em>Rison</em> data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(columns:!(name,address),keys:!(label_columns))
</pre></div>
</div>
<p>Our <em>curl</em> command will look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="s1">&#39;http://localhost:8080/api/v1/contact/1?q=(columns:!(name,address),keys:!(label_columns))&#39;</span> \
<span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> \
<span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Authorization: Bearer $TOKEN&quot;</span>
<span class="p">{</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;label_columns&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="s2">&quot;Address&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="s2">&quot;Street phoung&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Wilko Kamboh&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To discard completely all meta data use the special key <code class="docutils literal notranslate"><span class="pre">none</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(columns:!(name,address),keys:!(none))
</pre></div>
</div>
<p>Our <em>curl</em> command will look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="s1">&#39;http://localhost:8080/api/v1/contact/1?q=(columns:!(name,address),keys:!(none))&#39;</span> \
<span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> \
<span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Authorization: Bearer $TOKEN&quot;</span>
<span class="p">{</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="s2">&quot;Street phoung&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Wilko Kamboh&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We can restrict or add fields for the get item endpoint using
the <code class="docutils literal notranslate"><span class="pre">show_columns</span></code> property. This takes precedence from the <em>Rison</em> arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">show_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>We can add fields that are python functions also, for this on the SQLAlchemy definition,
let’s add a new function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Contact</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">564</span><span class="p">))</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">personal_phone</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
    <span class="n">personal_celphone</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
    <span class="n">contact_group_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;contact_group.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">contact_group</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;ContactGroup&quot;</span><span class="p">)</span>
    <span class="n">gender_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;gender.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Gender&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>And then on the REST API:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">show_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;some_function&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">show_columns</span></code> is also useful to impose an order on the columns.
Again this is useful to develop a dynamic frontend show item page/component
by using the <em>include_columns</em> meta data key.</p>
<p>Note that this can be done on the query list endpoint also using <code class="docutils literal notranslate"><span class="pre">list_columns</span></code></p>
</div>
<div class="section" id="lists-and-queries">
<h4>Lists and Queries<a class="headerlink" href="#lists-and-queries" title="Permalink to this headline">¶</a></h4>
<p>Finally for our last HTTP endpoint, and the most feature rich.
The response data structure is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">RESULT_COUNT</span><span class="s2">&quot;&gt;</span>
    <span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="n">List</span> <span class="n">of</span> <span class="n">PK</span><span class="s1">&#39;s ordered by result ... ],</span>
    <span class="s2">&quot;description_columns&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;label_columns&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;list_columns&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="n">An</span> <span class="n">ordered</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">columns</span> <span class="o">...</span><span class="p">],</span>
    <span class="s2">&quot;order_columns&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="n">List</span> <span class="n">of</span> <span class="n">columns</span> <span class="n">that</span> <span class="n">can</span> <span class="n">be</span> <span class="n">ordered</span> <span class="o">...</span> <span class="p">],</span>
    <span class="s2">&quot;list_title&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As before meta data can be chosen using <em>Rison</em> arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(keys:!(label_columns))
</pre></div>
</div>
<p>Will only fetch the <em>label_columns</em> meta data key</p>
<p>And we can choose which columns to fetch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(columns:!(name,address))
</pre></div>
</div>
<p>To reduce or extend the default inferred columns from our <em>Model</em>.
On server side we can use the <code class="docutils literal notranslate"><span class="pre">list_columns</span></code> property,
this takes precedence over <em>Rison</em> arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>FAB supports dotted notation (one level on GET methods only) so you can control what columns get
rendered on related nested columns this applies with order by fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="s1">&#39;contact_group.name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>By default related columns on this case <code class="docutils literal notranslate"><span class="pre">contact_group</span></code> will create a nested
complete sub schema (on our example will return {“contact_group”: {“name”, “id”}}.</p>
<p>For ordering the results, the following will order contacts by name descending Z..A:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">order_column</span><span class="p">:</span><span class="n">name</span><span class="p">,</span><span class="n">order_direction</span><span class="p">:</span><span class="n">desc</span><span class="p">)</span>
</pre></div>
</div>
<p>To set a default order server side use <code class="docutils literal notranslate"><span class="pre">base_order</span></code> tuple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">base_order</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Pagination, get the second page using page size of two (just an example):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">page</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="n">page_size</span><span class="p">:</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>To set the default page size server side:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">page_size</span> <span class="o">=</span> <span class="mi">20</span>
</pre></div>
</div>
<p>And last, but not least, <em>filters</em>. The query <em>filters</em> data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;col&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">COL_NAME</span><span class="o">&gt;</span><span class="p">,</span>
            <span class="s2">&quot;opr&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Operation</span> <span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">VALUE</span><span class="o">&gt;</span>
        <span class="p">},</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>All filters are <strong>AND</strong> operations. We can filter by several column names
using different operations, so using <em>Rison</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(filters:!((col:name,opr:sw,value:a),(col:name,opr:ew,value:z)))
</pre></div>
</div>
<p>The previous filter will query all contacts whose <strong>name</strong> starts with “a” and ends with “z”.
The possible operations for each field can be obtained from the information endpoint.
FAB can filter your models by any field type and all possible operations</p>
<p>Note that all <em>Rison</em> arguments can be used alone or in combination:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(filters:!((col:name,opr:sw,value:a),(col:name,opr:ew,value:z)),columns:!(name),order_columns:name,order_direction:desc)
</pre></div>
</div>
<p>Will filter all contacts whose <strong>name</strong> starts with “a” and ends with “z”, using descending name order by, and
just fetching the <strong>name</strong> column.</p>
<p>To impose base filters server side:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">base_filters</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">FilterStartsWith</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>The filter will act on all HTTP endpoints, protecting delete, create, update and display
operations</p>
<p>Simple example using doted notation, FAB will infer the necessary join operation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">base_filters</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;contact_group.name&#39;</span><span class="p">,</span> <span class="n">FilterStartsWith</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>Locks all contacts, to groups whose name starts with “F”. Using the provided test data
on the quickhowto example, limits the contacts to family and friends.</p>
</div>
<div class="section" id="updates-and-partial-updates">
<h4>Updates and Partial Updates<a class="headerlink" href="#updates-and-partial-updates" title="Permalink to this headline">¶</a></h4>
<p>PUT methods allow for changing a <strong>Model</strong>. Allowed changes are controlled by
<code class="docutils literal notranslate"><span class="pre">edit_columns</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">edit_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>First let’s create a new contact:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">XPOST</span> <span class="s1">&#39;http://localhost:8080/api/v1/contact/&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Authorization: Bearer $TOKEN&quot;</span> <span class="o">-</span><span class="n">d</span> \
<span class="s1">&#39;{&quot;name&quot;:&quot;New Contact&quot;, &quot;personal_celphone&quot;:&quot;1234&quot;, &quot;contact_group&quot;: 1, &quot;gender&quot;:1}&#39;</span> \
<span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span>
<span class="p">{</span>
 <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
 <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
   <span class="s2">&quot;birthday&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
   <span class="s2">&quot;contact_group&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
   <span class="s2">&quot;gender&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
   <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;New Contact&quot;</span><span class="p">,</span>
   <span class="s2">&quot;personal_celphone&quot;</span><span class="p">:</span> <span class="s2">&quot;1234&quot;</span><span class="p">,</span>
   <span class="s2">&quot;personal_phone&quot;</span><span class="p">:</span> <span class="n">null</span>
 <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>So if you submit a change for <code class="docutils literal notranslate"><span class="pre">personal_celphone</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -v XPUT http://localhost:8080/api/v1/contact/4 -d \
&#39;{&quot;name&quot;: &quot;Change name&quot;, &quot;personal_celphone&quot;: &quot;this should not change&quot;}&#39; \
-H &quot;Content-Type: application/json&quot; \
-H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;result&quot;: {
    &quot;name&quot;: &quot;Change name&quot;
  }
}
</pre></div>
</div>
<p>Let’s confirm:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">XGET</span> <span class="s1">&#39;http://localhost:8080/api/v1/contact/4&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Authorization: Bearer $TOKEN&quot;</span>
<span class="p">{</span>
  <span class="o">....</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
  <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;birthday&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;contact_group&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Friends&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;gender&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Male&quot;</span>
    <span class="p">}</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Change name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;personal_celphone&quot;</span><span class="p">:</span> <span class="s2">&quot;1234&quot;</span><span class="p">,</span>
    <span class="s2">&quot;personal_phone&quot;</span><span class="p">:</span> <span class="n">null</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The PUT method may also work like a PATCH method, remove the <code class="docutils literal notranslate"><span class="pre">edit_columns</span></code> from the API class
and test a partial update:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -v XPUT http://localhost:8080/api/v1/contact/ -d \
&#39;{&quot;personal_celphone&quot;: &quot;4321&quot;}&#39; \
-H &quot;Content-Type: application/json&quot; \
-H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;result&quot;: {
    &quot;address&quot;: null,
    &quot;birthday&quot;: null,
    &quot;contact_group&quot;: 1
    &quot;gender&quot;: 1,
    &quot;name&quot;: &quot;Change name&quot;,
    &quot;personal_celphone&quot;: &quot;4321&quot;,
    &quot;personal_phone&quot;: null
  }
}
</pre></div>
</div>
</div>
<div class="section" id="validation-and-custom-validation">
<h4>Validation and Custom Validation<a class="headerlink" href="#validation-and-custom-validation" title="Permalink to this headline">¶</a></h4>
<p>Notice that by using marshmallow with SQLAlchemy,
we are validating field size, type and required fields out of the box.
This is done by marshmallow-sqlalchemy that automatically creates ModelSchema’s
inferred from our SQLAlchemy Models.
But you can always use your own defined Marshmallow schemas independently
for add, edit, list and show endpoints.</p>
<p>A validation error for PUT and POST methods returns HTTP 422 and the following JSON data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;&lt;COL_NAME&gt;&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;&lt;ERROR_MESSAGE&gt;&quot;</span><span class="p">,</span>
            <span class="o">...</span>
        <span class="p">],</span>
        <span class="o">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Next we will test some basic validation, first the field type
by sending a name that is a number:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl XPOST http://localhost:8080/api/v1/group/ -d \
&#39;{&quot;name&quot;: 1234}&#39; \
-H &quot;Content-Type: application/json&quot; \
-H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;message&quot;: {
    &quot;name&quot;: [
      &quot;Not a valid string.&quot;
    ]
  }
}
</pre></div>
</div>
<p>And we get an HTTP 422 (Unprocessable Entity).</p>
<p>How to add custom validation? On our next example we only allow
group names that start with a capital “A”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">marshmallow</span> <span class="k">import</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">,</span> <span class="n">post_load</span>


<span class="k">def</span> <span class="nf">validate_name</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;A&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;Name must start with an A&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">GroupCustomSchema</span><span class="p">(</span><span class="n">Schema</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Str</span><span class="p">(</span><span class="n">validate</span><span class="o">=</span><span class="n">validate_name</span><span class="p">)</span>

    <span class="nd">@post_load</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ContactGroup</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>Then on our Api class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GroupModelRestApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;group&#39;</span>
    <span class="n">add_model_schema</span> <span class="o">=</span> <span class="n">GroupCustomSchema</span><span class="p">()</span>
    <span class="n">edit_model_schema</span> <span class="o">=</span> <span class="n">GroupCustomSchema</span><span class="p">()</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">ContactGroup</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s try it out:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -v XPOST http://localhost:8080/api/v1/group/ -d \
&#39;{&quot;name&quot;: &quot;BOLA&quot;}&#39; \
-H &quot;Content-Type: application/json&quot; \
-H &quot;Authorization: Bearer $TOKEN&quot;
{
  &quot;message&quot;: {
    &quot;name&quot;: [
      &quot;Name must start with an A&quot;
    ]
  }
}
</pre></div>
</div>
<p>Overriding completely the marshmallow Schema gives you complete control
but can become very cumbersome for <strong>Models</strong> with many attributes, there is
a simpler way of doing this using <code class="docutils literal notranslate"><span class="pre">validators_columns</span></code> property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GroupModelRestApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;group&#39;</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">ContactGroup</span><span class="p">)</span>
    <span class="n">validators_columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">validate_name</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="many-to-many-relations">
<h4>Many to Many relations<a class="headerlink" href="#many-to-many-relations" title="Permalink to this headline">¶</a></h4>
<p>Until now we have only tested one to many relations, let’s see how to handle many to many relationships.
First we need to change our models, on this example we are going to add <strong>tags</strong> to our <strong>Contacts</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>


<span class="n">assoc_contact_tag</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;contact_tags&quot;</span><span class="p">,</span>
    <span class="n">Model</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;contact_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;contact.id&quot;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;tag_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;tag.id&quot;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Then add a new field to the <cite>Contact</cite> Model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Contact</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">...</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span>
        <span class="s2">&quot;Tag&quot;</span><span class="p">,</span>
        <span class="n">secondary</span><span class="o">=</span><span class="n">assoc_contact_tag</span><span class="p">,</span>
        <span class="n">backref</span><span class="o">=</span><span class="s2">&quot;contact&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>By default M-M fields are not required, very simple REST API’s to <cite>Contact</cite> and <cite>Tag</cite> Model would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;contact&#39;</span>

<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_api</span><span class="p">(</span><span class="n">ContactApi</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">TagApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Tag</span><span class="p">)</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;tag&#39;</span>

<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_api</span><span class="p">(</span><span class="n">TagApi</span><span class="p">)</span>
</pre></div>
</div>
<p>First let create some tags (this example assumes that group and gender already contains data):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -XPOST http://localhost:8080/api/v1/tag/ -d \
$ &#39;{&quot;name&quot;: &quot;T1&quot;}&#39; \
$ -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer $TOKEN&quot;
{&quot;id&quot;:1,&quot;result&quot;:{&quot;contact&quot;: [], &quot;name&quot;:&quot;T1&quot;}}
$ curl -XPOST http://localhost:8080/api/v1/tag/ -d \
$ &#39;{&quot;name&quot;: &quot;T2&quot;}&#39; \
$ -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer $TOKEN&quot;
{&quot;id&quot;:2,&quot;result&quot;:{&quot;contact&quot;: [], &quot;name&quot;:&quot;T2&quot;}}
</pre></div>
</div>
<p>Notice the <cite>contact</cite> field on the <cite>Tag</cite> model, this is the <cite>backref</cite> and is not required by default also.
To create a contact with some tags:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -XPOST http://localhost:8080/api/v1/contact/ -d \
$ &#39;{&quot;name&quot;: &quot;C1&quot;, &quot;contact_group&quot;: 1, &quot;gender&quot;: 1, &quot;tags&quot;: [1, 2]}&#39; \
$ -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer $TOKEN&quot;
{&quot;id&quot;:1,&quot;result&quot;:{&quot;address&quot;:null,&quot;birthday&quot;:null,&quot;contact_group&quot;:1,&quot;gender&quot;:1,&quot;name&quot;:&quot;C1&quot;,&quot;personal_celphone&quot;:null,&quot;personal_phone&quot;:null,&quot;tags&quot;:[1,2]}}
</pre></div>
</div>
<p>You can add a contact without any tags, if you want to enforce <cite>tags</cite> as a required field use the info dict from
SQLAlchemy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Contact</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">...</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span>
        <span class="s2">&quot;Tag&quot;</span><span class="p">,</span>
        <span class="n">secondary</span><span class="o">=</span><span class="n">assoc_contact_tag</span><span class="p">,</span>
        <span class="n">backref</span><span class="o">=</span><span class="s2">&quot;contact&quot;</span><span class="p">,</span>
        <span class="n">info</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="pre-and-post-processing">
<h4>Pre and Post processing<a class="headerlink" href="#pre-and-post-processing" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">ModelRestApi</span></code> offers several methods that you can override to perform pre processing or post processing
on all HTTP methods. These methods are nice places to change data before submission or retrieval:</p>
<span class="target" id="module-flask_appbuilder.api"></span><dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">flask_appbuilder.api.</code><code class="descname">ModelRestApi</code><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="method">
<dt>
<code class="descname">post_add</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.post_add"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Override this, will be called after update</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">post_delete</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.post_delete"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Override this, will be called after delete</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">post_update</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.post_update"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Override this, will be called after update</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">pre_add</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.pre_add"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Override this, will be called before add.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">pre_delete</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.pre_delete"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Override this, will be called before delete</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">pre_get</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.pre_get"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Override this, will be called before data is sent
to the requester on get item endpoint.
You can use it to mutate the response sent.
Note that any new field added will not be reflected on the OpenApi spec.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">pre_get_list</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.pre_get_list"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Override this, will be called before data is sent
to the requester on get list endpoint.
You can use it to mutate the response sent
Note that any new field added will not be reflected on the OpenApi spec.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">pre_update</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.pre_update"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Override this, this method is called before the update takes place.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="enum-fields">
<h4>Enum Fields<a class="headerlink" href="#enum-fields" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">ModelRestApi</span></code> offers support for <strong>Enum</strong> fields, you have to declare them
on a specific way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GenderEnum</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
<span class="n">male</span> <span class="o">=</span> <span class="s1">&#39;Male&#39;</span>
<span class="n">female</span> <span class="o">=</span> <span class="s1">&#39;Female&#39;</span>


<span class="k">class</span> <span class="nc">Contact</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">564</span><span class="p">))</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">personal_phone</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
    <span class="n">personal_celphone</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
    <span class="n">contact_group_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;contact_group.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">contact_group</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;ContactGroup&quot;</span><span class="p">)</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Enum</span><span class="p">(</span><span class="n">GenderEnum</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;enum_class&quot;</span><span class="p">:</span> <span class="n">GenderEnum</span><span class="p">})</span>
</pre></div>
</div>
<p>Notice the <code class="docutils literal notranslate"><span class="pre">info={&quot;enum_class&quot;:</span> <span class="pre">GenderEnum}</span></code></p>
</div>
</div>
<span id="document-quickhowto_mongo"></span><div class="section" id="model-views-on-mongodb">
<h3>Model Views on MongoDB<a class="headerlink" href="#model-views-on-mongodb" title="Permalink to this headline">¶</a></h3>
<p>Last chapter we created a very simple contacts application, we are going to do the same, this time
using MongoDB. Remember you should use the correct app skeleton, the one for MongoDB, this way
the security models will be created on the MongoDB and not on SQLLite by default, take a look
at the way that AppBuilder is initialized.</p>
<p>And the source code for this chapter on
<a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/mongoengine">examples</a></p>
<div class="section" id="initialization">
<h4>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h4>
<p>Initialization with MongoDB is a bit different, we must tell F.A.B. to use a different SecurityManager.</p>
<p>On __init__.py:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">AppBuilder</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.security.mongoengine.manager</span> <span class="k">import</span> <span class="n">SecurityManager</span>
<span class="kn">from</span> <span class="nn">flask_mongoengine</span> <span class="k">import</span> <span class="n">MongoEngine</span>

<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
<span class="n">dbmongo</span> <span class="o">=</span> <span class="n">MongoEngine</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="c1"># The Flask-AppBuilder init</span>
<span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">security_manager_class</span><span class="o">=</span><span class="n">SecurityManager</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">app</span> <span class="k">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">views</span>
</pre></div>
</div>
<p>AppBuilder is initialized with the <em>security_manager_class</em> parameter with a SecurityManager class for MongoDB.
All security models are created on MongoDB. Notice also that no db.session is passed to AppBuilder there is
no <em>session</em> on MongoDB.</p>
</div>
<div class="section" id="define-your-models-models-py">
<h4>Define your models (models.py)<a class="headerlink" href="#define-your-models-models-py" title="Permalink to this headline">¶</a></h4>
<p>We are going to define two extra models from the previous example, just for fun.</p>
<p>The <em>ContactGroup</em> model.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mongoengine</span> <span class="k">import</span> <span class="n">Document</span>
<span class="kn">from</span> <span class="nn">mongoengine</span> <span class="k">import</span> <span class="n">DateTimeField</span><span class="p">,</span> <span class="n">StringField</span><span class="p">,</span> <span class="n">ReferenceField</span><span class="p">,</span> <span class="n">ListField</span>

<span class="k">class</span> <span class="nc">ContactGroup</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p>The <em>Contacts</em> <em>Gender</em> and Tags models.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Gender</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>


<span class="k">class</span> <span class="nc">Tags</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>


<span class="k">class</span> <span class="nc">Contact</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">()</span>
    <span class="n">personal_phone</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">personal_celphone</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">contact_group</span> <span class="o">=</span> <span class="n">ReferenceField</span><span class="p">(</span><span class="n">ContactGroup</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">ReferenceField</span><span class="p">(</span><span class="n">Gender</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">ListField</span><span class="p">(</span><span class="n">ReferenceField</span><span class="p">(</span><span class="n">Tags</span><span class="p">))</span>
</pre></div>
</div>
<p>Notice how the relations many to one and many to many are made, the framework still only supports this kind
of normalized schemas.</p>
</div>
<div class="section" id="define-your-views-views-py">
<h4>Define your Views (views.py)<a class="headerlink" href="#define-your-views-views-py" title="Permalink to this headline">¶</a></h4>
<p>Now we are going to define our view for <em>ContactGroup</em> model.
This view will setup functionality for create, remove, update and show primitives for your model’s definition.</p>
<p>Inherit from <em>ModelView</em> class that inherits from <em>BaseCRUDView</em> that inherits from <em>BaseModelView</em>,
so you can override all their public properties to configure many details for your CRUD primitives.
take a look at <a class="reference internal" href="index.html#document-advanced"><span class="doc">Advanced Configuration</span></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">ModelView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.mongoengine.interface</span> <span class="k">import</span> <span class="n">MongoEngineInterface</span>

<span class="k">class</span> <span class="nc">GroupModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">MongoEngineInterface</span><span class="p">(</span><span class="n">ContactGroup</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">ContactModelView</span><span class="p">]</span>
</pre></div>
</div>
<p>The ContactModelView ? (that was a reference in <em>related_views</em> list)</p>
<p>Let’s define it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">MongoEngineInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>

    <span class="n">label_columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;contact_group&#39;</span><span class="p">:</span><span class="s1">&#39;Contacts Group&#39;</span><span class="p">}</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;personal_celphone&#39;</span><span class="p">,</span><span class="s1">&#39;birthday&#39;</span><span class="p">,</span><span class="s1">&#39;contact_group&#39;</span><span class="p">]</span>

    <span class="n">show_fieldsets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;Summary&#39;</span><span class="p">,{</span><span class="s1">&#39;fields&#39;</span><span class="p">:[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;address&#39;</span><span class="p">,</span><span class="s1">&#39;contact_group&#39;</span><span class="p">]}),</span>
        <span class="p">(</span><span class="s1">&#39;Personal Info&#39;</span><span class="p">,{</span><span class="s1">&#39;fields&#39;</span><span class="p">:[</span><span class="s1">&#39;birthday&#39;</span><span class="p">,</span><span class="s1">&#39;personal_phone&#39;</span><span class="p">,</span><span class="s1">&#39;personal_celphone&#39;</span><span class="p">],</span><span class="s1">&#39;expanded&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">}),</span>
        <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="register-views-py">
<h4>Register (views.py)<a class="headerlink" href="#register-views-py" title="Permalink to this headline">¶</a></h4>
<p>Register everything, to present the models and create the menu.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">GroupModelView</span><span class="p">,</span> <span class="s2">&quot;List Groups&quot;</span><span class="p">,</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa-folder-open-o&quot;</span><span class="p">,</span><span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;Contacts&quot;</span><span class="p">,</span>
                <span class="n">category_icon</span> <span class="o">=</span> <span class="s2">&quot;fa-envelope&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ContactModelView</span><span class="p">,</span> <span class="s2">&quot;List Contacts&quot;</span><span class="p">,</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa-envelope&quot;</span><span class="p">,</span><span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Take a look at the <a class="reference internal" href="index.html#document-api"><span class="doc">API Reference</span></a> for add_view method.</p>
<p>As you can see, you register and define your Views exactly the same way as with SQLAlchemy. You can even use both.</p>
</div>
</div>
<span id="document-quickcharts"></span><div class="section" id="chart-views">
<h3>Chart Views<a class="headerlink" href="#chart-views" title="Permalink to this headline">¶</a></h3>
<p>To implement views with google charts, use all inherited classes from BaseChartView, these are:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">DirectChartView:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Display direct data charts with multiple series, no group by is applied.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GroupByChartView:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Displays grouped data with multiple series.</td>
</tr>
<tr class="field-odd field"><th class="field-name">ChartView:</th><td class="field-body">(Deprecated) Display simple group by method charts.</td>
</tr>
<tr class="field-even field"><th class="field-name">TimeChartView:</th><td class="field-body">(Deprecated) Displays simple group by month and year charts.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>You can experiment with some examples on a live
<a class="reference external" href="http://flaskappbuilder.pythonanywhere.com/">Demo</a> (login has guest/welcome).</p>
<div class="section" id="direct-data-charts">
<h4>Direct Data Charts<a class="headerlink" href="#direct-data-charts" title="Permalink to this headline">¶</a></h4>
<p>These charts can display multiple series, based on columns or methods defined on models.
You can display multiple charts on the same view.</p>
<p>Let’s create a simple model first, the gold is to display a chart showing the unemployment evolution
versus the percentage of the population with higher education, our model will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CountryStats</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">stat_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">population</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Float</span><span class="p">)</span>
    <span class="n">unemployed_perc</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Float</span><span class="p">)</span>
    <span class="n">poor_perc</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Float</span><span class="p">)</span>
    <span class="n">college</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Float</span><span class="p">)</span>
</pre></div>
</div>
<p>Suppose that the college field will have the total number of college students on some date.
But the <em>unemployed_perc</em> field holds a percentage, we can’t draw a chart with these two together,
we must create a function to calculate the <em>college_perc</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">college_perc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">college</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>Now we are ready to define our view:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.charts.views</span> <span class="k">import</span> <span class="n">DirectByChartView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>

<span class="k">class</span> <span class="nc">CountryDirectChartView</span><span class="p">(</span><span class="n">DirectByChartView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">CountryStats</span><span class="p">)</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="s1">&#39;Direct Data Example&#39;</span>

    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Unemployment&#39;</span><span class="p">,</span>
        <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;stat_date&#39;</span><span class="p">,</span>
        <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;unemployed_perc&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;college_perc&#39;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This view definition will produce this:</p>
<a class="reference internal image-reference" href="_images/direct_chart.png"><img alt="_images/direct_chart.png" src="_images/direct_chart.png" style="width: 100%;" /></a>
<p>The <strong>definitions</strong> property respects the following grammar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">{</span>
                 <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;label for chart definition&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;COLNAME&gt;&#39;</span><span class="o">|</span><span class="s1">&#39;&lt;MODEL FUNCNAME&gt;&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;formatter&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">FUNC</span> <span class="n">FORMATTER</span> <span class="n">FOR</span> <span class="n">GROUP</span> <span class="n">COL</span><span class="o">&gt;</span><span class="p">,</span>
                 <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;COLNAME&gt;&#39;</span><span class="o">|</span><span class="s1">&#39;&lt;MODEL FUNCNAME&gt;&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">]</span>
                <span class="p">},</span> <span class="o">...</span>
              <span class="p">]</span>
</pre></div>
</div>
<p>Where ‘label’ and ‘formatter’ are optional parameters.
So on the same view you can have multiple direct chart definitions, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.charts.views</span> <span class="k">import</span> <span class="n">DirectByChartView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>

<span class="k">class</span> <span class="nc">CountryDirectChartView</span><span class="p">(</span><span class="n">DirectByChartView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">CountryStats</span><span class="p">)</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="s1">&#39;Direct Data Example&#39;</span>

    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Unemployment&#39;</span><span class="p">,</span>
        <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;stat_date&#39;</span><span class="p">,</span>
        <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;unemployed_perc&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;college_perc&#39;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Poor&#39;</span><span class="p">,</span>
        <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;stat_date&#39;</span><span class="p">,</span>
        <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;poor_perc&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;college_perc&#39;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Next register your view like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">CountryDirectChartView</span><span class="p">,</span> <span class="s2">&quot;Show Country Chart&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-dashboard&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Statistics&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This kind of chart inherits from <strong>BaseChartView</strong> that has some properties that you can configure
these are:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">chart_title:</th><td class="field-body">The Title of the chart (can be used with babel of course).</td>
</tr>
<tr class="field-even field"><th class="field-name">group_by_label:</th><td class="field-body">The label that will be displayed before the buttons for choosing the chart.</td>
</tr>
<tr class="field-odd field"><th class="field-name">chart_type:</th><td class="field-body">The chart type PieChart, ColumnChart or LineChart</td>
</tr>
<tr class="field-even field"><th class="field-name">chart_3d:</th><td class="field-body">= True or false label like: ‘true’</td>
</tr>
<tr class="field-odd field"><th class="field-name">width:</th><td class="field-body">The charts width</td>
</tr>
<tr class="field-even field"><th class="field-name">height:</th><td class="field-body">The charts height</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Additionally you can configure <strong>BaseModelView</strong> properties because <strong>BaseChartView</strong> is a child.
The most interesting one is</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">base_filters:</th><td class="field-body">Defines the filters for data, this has precedence from all UI filters.</td>
</tr>
<tr class="field-even field"><th class="field-name">label_columns:</th><td class="field-body">Labeling for charts columns. If not provided the framework will
generate a pretty version of the columns name.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="grouped-data-charts">
<h4>Grouped Data Charts<a class="headerlink" href="#grouped-data-charts" title="Permalink to this headline">¶</a></h4>
<p>These charts can display multiple series, based on columns from models or functions defined on the models.
You can display multiple charts on the same view. This data can be grouped and aggregated has you like.</p>
<p>Let’s create some simple models first, base on the prior example but this time lets make our models
support has many countries has we like.
The gold is to display a chart showing the unemployment
versus the percentage of the population with higher education per country:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">Model</span>

<span class="k">class</span> <span class="nc">Country</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>


<span class="k">class</span> <span class="nc">CountryStats</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">stat_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">population</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Float</span><span class="p">)</span>
    <span class="n">unemployed_perc</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Float</span><span class="p">)</span>
    <span class="n">poor_perc</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Float</span><span class="p">)</span>
    <span class="n">college</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Float</span><span class="p">)</span>
    <span class="n">country_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;country.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">country</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Country&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">college_perc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">college</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="k">def</span> <span class="nf">month_year</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stat_date</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stat_date</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we are ready to define our view:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.charts.views</span> <span class="k">import</span> <span class="n">GroupByChartView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.group</span> <span class="k">import</span> <span class="n">aggregate_count</span><span class="p">,</span> <span class="n">aggregate_sum</span><span class="p">,</span> <span class="n">aggregate_avg</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>


<span class="k">class</span> <span class="nc">CountryGroupByChartView</span><span class="p">(</span><span class="n">GroupByChartView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">CountryStats</span><span class="p">)</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="s1">&#39;Statistics&#39;</span>

    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Country Stat&#39;</span><span class="p">,</span>
            <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;country&#39;</span><span class="p">,</span>
            <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="n">aggregate_avg</span><span class="p">,</span> <span class="s1">&#39;unemployed_perc&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="n">aggregate_avg</span><span class="p">,</span> <span class="s1">&#39;population&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="n">aggregate_avg</span><span class="p">,</span> <span class="s1">&#39;college_perc&#39;</span><span class="p">)</span>
                      <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>Next register your view like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">CountryGroupByChartView</span><span class="p">,</span> <span class="s2">&quot;Show Country Chart&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-dashboard&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Statistics&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>F.A.B. has already some aggregation functions that you can use, for count, sum and average.
On this example we are using average, this will display the historical average of
unemployment and college formation, grouped by country.</p>
<p>A different and interesting example is to group data monthly from all countries, this will show the use of
<strong>formater</strong> property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">calendar</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.charts.views</span> <span class="k">import</span> <span class="n">GroupByChartView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.group</span> <span class="k">import</span> <span class="n">aggregate_count</span><span class="p">,</span> <span class="n">aggregate_sum</span><span class="p">,</span> <span class="n">aggregate_avg</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>

<span class="k">def</span> <span class="nf">pretty_month_year</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">calendar</span><span class="o">.</span><span class="n">month_name</span><span class="p">[</span><span class="n">value</span><span class="o">.</span><span class="n">month</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">CountryGroupByChartView</span><span class="p">(</span><span class="n">GroupByChartView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">CountryStats</span><span class="p">)</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="s1">&#39;Statistics&#39;</span>

    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;month_year&#39;</span><span class="p">,</span>
            <span class="s1">&#39;formatter&#39;</span><span class="p">:</span> <span class="n">pretty_month_year</span><span class="p">,</span>
            <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="n">aggregate_avg</span><span class="p">,</span> <span class="s1">&#39;unemployed_perc&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="n">aggregate_avg</span><span class="p">,</span> <span class="s1">&#39;college_perc&#39;</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>This view will group data based on the model’s method <em>month_year</em> that has the name says will group data
by month and year, this grouping will be processed by averaging data from <em>unemployed_perc</em> and <em>college_perc</em>.</p>
<p>The group criteria will be formatted for display by <em>pretty_month_year</em> function that will change things like
‘1990-01’ to ‘January 1990’</p>
<p>This view definition will produce this:</p>
<a class="reference internal image-reference" href="_images/grouped_chart.png"><img alt="_images/grouped_chart.png" src="_images/grouped_chart.png" style="width: 100%;" /></a>
<p>You can create your own aggregation functions and <em>decorate</em> them for automatic labeling (and babel).
Has an example let’s look at F.A.B.’s code for <em>aggregate_sum</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@aggregate</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Count of&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">aggregate_count</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">items</span><span class="p">))</span>
</pre></div>
</div>
<p>The label ‘Count of’ will be concatenated to your definition of <em>label_columns</em> or the pretty version generated
by the framework of the columns them selfs.</p>
</div>
<div class="section" id="deprecated-define-your-chart-views-views-py">
<h4>(Deprecated) Define your Chart Views (views.py)<a class="headerlink" href="#deprecated-define-your-chart-views-views-py" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactChartView</span><span class="p">(</span><span class="n">ChartView</span><span class="p">):</span>
    <span class="n">search_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;contact_group&#39;</span><span class="p">]</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="s1">&#39;Grouped contacts&#39;</span>
    <span class="n">label_columns</span> <span class="o">=</span> <span class="n">ContactModelView</span><span class="o">.</span><span class="n">label_columns</span>
    <span class="n">group_by_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;contact_group&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Notice that:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">label_columns:</th><td class="field-body">Are the labels that will be displayed instead of the model’s columns name. In this case they are the same labels from ContactModelView.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">group_by_columns:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Is a list of columns that you want to group.</td>
</tr>
</tbody>
</table>
<p>this will produce a Pie chart, with the percentage of contacts by group.
If you want a column chart just define:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chart_type</span> <span class="o">=</span> <span class="s1">&#39;ColumnChart&#39;</span>
</pre></div>
</div>
<p>You can use ‘BarChart’, ‘LineChart’, ‘AreaChart’ the default is ‘PieChart’, take a look at the google charts documentation, the <em>chart_type</em> is the function on ‘google.visualization’ object</p>
<p>Let’s define a chart grouped by a time frame?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactTimeChartView</span><span class="p">(</span><span class="n">TimeChartView</span><span class="p">):</span>
    <span class="n">search_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;contact_group&#39;</span><span class="p">]</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="s1">&#39;Grouped Birth contacts&#39;</span>
    <span class="n">label_columns</span> <span class="o">=</span> <span class="n">ContactModelView</span><span class="o">.</span><span class="n">label_columns</span>
    <span class="n">group_by_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;birthday&#39;</span><span class="p">]</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
</pre></div>
</div>
<p>this will produce a column chart, with the number of contacts that were born on a particular month or year.
Notice that the label_columns are from and already defined <em>ContactModelView</em> take a look at the <a class="reference internal" href="index.html#document-quickhowto"><span class="doc">Model Views (Quick How to)</span></a></p>
<p>Finally we will define a direct data chart</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">StatsChartView</span><span class="p">(</span><span class="n">DirectChartView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Stats</span><span class="p">)</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Statistics&#39;</span><span class="p">)</span>
    <span class="n">direct_columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Some Stats&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;stat1&#39;</span><span class="p">,</span> <span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;Other Stats&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;stat2&#39;</span><span class="p">,</span> <span class="s1">&#39;col3&#39;</span><span class="p">)}</span>
</pre></div>
</div>
<p>direct_columns is a dictionary you define to identify a label for your X column, and the Y columns (series) you want to include on the chart</p>
<p>This dictionary is composed by key and a tuple: {‘KEY LABEL FOR X COL’:(‘X COL’,’Y COL’,’Y2 COL’,…),…}</p>
<p>Remember ‘X COL’, ‘Ys COL’ are identifying columns from the data model.</p>
<p>Take look at a more detailed example on <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickcharts">quickcharts</a>.</p>
</div>
<div class="section" id="register-views-py">
<h4>Register (views.py)<a class="headerlink" href="#register-views-py" title="Permalink to this headline">¶</a></h4>
<p>Register everything, to present your charts and create the menu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ContactTimeChartView</span><span class="p">,</span> <span class="s2">&quot;Contacts Birth Chart&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-envelope&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ContactChartView</span><span class="p">,</span> <span class="s2">&quot;Contacts Chart&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-dashboard&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can find this example at: <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickhowto">https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickhowto</a></p>
<p>Take a look at the <a class="reference internal" href="index.html#document-api"><span class="doc">API Reference</span></a>. For additional customization</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use charts has related views also, just add them on your related_views properties.</p>
</div>
<p>Some images:</p>
<a class="reference internal image-reference" href="_images/chart.png"><img alt="_images/chart.png" src="_images/chart.png" style="width: 100%;" /></a>
<a class="reference internal image-reference" href="_images/chart_time1.png"><img alt="_images/chart_time1.png" src="_images/chart_time1.png" style="width: 100%;" /></a>
<a class="reference internal image-reference" href="_images/chart_time2.png"><img alt="_images/chart_time2.png" src="_images/chart_time2.png" style="width: 100%;" /></a>
</div>
</div>
<span id="document-quickfiles"></span><div class="section" id="model-views-with-files-and-images">
<h3>Model Views with Files and Images<a class="headerlink" href="#model-views-with-files-and-images" title="Permalink to this headline">¶</a></h3>
<p>You can implement views with images or files embedded on the model’s definition. You can do it using SQLAlchemy or
MongoDB (MongoEngine). When using SQLAlchemy, files and images are saved on the filesystem, on MongoDB on the db (GridFS).</p>
<div class="section" id="define-your-model-models-py">
<h4>Define your model (models.py)<a class="headerlink" href="#define-your-model-models-py" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">Model</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.mixins</span> <span class="k">import</span> <span class="n">ImageColumn</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">photo</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">ImageColumn</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span> <span class="n">thumbnail_size</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="kc">True</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">photo_img</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">ImageManager</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">photo</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;PersonModelView.show&#39;</span><span class="p">,</span><span class="n">pk</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span> <span class="o">+</span>\
             <span class="s1">&#39;&quot; class=&quot;thumbnail&quot;&gt;&lt;img src=&quot;&#39;</span> <span class="o">+</span> <span class="n">im</span><span class="o">.</span><span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">photo</span><span class="p">)</span> <span class="o">+</span>\
              <span class="s1">&#39;&quot; alt=&quot;Photo&quot; class=&quot;img-rounded img-responsive&quot;&gt;&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;PersonModelView.show&#39;</span><span class="p">,</span><span class="n">pk</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span> <span class="o">+</span>\
             <span class="s1">&#39;&quot; class=&quot;thumbnail&quot;&gt;&lt;img src=&quot;//:0&quot; alt=&quot;Photo&quot; class=&quot;img-responsive&quot;&gt;&lt;/a&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">photo_img_thumbnail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">ImageManager</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">photo</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;PersonModelView.show&#39;</span><span class="p">,</span><span class="n">pk</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span> <span class="o">+</span>\
             <span class="s1">&#39;&quot; class=&quot;thumbnail&quot;&gt;&lt;img src=&quot;&#39;</span> <span class="o">+</span> <span class="n">im</span><span class="o">.</span><span class="n">get_url_thumbnail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">photo</span><span class="p">)</span> <span class="o">+</span>\
              <span class="s1">&#39;&quot; alt=&quot;Photo&quot; class=&quot;img-rounded img-responsive&quot;&gt;&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;PersonModelView.show&#39;</span><span class="p">,</span><span class="n">pk</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span> <span class="o">+</span>\
             <span class="s1">&#39;&quot; class=&quot;thumbnail&quot;&gt;&lt;img src=&quot;//:0&quot; alt=&quot;Photo&quot; class=&quot;img-responsive&quot;&gt;&lt;/a&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Create two additional methods in this case <em>photo_img</em> and <em>photo_img_thumbnail</em>, to inject your own custom HTML,
to show your saved images. In this example the customized method is showing the images, and linking them with the show view.
Notice how the methods are calling <em>get_url</em> and <em>get_url_thumbnail</em> from ImageManager, these are returning the
url for the images, each image is saved on the filesystem using the global config <strong>IMG_UPLOAD_FOLDER</strong>.
Each image will have two files with different sizes, images are saved as &lt;uuid&gt;_sep_&lt;filename&gt;, and &lt;uuid&gt;_sep_&lt;filename&gt;_thumb</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The “ImageColumn” type, is an extended type from Flask-AppBuilder.</p>
</div>
<p>Later reference this method like it’s a column on your view.</p>
<p>To implement image or file support using GridFS from MongoDB is even easier, take a look at the example:</p>
<p><a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/mongoimages">https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/mongoimages</a></p>
</div>
<div class="section" id="define-your-views-views-py">
<h4>Define your Views (views.py)<a class="headerlink" href="#define-your-views-views-py" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">ModelView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>

<span class="k">class</span> <span class="nc">PersonModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span>

    <span class="n">list_widget</span> <span class="o">=</span> <span class="n">ListThumbnail</span>

    <span class="n">label_columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span><span class="s1">&#39;photo&#39;</span><span class="p">:</span><span class="s1">&#39;Photo&#39;</span><span class="p">,</span><span class="s1">&#39;photo_img&#39;</span><span class="p">:</span><span class="s1">&#39;Photo&#39;</span><span class="p">,</span> <span class="s1">&#39;photo_img_thumbnail&#39;</span><span class="p">:</span><span class="s1">&#39;Photo&#39;</span><span class="p">}</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;photo_img_thumbnail&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="n">show_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;photo_img&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>We are overriding the <em>list_widget</em>, the widget that is normally used by ModelView.
This will display a thumbnail list, excellent for displaying images.</p>
<p>We’re not using the <em>image</em> column but the methods <em>photo_img</em> and <em>photo_img_thumbnail</em> we have created.
These methods will display the images and link them to show view.</p>
<p>And that’s it! images will be saved on the server.
Their file names will result in the concatenation of UUID with their original name. They will be resized for optimization.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can define image resizing using configuration key <em>IMG_SIZE</em></p>
</div>
<p>We are overriding the list_widget, the widget that is normally used by ModelView. This will display a thumbnail list excellent for displaying images.</p>
<p>And that’s it! Images will be saved on the server with their filename concatenated by a UUID’s. Aditionally will be resized for optimization.</p>
</div>
<div class="section" id="next-step">
<h4>Next step<a class="headerlink" href="#next-step" title="Permalink to this headline">¶</a></h4>
<p>Take a look at the example:</p>
<p><a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickimages">https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickimages</a></p>
<p><a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickfiles">https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickfiles</a></p>
<p>Some images:</p>
<a class="reference internal image-reference" href="_images/images_list.png"><img alt="_images/images_list.png" src="_images/images_list.png" style="width: 100%;" /></a>
</div>
</div>
<span id="document-quickminimal"></span><div class="section" id="quick-minimal-application">
<h3>Quick Minimal Application<a class="headerlink" href="#quick-minimal-application" title="Permalink to this headline">¶</a></h3>
<div class="section" id="how-to-setup-a-minimal-application">
<h4>How to setup a minimal Application<a class="headerlink" href="#how-to-setup-a-minimal-application" title="Permalink to this headline">¶</a></h4>
<p>This is the most basic example, using the minimal code needed to setup a running application with F.A.B.</p>
<p>Will use sqlite for the database no need to install anything.
Notice the SQLA class this is just a child class from flask.ext.SQLAlchemy that overrides the declarative base
to F.A.B. You can use every configuration and method from flask extension except the model’s direct query.</p>
<p>I do advise using the skeleton application as described on the <a class="reference internal" href="index.html#document-installation"><span class="doc">Installation</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">SQLA</span><span class="p">,</span> <span class="n">AppBuilder</span>

<span class="c1"># init Flask</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Basic config with security for forms and session cookie</span>
<span class="n">basedir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="s1">&#39;app.db&#39;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CSRF_ENABLED&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;thisismyscretkey&#39;</span>

<span class="c1"># Init SQLAlchemy</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLA</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="c1"># Init F.A.B.</span>
<span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>

<span class="c1"># Run the development server</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>If you run this, notice that your database will be created with two roles ‘Admin’ and ‘Public’,
as well has all the security detailed permissions.</p>
<p>The default authentication method will be database, and you can initially login with <strong>‘admin’/’general’</strong>.
you can take a look at all your configuration options on <a class="reference internal" href="index.html#document-config"><span class="doc">Base Configuration</span></a></p>
<p>Take a look at this <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickminimal">example</a> on Github</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-relations"></span><div class="section" id="model-relations-composite-keys">
<h3>Model Relations/Composite keys<a class="headerlink" href="#model-relations-composite-keys" title="Permalink to this headline">¶</a></h3>
<p>On this chapter we are going to show how to setup model relationships and their
view integration on the framework</p>
<p>And the source code for this chapter on
<a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/employees">examples</a></p>
<div class="section" id="many-to-one">
<h4>Many to One<a class="headerlink" href="#many-to-one" title="Permalink to this headline">¶</a></h4>
<p>First let’s check the most simple relationship, already described on the quick how to with the contacts
application.</p>
<p>Using a different (and slightly more complex) example. Let’s assume we are building a human resources app.
So we have an Employees table with some related data.</p>
<ul class="simple">
<li>Employee.</li>
<li>Function.</li>
<li>Department.</li>
</ul>
<p>Each Employee belongs to a department and he/she has a particular function.</p>
<p>Let’s define our models (models.py):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">,</span> <span class="n">Date</span><span class="p">,</span> <span class="n">Text</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="k">import</span> <span class="n">relationship</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">Model</span>


<span class="k">class</span> <span class="nc">Department</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>


<span class="k">class</span> <span class="nc">Function</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>


<span class="k">def</span> <span class="nf">today</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">full_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Text</span><span class="p">(</span><span class="mi">250</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">fiscal_number</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">employee_number</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">department_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;department.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">department</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Department&quot;</span><span class="p">)</span>
    <span class="n">function_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;function.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">function</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Function&quot;</span><span class="p">)</span>
    <span class="n">begin_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">today</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_name</span>
</pre></div>
</div>
<p>This has two, one to many relations:</p>
<blockquote>
<div><ul class="simple">
<li>One employee belongs to a department and a department has many employees</li>
<li>One employee executes a function and a function is executed by many employees.</li>
</ul>
</div></blockquote>
<p>Now let’s define ours views (views.py):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">ModelView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="k">import</span> <span class="n">Employee</span><span class="p">,</span><span class="n">Department</span><span class="p">,</span> <span class="n">Function</span><span class="p">,</span> <span class="n">EmployeeHistory</span>
<span class="kn">from</span> <span class="nn">app</span> <span class="k">import</span> <span class="n">appbuilder</span>


<span class="k">class</span> <span class="nc">EmployeeView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Employee</span><span class="p">)</span>

    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;full_name&#39;</span><span class="p">,</span> <span class="s1">&#39;department&#39;</span><span class="p">,</span> <span class="s1">&#39;employee_number&#39;</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">FunctionView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Function</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">EmployeeView</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">DepartmentView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Department</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">EmployeeView</span><span class="p">]</span>
</pre></div>
</div>
<p>Has described on the <a class="reference internal" href="index.html#document-quickhowto"><span class="doc">Model Views (Quick How to)</span></a> chapter the <em>related_views</em> property will tell F.A.B
to add the defined <strong>EmployeeView</strong> filtered by the relation on the show and edit form for
the departments and functions. So on the department show view you will have a tab with all
the employees that belong to it, and of course on the function show view you will have a tab
with all the employees that share this function.</p>
<p>Finally register everything to create the flask endpoints and automatic menu construction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>

<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">EmployeeView</span><span class="p">,</span> <span class="s2">&quot;Employees&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-folder-open-o&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Company&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_separator</span><span class="p">(</span><span class="s2">&quot;Company&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">DepartmentView</span><span class="p">,</span> <span class="s2">&quot;Departments&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-folder-open-o&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Company&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">FunctionView</span><span class="p">,</span> <span class="s2">&quot;Functions&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-folder-open-o&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Company&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Remember ‘db.create_all()’ will create all your models on the database if they do not exist already.</p>
</div>
<div class="section" id="many-to-many">
<h4>Many to Many<a class="headerlink" href="#many-to-many" title="Permalink to this headline">¶</a></h4>
<p>Our employees have benefits, and HR wants to track them. It’s time to define a many to many relation.</p>
<p>On your model definition add the benefit model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Benefit</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p>Then define the association table between Employee and Benefit,
then add the relation to benefit on the Employee model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">assoc_benefits_employee</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&#39;benefits_employee&#39;</span><span class="p">,</span> <span class="n">Model</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
                                      <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                                      <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;benefit_id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;benefit.id&#39;</span><span class="p">)),</span>
                                      <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;employee_id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;employee.id&#39;</span><span class="p">))</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">full_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Text</span><span class="p">(</span><span class="mi">250</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">fiscal_number</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">employee_number</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">department_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;department.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">department</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Department&quot;</span><span class="p">)</span>
    <span class="n">function_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;function.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">function</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Function&quot;</span><span class="p">)</span>
    <span class="n">benefits</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Benefit&#39;</span><span class="p">,</span> <span class="n">secondary</span><span class="o">=</span><span class="n">assoc_benefits_employee</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="s1">&#39;employee&#39;</span><span class="p">)</span>

    <span class="n">begin_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">today</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_name</span>
</pre></div>
</div>
<p>On your views (views.py) it would be nice to create a menu entry for benefits, so that HR can
add the available benefits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BenefitView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Benefit</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">EmployeeView</span><span class="p">]</span>
    <span class="n">add_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="n">edit_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="n">show_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Then register your view:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">BenefitView</span><span class="p">,</span> <span class="s2">&quot;Benefits&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-folder-open-o&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Company&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>F.A.B. will add a select2 widget for adding benefit tags to employees, when adding or editing an employee.</p>
</div>
<div class="section" id="many-to-many-with-extra-properties">
<h4>Many to Many with extra properties<a class="headerlink" href="#many-to-many-with-extra-properties" title="Permalink to this headline">¶</a></h4>
<p>Finally we are creating a history of the employee on the company, we want to record all his/her department
changes and when did it occur. This can be done in different ways, this one is useful for our example on
how to use a many to many relation with extra properties. So let’s define our employee history model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EmployeeHistory</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">department_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;department.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">department</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Department&quot;</span><span class="p">)</span>
    <span class="n">employee_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;employee.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">employee</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Employee&quot;</span><span class="p">)</span>
    <span class="n">begin_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">today</span><span class="p">)</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Date</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see, this model is related to departments and employees and it has a begin date and end date
when he is/was allocated to it. It’s a special kind of association table.</p>
<p>We want the history to be shown on the employee show/detail view, has a list history. for this
we need to create a view for employee history and tell F.A.B to make a relation to it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EmployeeHistoryView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">EmployeeHistory</span><span class="p">)</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;department&#39;</span><span class="p">,</span> <span class="s1">&#39;begin_date&#39;</span><span class="p">,</span> <span class="s1">&#39;end_date&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Then change the employee view, this time we do not want a tab to navigate to the relation, we want to show
it on the same page cascading:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EmployeeView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Employee</span><span class="p">)</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;full_name&#39;</span><span class="p">,</span> <span class="s1">&#39;department&#39;</span><span class="p">,</span> <span class="s1">&#39;employee_number&#39;</span><span class="p">]</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">EmployeeHistoryView</span><span class="p">]</span>
    <span class="n">show_template</span> <span class="o">=</span> <span class="s1">&#39;appbuilder/general/model/show_cascade.html&#39;</span>
</pre></div>
</div>
<p>We need to register the <strong>EmployeeHistoryView</strong> but without a menu, because it’s history will be managed
on the employee detail view:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view_no_menu</span><span class="p">(</span><span class="n">EmployeeHistoryView</span><span class="p">,</span> <span class="s2">&quot;EmployeeHistoryView&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Take a look and run the example on <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/employees">Employees example</a>
It includes extra functionality like readonly fields, pre and post update logic, etc…</p>
</div>
<div class="section" id="composite-keys">
<h4>Composite Keys<a class="headerlink" href="#composite-keys" title="Permalink to this headline">¶</a></h4>
<p>Composite keys is supported for SQLAlchemy only, you can reference them using SQLAlchemy ‘relationship’,
and use them on combo boxes and/or related views, take a look at the
<a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/composite_keys">example</a></p>
<p>Notice the use of composite keys to prevent that and Item (server or whatever)
can be on more then a Rack/Datacenter at the same time, and that a Datacenter can’t have two racks with the same number</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature is only supported since 1.9.6</p>
</div>
</div>
</div>
<span id="document-actions"></span><div class="section" id="actions">
<h3>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="define-your-view">
<h4>Define your view<a class="headerlink" href="#define-your-view" title="Permalink to this headline">¶</a></h4>
<p>You can setup your actions on records on the show or list views.
This is a powerful feature, you can easily add custom functionality to your db records,
like mass delete, sending emails with record information, special mass update etc.</p>
<p>Just use the &#64;action decorator on your own functions. Here’s an example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.actions</span> <span class="k">import</span> <span class="n">action</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">ModeView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>

<span class="k">class</span> <span class="nc">GroupModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Group</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">ContactModelView</span><span class="p">]</span>

    <span class="nd">@action</span><span class="p">(</span><span class="s2">&quot;myaction&quot;</span><span class="p">,</span><span class="s2">&quot;Do something on this record&quot;</span><span class="p">,</span><span class="s2">&quot;Do you really want to?&quot;</span><span class="p">,</span><span class="s2">&quot;fa-rocket&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">myaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            do something with the item record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_redirect</span><span class="p">())</span>
</pre></div>
</div>
<p>This will create the necessary permissions for the item,
so that you can include or remove them from a particular role.</p>
<p>You can easily implement a massive delete option on list’s. Just add the following code
to your view. This example will tell F.A.B. to implement the action just for list views and not
show the option on the show view. You can do this by disabling the <em>single</em> or <em>multiple</em>
parameters on the <strong>&#64;action</strong> decorator.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@action</span><span class="p">(</span><span class="s2">&quot;muldelete&quot;</span><span class="p">,</span> <span class="s2">&quot;Delete&quot;</span><span class="p">,</span> <span class="s2">&quot;Delete all Really?&quot;</span><span class="p">,</span> <span class="s2">&quot;fa-rocket&quot;</span><span class="p">,</span> <span class="n">single</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">muldelete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">datamodel</span><span class="o">.</span><span class="n">delete_all</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_redirect</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_redirect</span><span class="p">())</span>
</pre></div>
</div>
<p>F.A.B will call your function with a list of record items if called from a list view.
Or a single item if called from a show view. By default an action will be implemented on
list views and show views so your method’s should be prepared to handle a list of records or
a single record:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@action</span><span class="p">(</span><span class="s2">&quot;muldelete&quot;</span><span class="p">,</span> <span class="s2">&quot;Delete&quot;</span><span class="p">,</span> <span class="s2">&quot;Delete all Really?&quot;</span><span class="p">,</span> <span class="s2">&quot;fa-rocket&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">muldelete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datamodel</span><span class="o">.</span><span class="n">delete_all</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_redirect</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datamodel</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_redirect</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<span id="document-advanced"></span><div class="section" id="advanced-configuration">
<h3>Advanced Configuration<a class="headerlink" href="#advanced-configuration" title="Permalink to this headline">¶</a></h3>
<div class="section" id="security">
<h4>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h4>
<p>To block or set the allowed permissions on a view, just set the <em>base_permissions</em> property with the base permissions</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GroupModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Group</span><span class="p">)</span>
    <span class="n">base_permissions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;can_add&#39;</span><span class="p">,</span><span class="s1">&#39;can_delete&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>With this initial config, the framework will only create ‘can_add’ and ‘can_delete’
permissions on GroupModelView as the only allowed. So users and even the administrator
of the application will not have the possibility to add list or show permissions on Group table view.
Base available permission are: can_add, can_edit, can_delete, can_list, can_show. More detailed info on <a class="reference internal" href="index.html#document-security"><span class="doc">Security</span></a></p>
</div>
<div class="section" id="custom-fields">
<h4>Custom Fields<a class="headerlink" href="#custom-fields" title="Permalink to this headline">¶</a></h4>
<p>Custom Model properties can be used on lists. This is useful for formatting values like currencies, time or dates.
or for custom HTML. This is very simple to do, first define your custom property on your Model
and then use the <strong>&#64;renders</strong> decorator to tell the framework to map you class method
with a certain Model property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models.decorators</span> <span class="k">import</span> <span class="n">renders</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">custom</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>

    <span class="nd">@renders</span><span class="p">(</span><span class="s1">&#39;custom&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">my_custom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># will render this columns as bold on ListWidget</span>
        <span class="k">return</span> <span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;&#39;</span> <span class="o">+</span> <span class="n">custom</span> <span class="o">+</span> <span class="s1">&#39;&lt;/b&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>On your view reference your method as a column on list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;my_custom&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="base-filtering">
<h4>Base Filtering<a class="headerlink" href="#base-filtering" title="Permalink to this headline">¶</a></h4>
<p>To filter a views data, just set the <em>base_filter</em> property with your base filters. These will allways be applied first on any search.</p>
<p>It’s very flexible, you can apply multiple filters with static values, or values based on a function you define.
On this next example we are filtering a view by the logged in user and with column <em>name</em> starting with “a”</p>
<p><em>base_filters</em> is a list of lists with 3 values [[‘column name’,FilterClass,’filter value],…]:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">g</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">ModelView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.filters</span> <span class="k">import</span> <span class="n">FilterEqualFunction</span><span class="p">,</span> <span class="n">FilterStartsWith</span>
<span class="c1"># If you&#39;re using Mongo Engine you should import filters like this, everything else is exactly the same</span>
<span class="c1"># from flask_appbuilder.models.mongoengine.filters import FilterStartsWith, FilterEqualFunction</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="k">import</span> <span class="n">MyTable</span>


<span class="k">def</span> <span class="nf">get_user</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">user</span>


<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
    <span class="n">base_filters</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;created_by&#39;</span><span class="p">,</span> <span class="n">FilterEqualFunction</span><span class="p">,</span> <span class="n">get_user</span><span class="p">],</span>
                    <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">FilterStartsWith</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>Since version 1.5.0 you can use base_filter with dotted notation, necessary joins will be handled for you on
the background. Study the following example to see how:</p>
<p><a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/extendsecurity">https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/extendsecurity</a></p>
</div>
<div class="section" id="default-order">
<h4>Default Order<a class="headerlink" href="#default-order" title="Permalink to this headline">¶</a></h4>
<p>Use a default order on your lists, this can be overridden by the user on the UI.
Data structure (‘col_name’:’asc|desc’):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
    <span class="n">base_order</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;my_col_to_be_ordered&#39;</span><span class="p">,</span><span class="s1">&#39;asc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="template-extra-arguments">
<h4>Template Extra Arguments<a class="headerlink" href="#template-extra-arguments" title="Permalink to this headline">¶</a></h4>
<p>You can pass extra Jinja2 arguments to your custom template, using extra_args property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
    <span class="n">extra_args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;my_extra_arg&#39;</span><span class="p">:</span><span class="s1">&#39;SOMEVALUE&#39;</span><span class="p">}</span>
    <span class="n">show_template</span> <span class="o">=</span> <span class="s1">&#39;my_show_template.html&#39;</span>
</pre></div>
</div>
<p>Your overriding the ‘show’ template to handle your extra argument.
You can still use F.A.B. show template using Jinja2 blocks, take a look at the <a class="reference internal" href="index.html#document-templates"><span class="doc">Templates</span></a> chapter</p>
</div>
<div class="section" id="forms-override-automatic-form-creation">
<h4>Forms - Override automatic form creation<a class="headerlink" href="#forms-override-automatic-form-creation" title="Permalink to this headline">¶</a></h4>
<p>Define your own Add, Edit forms using WTForms to override the automatic form creation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
    <span class="n">add_form</span> <span class="o">=</span> <span class="n">AddFormWTF</span>
</pre></div>
</div>
</div>
<div class="section" id="forms-add-or-remove-fields">
<h4>Forms - Add or remove fields<a class="headerlink" href="#forms-add-or-remove-fields" title="Permalink to this headline">¶</a></h4>
<p>Define what columns will be included on Add or Edit forms,
for example if you have automatic fields like user or date, you can remove them from the Add Form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
    <span class="n">add_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;my_field1&#39;</span><span class="p">,</span> <span class="s1">&#39;my_field2&#39;</span><span class="p">]</span>
    <span class="n">edit_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;my_field1&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>To contribute with any additional fields that are not on a table/model,
for example a confirmation field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">add_form_extra_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;extra&#39;</span><span class="p">:</span> <span class="n">TextField</span><span class="p">(</span><span class="n">gettext</span><span class="p">(</span><span class="s1">&#39;Extra Field&#39;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="n">gettext</span><span class="p">(</span><span class="s1">&#39;Extra Field description&#39;</span><span class="p">),</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">BS3TextFieldWidget</span><span class="p">())</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="forms-readonly-fields">
<h4>Forms - Readonly fields<a class="headerlink" href="#forms-readonly-fields" title="Permalink to this headline">¶</a></h4>
<p>Define/override readonly fields like this, first define a new <strong>Readonly</strong> field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.fieldwidgets</span> <span class="k">import</span> <span class="n">BS3TextFieldWidget</span>


<span class="k">class</span> <span class="nc">BS3TextFieldROWidget</span><span class="p">(</span><span class="n">BS3TextFieldWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;readonly&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">BS3TextFieldROWidget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Next override your field using your new widget:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExampleView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">ExampleModel</span><span class="p">)</span>
    <span class="n">edit_form_extra_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;field2&#39;</span><span class="p">:</span> <span class="n">TextField</span><span class="p">(</span><span class="s1">&#39;field2&#39;</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">BS3TextFieldROWidget</span><span class="p">())</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Readonly select fields are a special case, but it’s solved in a simpler way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the field query</span>
<span class="k">def</span> <span class="nf">department_query</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Department</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">EmployeeView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Employee</span><span class="p">)</span>

    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;employee_number&#39;</span><span class="p">,</span> <span class="s1">&#39;full_name&#39;</span><span class="p">,</span> <span class="s1">&#39;department&#39;</span><span class="p">]</span>

    <span class="c1"># override the &#39;department&#39; field, to make it readonly on edit form</span>
    <span class="n">edit_form_extra_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;department&#39;</span><span class="p">:</span>  <span class="n">QuerySelectField</span><span class="p">(</span>
                            <span class="s1">&#39;Department&#39;</span><span class="p">,</span>
                            <span class="n">query_factory</span><span class="o">=</span><span class="n">department_query</span><span class="p">,</span>
                            <span class="n">widget</span><span class="o">=</span><span class="n">Select2Widget</span><span class="p">(</span><span class="n">extra_classes</span><span class="o">=</span><span class="s2">&quot;readonly&quot;</span><span class="p">)</span>
                       <span class="p">)</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="forms-custom-validation-rules">
<h4>Forms - Custom validation rules<a class="headerlink" href="#forms-custom-validation-rules" title="Permalink to this headline">¶</a></h4>
<p>Contribute with your own additional form validations rules.
Remember FAB will automatically validate any field that is defined on the database
with <em>Not Null</em> (Required) or Unique constraints:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
    <span class="n">validators_columns</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;my_field1&#39;</span><span class="p">:[</span><span class="n">EqualTo</span><span class="p">(</span><span class="s1">&#39;my_field2&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">gettext</span><span class="p">(</span><span class="s1">&#39;fields must match&#39;</span><span class="p">))]</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="forms-custom-query-on-related-fields">
<h4>Forms - Custom query on related fields<a class="headerlink" href="#forms-custom-query-on-related-fields" title="Permalink to this headline">¶</a></h4>
<p>You can create a custom query filter for all related columns like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.filters</span> <span class="k">import</span> <span class="n">FilterStartsWith</span>


<span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">add_form_query_rel_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">FilterStartsWith</span><span class="p">,</span> <span class="s1">&#39;W&#39;</span><span class="p">]]}</span>
</pre></div>
</div>
<p>This will filter list combo on Contact’s model related with ContactGroup model.
The combo will be filtered with entries that start with W.
You can define individual filters for add,edit and search using <strong>add_form_quey_rel_fields</strong>,
<strong>edit_form_query_rel_fields</strong>, <strong>search_form_query_rel_fields</strong> respectively. Take a look at the <a class="reference internal" href="index.html#document-api"><span class="doc">API Reference</span></a>
If you want to filter multiple related fields just add new keys to the dictionary,
remember you can add multiple filters for each field also, take a look at the <em>base_filter</em> property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">add_form_query_rel_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">FilterStartsWith</span><span class="p">,</span> <span class="s1">&#39;W&#39;</span><span class="p">]],</span>
        <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">FilterStartsWith</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">]]</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="forms-related-fields">
<h4>Forms - Related fields<a class="headerlink" href="#forms-related-fields" title="Permalink to this headline">¶</a></h4>
<p>To use AJAX select2 (combo) fields and make use of the REST API, by default all fields are previously populated on the server.
Here’s a simple example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>

    <span class="n">add_form_extra_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;contact_group&#39;</span><span class="p">:</span> <span class="n">AJAXSelectField</span><span class="p">(</span>
                            <span class="s1">&#39;contact_group&#39;</span><span class="p">,</span>
                            <span class="n">description</span><span class="o">=</span><span class="s1">&#39;This will be populated with AJAX&#39;</span><span class="p">,</span>
                            <span class="n">datamodel</span><span class="o">=</span><span class="n">datamodel</span><span class="p">,</span>
                            <span class="n">col_name</span><span class="o">=</span><span class="s1">&#39;contact_group&#39;</span><span class="p">,</span>
                            <span class="n">widget</span><span class="o">=</span><span class="n">Select2AJAXWidget</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;/contactmodelview/api/column/add/contact_group&#39;</span><span class="p">)</span>
                         <span class="p">),</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Even better you can (since 1.7.0) create related select2 fields, if you have two (or more) relationships that are
related them self’s, like a group and subgroup on a contact, when the user selects the group the second select2 combo
will be populated with the subgroup values that belong to the group. Extending the previous example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>

    <span class="n">add_form_extra_fields</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;contact_group&#39;</span><span class="p">:</span> <span class="n">AJAXSelectField</span><span class="p">(</span><span class="s1">&#39;contact_group&#39;</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;This will be populated with AJAX&#39;</span><span class="p">,</span>
                    <span class="n">datamodel</span><span class="o">=</span><span class="n">datamodel</span><span class="p">,</span>
                    <span class="n">col_name</span><span class="o">=</span><span class="s1">&#39;contact_group&#39;</span><span class="p">,</span>
                    <span class="n">widget</span><span class="o">=</span><span class="n">Select2AJAXWidget</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;/contactmodelview/api/column/add/contact_group&#39;</span><span class="p">)),</span>

                    <span class="s1">&#39;contact_sub_group&#39;</span><span class="p">:</span> <span class="n">AJAXSelectField</span><span class="p">(</span><span class="s1">&#39;Extra Field2&#39;</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Extra Field description&#39;</span><span class="p">,</span>
                    <span class="n">datamodel</span><span class="o">=</span><span class="n">datamodel</span><span class="p">,</span>
                    <span class="n">col_name</span><span class="o">=</span><span class="s1">&#39;contact_sub_group&#39;</span><span class="p">,</span>
                    <span class="n">widget</span><span class="o">=</span><span class="n">Select2SlaveAJAXWidget</span><span class="p">(</span><span class="n">master_id</span><span class="o">=</span><span class="s1">&#39;contact_group&#39;</span><span class="p">,</span>
                    <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;/contactmodelview/api/column/add/contact_sub_group?_flt_0_contact_group_id={{ID}}&#39;</span><span class="p">))</span>
                    <span class="p">}</span>
</pre></div>
</div>
<p>So as seen before add_form_extra_fields is a dictionary that expects keys as column names and values as WTF Fields.</p>
<p>AJAXSelectField is expecting the following parameters for the constructor:
- label: A label for the column.
- description: A description to render on the form.
- datamodel: SQLAlchemy initialized with the model.
- col_name: The column name.
- widget: Use Select2AJAXWidget (for the master) and Select2SlaveAJAXWidget for the slave.
- endpoint: The REST API that will be used to populate the select2.</p>
<p>You have 3 endpoint’s API that will return data ready to use by this fields:</p>
<ul class="simple">
<li>/&lt;YOUR MODELVIEW NAME&gt;/api/column/add|edit/&lt;COLUMN NAME&gt; : you can append query string’s to filter data. This will return all values of the related column on the model.</li>
<li>/&lt;YOUR MODELVIEW NAME&gt;/api/readvalues: This will return all values on the modelview prepared to be used on a select2.</li>
</ul>
</div>
</div>
<span id="document-customizing"></span><div class="section" id="customizing">
<h3>Customizing<a class="headerlink" href="#customizing" title="Permalink to this headline">¶</a></h3>
<p>You can override and customize almost everything on the UI, or use different templates and widgets already on the framework.</p>
<p>Even better you can develop your own widgets or templates and contribute to the project.</p>
<div class="section" id="changing-themes">
<h4>Changing themes<a class="headerlink" href="#changing-themes" title="Permalink to this headline">¶</a></h4>
<p>F.A.B comes with bootswatch themes ready to use, to change bootstrap default theme just change the APP_THEME key’s value.</p>
<ul>
<li><p class="first">On config.py (from flask-appbuilder-skeleton), using spacelab theme:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">APP_THEME</span> <span class="o">=</span> <span class="s2">&quot;spacelab.css&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">Not using a config.py on your applications, set the key like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;APP_THEME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;spacelab.css&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p>You can choose from the following <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder-Skeleton/blob/master/config.py">themes</a></p>
</div>
<div class="section" id="changing-the-index">
<h4>Changing the index<a class="headerlink" href="#changing-the-index" title="Permalink to this headline">¶</a></h4>
<p>The index can be easily overridden by your own.
You must develop your template, then define it in a IndexView and pass it to AppBuilder</p>
<p>The default index template is very simple, you can create your own like this:</p>
<p>1 - Develop your template (on your &lt;PROJECT_NAME&gt;/app/templates/my_index.html):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;appbuilder/base.html&quot;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">content</span> <span class="o">%</span><span class="p">}</span>
<span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;jumbotron&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;container&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;My App on F.A.B.&quot;</span><span class="p">)}}</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;My first app using F.A.B, bla, bla, bla&quot;</span><span class="p">)}}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>What happened here? We should always extend from “appbuilder/base.html” this is the base template that will include all CSS’s, Javascripts, and construct the menu based on the user’s security definition.</p>
<p>Next we will override the “content” block, we could override other areas like CSS, extend CSS, Javascript or extend javascript. We can even override the base.html completely</p>
<p>I’ve presented the text on the content like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;text to be translated&quot;</span><span class="p">)}}</span>
</pre></div>
</div>
<p>So that we can use Babel to translate our index text</p>
<p>2 - Define an IndexView</p>
<p>Define a special and simple view inherit from IndexView, don’t define this view on views.py, put it on a separate file like index.py:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">IndexView</span>


<span class="k">class</span> <span class="nc">MyIndexView</span><span class="p">(</span><span class="n">IndexView</span><span class="p">):</span>
    <span class="n">index_template</span> <span class="o">=</span> <span class="s1">&#39;my_index.html&#39;</span>
</pre></div>
</div>
<p>3 - Tell F.A.B to use your index view, when initializing AppBuilder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">app.index</span> <span class="k">import</span> <span class="n">MyIndexView</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLA</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">,</span> <span class="n">indexview</span><span class="o">=</span><span class="n">MyIndexView</span><span class="p">)</span>
</pre></div>
</div>
<p>Of course you can use a more complex index view, you can use any kind of view (BaseView childs), you can even
change relative url path to whatever you want, remember to set <strong>default_view</strong> to your function.</p>
<p>You can override <strong>IndexView</strong> index function to display a different view if a user is logged in or not.</p>
</div>
<div class="section" id="changing-the-footer">
<h4>Changing the Footer<a class="headerlink" href="#changing-the-footer" title="Permalink to this headline">¶</a></h4>
<p>The default footer can be easily changed by your own. You must develop your template,
to override the existing one.</p>
<p>Develop your jinja2 template and place it on the following relative path to override the F.A.B footer.</p>
<p>./your_root_project_path/app/templates/appbuilder/footer.html</p>
<p>Actually you can override any given F.A.B. template.</p>
</div>
<div class="section" id="changing-menu-construction">
<h4>Changing Menu Construction<a class="headerlink" href="#changing-menu-construction" title="Permalink to this headline">¶</a></h4>
<p>You can change the way the menu is constructed adding your own links, separators and changing the navbar reverse property.</p>
<p>By default menu is constructed based on your classes and in a reversed navbar. Let’s take a quick look on how to easily change this</p>
<blockquote>
<div><ul>
<li><p class="first">Change the reversed navbar style, on AppBuilder initialization:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">Menu</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p class="first">Add your own menu links, on a default reversed navbar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Register a view, rendering a top menu without icon</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyModelView</span><span class="p">,</span> <span class="s2">&quot;My View&quot;</span><span class="p">)</span>
<span class="c1"># Register a view, a submenu &quot;Other View&quot; from &quot;Other&quot; with a phone icon</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyOtherModelView</span><span class="p">,</span> <span class="s2">&quot;Other View&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;fa-phone&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Others&quot;</span><span class="p">)</span>
<span class="c1"># Register a view, with label for babel support (internationalization), setup an icon for the category.</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyOtherModelView</span><span class="p">,</span> <span class="s2">&quot;Other View&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;fa-phone&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Other View&#39;</span><span class="p">),</span>
                <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Others&quot;</span><span class="p">,</span> <span class="n">category_label</span><span class="o">=</span><span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Other&#39;</span><span class="p">),</span> <span class="n">category_label</span><span class="o">=</span><span class="s1">&#39;fa-envelope&#39;</span><span class="p">)</span>
<span class="c1"># Add a link</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;www.google.com&quot;</span><span class="p">,</span> <span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa-google-plus&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Add separators:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Register a view, rendering a top menu without icon</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyModelView1</span><span class="p">,</span> <span class="s2">&quot;My View 1&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;My Views&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyModelView2</span><span class="p">,</span> <span class="s2">&quot;My View 2&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;My Views&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_separator</span><span class="p">(</span><span class="s2">&quot;My Views&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyModelView3</span><span class="p">,</span> <span class="s2">&quot;My View 3&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;My Views&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>Using <em>label</em> argument is optional for view name or category, but it’s advised for internationalization, if you use it with Babel’s <em>lazy_gettext</em> function it will automate translation’s extraction.</p>
<p>Category icon and label can be setup only for the first time. Internally F.A.B. has already stored it, next references will be made by name.</p>
</div>
<div class="section" id="changing-widgets-and-templates">
<h4>Changing Widgets and Templates<a class="headerlink" href="#changing-widgets-and-templates" title="Permalink to this headline">¶</a></h4>
<p>F.A.B. has a collection of widgets to change your views presentation,
you can create your own and override,
or (even better) create them and contribute to the project on git.</p>
<p>All views have templates that will display widgets in a certain layout.
For example, on the edit or show view, you can display the related list (from <em>related_views</em>) on the same page,
or as tab (default).:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ServerDiskTypeModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">ServerDiskType</span><span class="p">)</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">,</span> <span class="s1">&#39;disktype&#39;</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">ServerModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Server</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">ServerDiskTypeModelView</span><span class="p">]</span>

    <span class="n">show_template</span> <span class="o">=</span> <span class="s1">&#39;appbuilder/general/model/show_cascade.html&#39;</span>
    <span class="n">edit_template</span> <span class="o">=</span> <span class="s1">&#39;appbuilder/general/model/edit_cascade.html&#39;</span>

    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;serial&#39;</span><span class="p">]</span>
    <span class="n">order_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;serial&#39;</span><span class="p">]</span>
    <span class="n">search_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;serial&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The above example will override the show and edit templates that will change the related lists layout presentation.</p>
<a class="reference internal image-reference" href="_images/list_cascade.png"><img alt="_images/list_cascade.png" src="_images/list_cascade.png" style="width: 100%;" /></a>
<p>If you want to change the above example, and change the way the server disks are displayed has a list just use the available widgets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ServerDiskTypeModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">ServerDiskType</span><span class="p">)</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">,</span> <span class="s1">&#39;disktype&#39;</span><span class="p">]</span>
    <span class="n">list_widget</span> <span class="o">=</span> <span class="n">ListBlock</span>


<span class="k">class</span> <span class="nc">ServerModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Server</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">ServerDiskTypeModelView</span><span class="p">]</span>

    <span class="n">show_template</span> <span class="o">=</span> <span class="s1">&#39;appbuilder/general/model/show_cascade.html&#39;</span>
    <span class="n">edit_template</span> <span class="o">=</span> <span class="s1">&#39;appbuilder/general/model/edit_cascade.html&#39;</span>

    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;serial&#39;</span><span class="p">]</span>
    <span class="n">order_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;serial&#39;</span><span class="p">]</span>
    <span class="n">search_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;serial&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>We have overridden the list_widget property with the ListBlock Class. This will look like this.</p>
<a class="reference internal image-reference" href="_images/list_cascade_block.png"><img alt="_images/list_cascade_block.png" src="_images/list_cascade_block.png" style="width: 100%;" /></a>
<p>You have the following widgets already available</p>
<ul class="simple">
<li>ListWidget (default)</li>
<li>ListItem</li>
<li>ListThumbnail</li>
<li>ListBlock</li>
</ul>
<p>If you want to develop your own widgets just look at the
<a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/flask_appbuilder/templates/appbuilder/general/widgets">code</a></p>
<p>Read the docs for developing your own template widgets <a class="reference internal" href="index.html#document-templates"><span class="doc">Templates</span></a></p>
<p>Implement your own and then create a very simple class like this one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyWidgetList</span><span class="p">(</span><span class="n">ListWidget</span><span class="p">):</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;/widgets/my_widget_list.html&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="change-default-view-behaviour">
<h4>Change Default View Behaviour<a class="headerlink" href="#change-default-view-behaviour" title="Permalink to this headline">¶</a></h4>
<p>If you want to have Add, edit and list on the same page, this can be done. This could be very helpful on master/detail lists (inline) on views based on tables with very few columns.</p>
<p>All you have to do is to mix <em>CompactCRUDMixin</em> class with the <em>ModelView</em> class.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.views</span> <span class="k">import</span> <span class="n">ModelView</span><span class="p">,</span> <span class="n">CompactCRUDMixin</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">appbuilder</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="k">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">ProjectFiles</span>


<span class="k">class</span> <span class="nc">MyInlineView</span><span class="p">(</span><span class="n">CompactCRUDMixin</span><span class="p">,</span> <span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyInlineTable</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyViewTable</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">MyInlineView</span><span class="p">]</span>

<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyView</span><span class="p">,</span> <span class="s2">&quot;List My View&quot;</span><span class="p">,</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa-table&quot;</span><span class="p">,</span> <span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;My Views&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view_no_menu</span><span class="p">(</span><span class="n">MyInlineView</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice the class mixin, with this configuration you will have a <em>Master View</em> with the inline view <em>MyInlineView</em> where you can Add and Edit on the same page.</p>
<p>Of course you could use the mixin on <em>MyView</em> also, use it only on ModelView classes.</p>
<p>Take a look at the example: <a class="reference external" href="https://github.com/dpgaspar/Flask-appBuilder/tree/master/examples/quickfiles">https://github.com/dpgaspar/Flask-appBuilder/tree/master/examples/quickfiles</a></p>
<a class="reference internal image-reference" href="_images/list_compact_inline.png"><img alt="_images/list_compact_inline.png" src="_images/list_compact_inline.png" style="width: 100%;" /></a>
<p>Next we will take a look at a different view behaviour. A master detail style view, master is a view associated with a database table that is linked to the detail view.</p>
<p>Let’s assume our quick how to example, a simple contacts applications. We have <em>Contact</em> table related with <em>Group</em> table.</p>
<p>So we are using master detail view, first we will define the detail view (this view can be customized like the examples above):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
</pre></div>
</div>
<p>Then we define the master detail view, where master is the one side of the 1-N relation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GroupMasterView</span><span class="p">(</span><span class="n">MasterDetailView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Group</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">ContactModelView</span><span class="p">]</span>
</pre></div>
</div>
<p>Remember you can use charts has related views, you can use it like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactTimeChartView</span><span class="p">(</span><span class="n">TimeChartView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="s1">&#39;Grouped Birth contacts&#39;</span>
    <span class="n">chart_type</span> <span class="o">=</span> <span class="s1">&#39;AreaChart&#39;</span>
    <span class="n">label_columns</span> <span class="o">=</span> <span class="n">ContactModelView</span><span class="o">.</span><span class="n">label_columns</span>
    <span class="n">group_by_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;birthday&#39;</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">GroupMasterView</span><span class="p">(</span><span class="n">MasterDetailView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Group</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">ContactModelView</span><span class="p">,</span> <span class="n">ContactTimeChartView</span><span class="p">]</span>
</pre></div>
</div>
<p>This will show a left side menu with the <em>groups</em> and a right side list with contacts, and a time chart with the number of birthdays during time by the selected group.</p>
<p>Finally register everything:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="k">if</span> <span class="n">Using</span> <span class="n">the</span> <span class="n">above</span> <span class="n">example</span> <span class="k">with</span> <span class="n">related</span> <span class="n">chart</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view_no_menu</span><span class="p">(</span><span class="n">ContactTimeChartView</span><span class="p">)</span>

<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">GroupMasterView</span><span class="p">,</span> <span class="s2">&quot;List Groups&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-folder-open-o&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_separator</span><span class="p">(</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ContactModelView</span><span class="p">,</span> <span class="s2">&quot;List Contacts&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-envelope&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/list_master_detail.png"><img alt="_images/list_master_detail.png" src="_images/list_master_detail.png" style="width: 100%;" /></a>
</div>
</div>
<span id="document-templates"></span><div class="section" id="templates">
<h3>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h3>
<p>F.A.B. uses jinja2, all the framework templates can be overridden entirely or partially.
This way you can add your own html on jinja2 templates.
This can be done before or after defined blocks on the page,
without the need of developing a template from scratch because you just want to add small changes on it.
Next is a quick description on how you can do this</p>
<div class="section" id="css-and-javascript">
<h4>CSS and Javascript<a class="headerlink" href="#css-and-javascript" title="Permalink to this headline">¶</a></h4>
<p>To add your own CSS’s or javascript application wide.
You will need to tell the framework to use your own base <em>jinja2</em> template, this
template is extended by all the templates. It’s very simple, first create your own
template on you <strong>templates</strong> directory.</p>
<p>On a simple application structure create <em>mybase.html</em> (or whatever name you want):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">my_project</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">app</span><span class="o">&gt;</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
        <span class="n">models</span><span class="o">.</span><span class="n">py</span>
        <span class="n">views</span><span class="o">.</span><span class="n">py</span>
        <span class="o">&lt;</span><span class="n">templates</span><span class="o">&gt;</span>
            <span class="o">**</span><span class="n">mybase</span><span class="o">.</span><span class="n">html</span><span class="o">**</span>
</pre></div>
</div>
<p>Then on mybase.html add your js files and css files, use <strong>head_css</strong> for css’s and <strong>head_js</strong> for javascript.
These are <em>jinja2</em> blocks, F.A.B. uses them so that you can override or extend critical parts of the default
templates, making it easy to change the UI, without having to develop your own from scratch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s1">&#39;appbuilder/baselayout.html&#39;</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">head_css</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s2">&quot;stylesheet&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;{{url_for(&#39;static&#39;,filename=&#39;css/your_css_file.css&#39;)}}&quot;</span><span class="o">&gt;&lt;/</span><span class="n">link</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">head_js</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
    <span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;{{url_for(&#39;static&#39;,filename=&#39;js/your_js_file.js&#39;)}}&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>If you want to import your javascript files at the end of the templates use <strong>tail_js</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">tail_js</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
    <span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;{{url_for(&#39;static&#39;,filename=&#39;js/your_js_file.js&#39;)}}&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>Finally tell the framework to use it, instead of the default base template,
when initializing on __init__.py use the <em>base_template</em> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">,</span> <span class="n">base_template</span><span class="o">=</span><span class="s1">&#39;mybase.html&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You have an example that changes the way the menu is displayed on
<a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quicktemplates">examples</a></p>
<p>This main structure of jinja2 on the baselayout template is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">head_meta</span> <span class="o">%</span><span class="p">}</span>
    <span class="o">...</span> <span class="n">HTML</span> <span class="n">Meta</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">head_css</span> <span class="o">%</span><span class="p">}</span>
    <span class="o">...</span> <span class="n">CSS</span> <span class="n">imports</span> <span class="p">(</span><span class="n">bootstrap</span><span class="p">,</span> <span class="n">fontAwesome</span><span class="p">,</span> <span class="n">select2</span><span class="p">,</span> <span class="n">fab</span> <span class="n">specific</span> <span class="n">etc</span><span class="o">...</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">head_js</span> <span class="o">%</span><span class="p">}</span>
    <span class="o">...</span> <span class="n">JS</span> <span class="n">imports</span> <span class="p">(</span><span class="n">JQuery</span><span class="p">,</span> <span class="n">fab</span> <span class="n">specific</span><span class="p">)</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">body</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">navbar</span> <span class="o">%</span><span class="p">}</span>
        <span class="o">...</span> <span class="n">The</span> <span class="n">navigation</span> <span class="n">bar</span> <span class="p">(</span><span class="n">Menu</span><span class="p">)</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
     <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">messages</span> <span class="o">%</span><span class="p">}</span>
        <span class="o">...</span> <span class="n">Where</span> <span class="n">the</span> <span class="n">flask</span> <span class="n">flash</span> <span class="n">messages</span> <span class="n">are</span> <span class="n">shown</span> <span class="p">(</span><span class="s2">&quot;Added row&quot;</span><span class="p">,</span> <span class="n">etc</span><span class="p">)</span>
      <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
      <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">content</span> <span class="o">%</span><span class="p">}</span>
        <span class="o">...</span> <span class="n">All</span> <span class="n">the</span> <span class="n">content</span> <span class="n">goes</span> <span class="n">here</span><span class="p">,</span> <span class="n">forms</span><span class="p">,</span> <span class="n">lists</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">charts</span> <span class="n">etc</span><span class="o">..</span>
      <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">footer</span> <span class="o">%</span><span class="p">}</span>
        <span class="o">...</span> <span class="n">The</span> <span class="n">footer</span><span class="p">,</span> <span class="n">by</span> <span class="n">default</span> <span class="n">its</span> <span class="n">almost</span> <span class="n">empty</span><span class="o">.</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">tail_js</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="navigation-bar">
<h4>Navigation Bar<a class="headerlink" href="#navigation-bar" title="Permalink to this headline">¶</a></h4>
<p>Theres also the possibility to customize the navigation bar.
You can completely override it, or just partially.</p>
<p>To completely override the navigation bar, implement your own base layout as described earlier
and then extend the existing one and override the <strong>navbar</strong> block</p>
<p>As an example, lets say you created your own base layout named <strong>my_layout.html</strong>
on your <strong>templates</strong> folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s1">&#39;appbuilder/baselayout.html&#39;</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">navbar</span> <span class="o">%</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;navbar&quot;</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;navigation&quot;</span><span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;container&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;navbar-header&quot;</span><span class="o">&gt;</span>
                    <span class="o">....</span>
            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;navbar-collapse collapse&quot;</span><span class="o">&gt;</span>
                    <span class="o">....</span>
            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
       <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>Remember to tell Flask-Appbuilder to use your layout instead (previous chapter)</p>
<p>The best way to just override the navbar partially is to override the existing templates
from the framework. You can always do this with any template. There are two good candidates for this:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">/templates/appbuilder/navbar_menu.html:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">This will render the navbar menus.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">/templates/appbuilder/navbar_right.html:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">This will render the right part of the navigation bar (locale and user).</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="list-templates">
<h4>List Templates<a class="headerlink" href="#list-templates" title="Permalink to this headline">¶</a></h4>
<p>Using the contacts app example, we are going to see how to override or insert jinja2 on specific sections
of F.A.B. list template. Remember that the framework uses templates with generated widgets, this widgets are big
widgets, because they render entire sections of a page.
On list’s of records you will have two widgets, the search widget, and the list widget. You will have
a template with the following sections, where you can add your template sections over, before and after
each block:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>List template</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Block “content”</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Block “list_search”</dt>
<dd><ul class="first last">
<li>Search Widget</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “list_search”</li>
<li><dl class="first docutils">
<dt>Block “list_list”</dt>
<dd><ul class="first last">
<li>List Widget</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “list_list”</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “content”</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>To insert your template section over a block, say “list_search” just do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;appbuilder/general/model/list.html&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">list_search</span> <span class="n">scoped</span> <span class="o">%</span><span class="p">}</span>
        <span class="n">This</span> <span class="n">Text</span> <span class="n">will</span> <span class="n">replace</span> <span class="n">the</span> <span class="n">search</span> <span class="n">widget</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>To insert your template section after a block do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;appbuilder/general/model/list.html&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">list_search</span> <span class="n">scoped</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
        <span class="n">This</span> <span class="n">Text</span> <span class="n">will</span> <span class="n">show</span> <span class="n">after</span> <span class="n">the</span> <span class="n">search</span> <span class="n">widget</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>I guess you get the general ideal, make use of {{ super() }} to render the block’s original content.
To use your templates override <strong>list_template</strong> to your templates relative path, on your ModelView’s declaration.</p>
<p>If you have your template on ./your_project/app/templates/list_contacts.html</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">list_template</span> <span class="o">=</span> <span class="s1">&#39;list_contacts.html&#39;</span>
</pre></div>
</div>
<p>On your template you can do something like this</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;appbuilder/general/model/list.html&quot;</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">content</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">Text</span> <span class="n">on</span> <span class="n">top</span> <span class="n">of</span> <span class="n">the</span> <span class="n">page</span>
    <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">list_search</span> <span class="n">scoped</span> <span class="o">%</span><span class="p">}</span>
        <span class="n">Text</span> <span class="n">before</span> <span class="n">the</span> <span class="n">search</span> <span class="n">section</span>
        <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">list_list</span> <span class="n">scoped</span> <span class="o">%</span><span class="p">}</span>
        <span class="n">Text</span> <span class="n">before</span> <span class="n">the</span> <span class="nb">list</span>
        <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="add-templates">
<h4>Add Templates<a class="headerlink" href="#add-templates" title="Permalink to this headline">¶</a></h4>
<p>On this section we will see how to override the add template form.
You will have only one widget, the add form widget. So you will have
a template with the following sections. Where you can add your template sections over, before and after
each block:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Add template</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Block “content”</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Block “add_form”</dt>
<dd><ul class="first last">
<li>Add Widget</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “add_form”</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “content”</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>To insert your template section before the a block, say “add_form” just create your own template like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;appbuilder/general/model/add.html&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">add_form</span> <span class="o">%</span><span class="p">}</span>
        <span class="n">This</span> <span class="n">Text</span> <span class="ow">is</span> <span class="n">before</span> <span class="n">the</span> <span class="n">add</span> <span class="n">form</span> <span class="n">widget</span>
        <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>To use your template define you ModelView with <strong>add_template</strong> declaration to your templates relative path</p>
<p>If you have your template on ./your_project/app/templates/add_contacts.html</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>

    <span class="n">add_template</span> <span class="o">=</span> <span class="s1">&#39;add_contacts.html&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="edit-templates">
<h4>Edit Templates<a class="headerlink" href="#edit-templates" title="Permalink to this headline">¶</a></h4>
<p>On this section we will see how to override the edit template form.
You will have only one widget the edit form widget, so you will have
a template with the following sections, where you can add your template sections over, before and after
each block:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Add template</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Block “content”</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Block “edit_form”</dt>
<dd><ul class="first last">
<li>Edit Widget</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “edit_form”</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “content”</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>To insert your template section before the edit widget, just create your own template like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;appbuilder/general/model/edit.html&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">add_form</span> <span class="o">%</span><span class="p">}</span>
        <span class="n">This</span> <span class="n">Text</span> <span class="ow">is</span> <span class="n">before</span> <span class="n">the</span> <span class="n">add</span> <span class="n">form</span> <span class="n">widget</span>
        <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>To use your template define you ModelView with <strong>edit_template</strong> declaration to your templates relative path</p>
<p>If you have your template on ./your_project/app/templates/edit_contacts.html</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>

    <span class="n">edit_template</span> <span class="o">=</span> <span class="s1">&#39;edit_contacts.html&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="show-templates">
<h4>Show Templates<a class="headerlink" href="#show-templates" title="Permalink to this headline">¶</a></h4>
<p>On this section we will see how to override the show template.
You will have only one widget the show widget, so you will have
a template with the following sections, where you can add your template sections over, before and after
each block:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Show template</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Block “content”</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Block “show_form”</dt>
<dd><ul class="first last">
<li>Show Widget</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “show_form”</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “content”</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>To insert your template section before the a block, say “show_form” just create your own template like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;appbuilder/general/model/edit.html&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">show_form</span> <span class="o">%</span><span class="p">}</span>
        <span class="n">This</span> <span class="n">Text</span> <span class="ow">is</span> <span class="n">before</span> <span class="n">the</span> <span class="n">show</span> <span class="n">widget</span>
        <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>To use your template define you ModelView with <strong>edit_template</strong> declaration to your templates relative path</p>
<p>If you have your template on ./your_project/app/templates/edit_contacts.html</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>

    <span class="n">edit_template</span> <span class="o">=</span> <span class="s1">&#39;edit_contacts.html&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="edit-show-cascade-templates">
<h4>Edit/Show Cascade Templates<a class="headerlink" href="#edit-show-cascade-templates" title="Permalink to this headline">¶</a></h4>
<p>On cascade templates for related views the above rules apply, but you can use an extra block
to insert your template code before, after or over the related view list widget.
For show cascade templates you have the following structure:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Show template</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Block “content”</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Block “show_form”</dt>
<dd><ul class="first last">
<li>Show Widget</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “show_form”</li>
<li><dl class="first docutils">
<dt>Block “related_views”</dt>
<dd><ul class="first last">
<li>Related Views Widgets</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “related_views”</li>
</ul>
</dd>
</dl>
</li>
<li>End Block “content”</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="widgets">
<h4>Widgets<a class="headerlink" href="#widgets" title="Permalink to this headline">¶</a></h4>
<p>Widgets are reusable, you can and should implement your own. Widgets are a special kind of jinja2
templates. They will be contained inside a python class, and rendered on a jinja2 template. So
<strong>list_template</strong>, <strong>add_template</strong>, <strong>edit_template</strong>, <strong>show_template</strong> will work like layouts
with widgets.</p>
<p>To create your own widgets follow the next recipe.</p>
<ul>
<li><p class="first">Make your own widget template, we are going to create a very simple list widget.
since version 1.4.1 list widgets extend <strong>base_list.html</strong> this will make your life
simpler, this base template declares the following blocks you should use, when implementing
your own widget for lists:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">list_header</span> <span class="n">scoped</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">This</span> <span class="ow">is</span> <span class="n">where</span> <span class="n">the</span> <span class="nb">list</span> <span class="n">controls</span> <span class="n">are</span> <span class="n">rendered</span><span class="p">,</span> <span class="n">extend</span> <span class="n">it</span> <span class="n">to</span> <span class="o">*</span><span class="n">inject</span><span class="o">*</span> <span class="n">your</span> <span class="n">own</span> <span class="n">controls</span><span class="o">.</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">begin_content</span> <span class="n">scoped</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">Area</span> <span class="nb">next</span> <span class="n">to</span> <span class="n">the</span> <span class="n">controls</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">begin_loop_header</span> <span class="n">scoped</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">Nice</span> <span class="n">place</span> <span class="n">to</span> <span class="n">render</span> <span class="n">your</span> <span class="nb">list</span> <span class="n">headers</span><span class="o">.</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">begin_loop_values</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">Make</span> <span class="n">your</span> <span class="n">loop</span> <span class="ow">and</span> <span class="n">render</span> <span class="n">the</span> <span class="nb">list</span> <span class="n">itself</span><span class="o">.</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
<p>Let’s make a simple example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="kn">import</span> <span class="s1">&#39;appbuilder/general/lib.html&#39;</span> <span class="k">as</span> <span class="n">lib</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s1">&#39;appbuilder/general/widgets/base_list.html&#39;</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">list_header</span> <span class="o">%</span><span class="p">}</span>
   <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>
   <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;url_for(&#39;Class.method for my control&#39;)&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-sm btn-primary&quot;</span>
        <span class="o">&lt;</span><span class="n">i</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;fa fa-rocket&quot;</span><span class="o">&gt;&lt;/</span><span class="n">i</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">begin_loop_values</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value_columns</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{</span><span class="o">%</span> <span class="nb">set</span> <span class="n">pk</span> <span class="o">=</span> <span class="n">pks</span><span class="p">[</span><span class="n">loop</span><span class="o">.</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">actions</span> <span class="o">%</span><span class="p">}</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;{{pk}}&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;action_check&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;rowid&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;{{pk}}&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;checkbox&quot;</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">can_show</span> <span class="ow">or</span> <span class="n">can_edit</span> <span class="ow">or</span> <span class="n">can_delete</span> <span class="o">%</span><span class="p">}</span>
            <span class="p">{{</span> <span class="n">lib</span><span class="o">.</span><span class="n">btn_crud</span><span class="p">(</span><span class="n">can_show</span><span class="p">,</span> <span class="n">can_edit</span><span class="p">,</span> <span class="n">can_delete</span><span class="p">,</span> <span class="n">pk</span><span class="p">,</span> <span class="n">modelview_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">)</span> <span class="p">}}</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>

        <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">include_columns</span> <span class="o">%</span><span class="p">}</span>
            <span class="o">&lt;</span><span class="n">p</span> <span class="p">{{</span> <span class="n">item</span><span class="p">[</span><span class="n">value</span><span class="p">]</span><span class="o">|</span><span class="n">safe</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>This example will just use two blocks <strong>list_header</strong> and <strong>begin_loop_values</strong>.
On <strong>list_header</strong> we are rendering an extra button/link to a class method.
Notice that first we call <strong>super()</strong> so that our control will be placed next to
pagination, add button and back button</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you just want to add a new control next to the list controls and keep everything else
from the predefined widget. extend your widget from {% extends ‘appbuilder/general/widgets/list.html’ %}
and just implement <strong>list_header</strong> the way it’s done on this example.</p>
</div>
<p>Next we will render the values of the list, so we will override the <strong>begin_loop_values</strong>
block. Widgets have the following jinja2 vars that you should use:</p>
<ul class="simple">
<li>can_show: Boolean, if the user as access to the show view.</li>
<li>can_edit: Boolean, if the user as access to the edit view.</li>
<li>can_add: Boolean, if the user as access to the add view.</li>
<li>can_delete: Boolean, if the user as access to delete records.</li>
<li>value_columns: A list of Dicts with column names as keys and record values as values.</li>
<li>include_columns: A list with columns to include on the list, and their order.</li>
<li>order_columns: A list with the columns that can be ordered.</li>
<li>pks: A list of primary key values.</li>
<li>actions: A list of declared actions.</li>
<li>modelview_name: The name of the ModelView class responsible for controlling this template.</li>
</ul>
<p>Save your widget template on your templates folder. I advise you to create a
subfolder named <em>widgets</em>. So on our example we will keep our template on
<em>/templates/widgets/my_list.html</em>.</p>
<ul>
<li><p class="first">Next we must create our python class to contain our widget. on your <strong>app</strong> folder
create a file named widgets.py:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.widgets</span> <span class="k">import</span> <span class="n">ListWidget</span>


<span class="k">class</span> <span class="nc">MyListWidget</span><span class="p">(</span><span class="n">ListWidget</span><span class="p">):</span>
     <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;widgets/my_list.html&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">Finnaly use your new widget on your views:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
    <span class="n">list_widget</span> <span class="o">=</span> <span class="n">MyListWidget</span>
</pre></div>
</div>
</li>
</ul>
<p>Flask-AppBuilder already has some widgets you can choose from, try them out:</p>
<ul class="simple">
<li>ListWidget - The default for lists.</li>
<li>ListLinkWidget - The default for lists.</li>
<li>ListThumbnail - For lists, nice to use with photos.</li>
<li>ListItem - Very simple list of items.</li>
<li>ListBlock - For lists, Similar to thumbnail.</li>
<li>FormWidget - For add and edit.</li>
<li>FormHorizontalWidget - For add and edit.</li>
<li>FormInlineWidget - For add and edit</li>
<li>ShowWidget - For show view.</li>
<li>ShowBlockWidget - For show view.</li>
<li>ShowVerticalWidget - For show view.</li>
</ul>
<p>Take a look at the <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/widgets">widgets</a> example.</p>
</div>
<div class="section" id="library-functions">
<h4>Library Functions<a class="headerlink" href="#library-functions" title="Permalink to this headline">¶</a></h4>
<p>F.A.B. has the following library functions that you can use to render bootstrap 3
components easily. Using them will ease your productivity and help you introduce
new html that shares the same look and feel has the framework.</p>
<ul>
<li><p class="first">Panel component:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">lib</span><span class="o">.</span><span class="n">panel_begin</span><span class="p">(</span><span class="s2">&quot;Panel&#39;s Title&quot;</span><span class="p">)</span> <span class="p">}}</span>
    <span class="n">Your</span> <span class="n">html</span> <span class="n">goes</span> <span class="n">here</span>
<span class="p">{{</span> <span class="n">lib</span><span class="o">.</span><span class="n">panel_end</span><span class="p">()</span> <span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">Accordion (pass your view’s name, or something that will serve as an id):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">call</span> <span class="n">lib</span><span class="o">.</span><span class="n">accordion_tag</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="s2">&quot;Accordion Title&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">Your</span> <span class="n">HTML</span> <span class="n">goes</span> <span class="n">here</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endcall</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-addons"></span><div class="section" id="addon-development">
<h3>AddOn development<a class="headerlink" href="#addon-development" title="Permalink to this headline">¶</a></h3>
<p>Using AddOn’s with the framework it a great way to develop your application
and make public openSource contributions to the community.</p>
<p>With it you can use a more modular design on your application, you can add functionality,
views and models that you can build independently and install or uninstall (using different versions).</p>
<p>To start building your own AddOn’s you can use issue the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flask fab create-addon --name first
</pre></div>
</div>
<p>Your addon name will be prefixed by ‘<a href="#id1"><span class="problematic" id="id2">fab_addon_</span></a>’ so this addon would be called <strong>fab_addon_first</strong>.
The create-addon will download a default skeleton addon for you to start more easily to code (much like the create-app
command).</p>
<p>The structure of the default base addon:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>&lt;fab_addon_first&gt;</dt>
<dd><ul class="first last">
<li>setup.py: Setup installer use it to install your addon, or upload it to Pypi when your ready to release.</li>
<li>config.py: Used internaly by setup.py, this will make your setup more generic.</li>
<li><dl class="first docutils">
<dt>&lt;fab_addon_first&gt;</dt>
<dd><ul class="first last">
<li>__init__.py: empty</li>
<li>models.py: Declare your addon’s models (if any) just like on a normal app.</li>
<li>views.py: Declare your addon’s views but don’t register them here.</li>
<li>manager.py: This is where your addon manager will reside, It’s your manager that will be imported by appbuilder.</li>
<li>version.py: Declare your addon version here, write your name (author), a small description and your email.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Your can use your addon much like a regular F.A.B. app, just don’t instantiate anything (appbuilder, flask, SQLAlchemy etc…)
notice, __init__.py module is empty. So if you or anyone (if you upload your addon to pypi or make it public somewhere
like github) want to use your addon they just have to install it and declare it using the ADDON_MANAGERS key, this
key is a list of addon manager’s.</p>
<p>So what is a manager? Manager is a class you declare that subclasses appbuilder BaseManager, and you have 4 important
methods you can override, there are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">__init__(self, appbuilder):</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Manager’s constructor. Good place to check for your addon’s specific keys. For custom configuration</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">register_views(self):</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Use it to register all your views and setup a menu for them (if you want to).</td>
</tr>
<tr class="field-odd field"><th class="field-name">pre_processs:</th><td class="field-body">Will be called before register_views. Good place to insert data into your models for example.</td>
</tr>
<tr class="field-even field"><th class="field-name">post_process:</th><td class="field-body">Will be called after register_views.</td>
</tr>
</tbody>
</table>
<p>A very simple manager would look something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">flask_appbuilder.basemanager</span> <span class="k">import</span> <span class="n">BaseManager</span>
<span class="kn">from</span> <span class="nn">flask_babelpkg</span> <span class="k">import</span> <span class="n">lazy_gettext</span> <span class="k">as</span> <span class="n">_</span>

<span class="kn">from</span> <span class="nn">.model</span> <span class="k">import</span> <span class="n">MyModel</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="k">import</span> <span class="n">FirstModelView1</span>


<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">FirstAddOnManager</span><span class="p">(</span><span class="n">BaseManager</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appbuilder</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">             Use the constructor to setup any config keys specific for your app.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FirstAddOnManager</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">appbuilder</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">register_views</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            This method is called by AppBuilder when initializing, use it to add you views</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">FirstModelView1</span><span class="p">,</span> <span class="s2">&quot;First View1&quot;</span><span class="p">,</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa-user&quot;</span><span class="p">,</span><span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;First AddOn&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pre_process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">stuff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">appbuilder</span><span class="o">.</span><span class="n">get_session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;something&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="c1"># process stuff</span>

    <span class="k">def</span> <span class="nf">post_process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>How can you or someone use your AddOn? On the app config.py add this key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ADDON_MANAGERS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fab_addon_first.manager.FirstAddOnManager&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>And thats it.</p>
<p>I’ve just added a simple audit modelViews’s addon to start contributions and to serve as an example.</p>
<p>you can install it using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install fab_addon_audit
</pre></div>
</div>
<p>The source code is pretty simple, use it as an example to write your own:</p>
<p><a class="reference external" href="https://github.com/dpgaspar/fab_addon_audit">https://github.com/dpgaspar/fab_addon_audit</a></p>
</div>
<span id="document-generic_datasource"></span><div class="section" id="generic-data-sources">
<h3>Generic Data Sources<a class="headerlink" href="#generic-data-sources" title="Permalink to this headline">¶</a></h3>
<p>This feature is still beta, but you can already use it, it allows you to use alternative/generic datasources.
With it you can use python libraries, systems commands or whatever with the framework as if they were
SQLAlchemy models.</p>
<div class="section" id="ps-command-example">
<h4>PS Command example<a class="headerlink" href="#ps-command-example" title="Permalink to this headline">¶</a></h4>
<p>Already on the framework, and intended to be an example, is a data source that holds the output from
the linux ‘ps -ef’ command, and shows it as if it were a SQLA model.</p>
<p>Your own generic data source must subclass from <strong>GenericSession</strong> and implement at least the <strong>all</strong> method</p>
<p>The <strong>GenericSession</strong> mimics a subset of SQLA <strong>Session</strong> class and it’s query feature, so if you
override the all method you will implement the data generation at it’s heart.</p>
<p>On our example you must first define the <strong>Model</strong> you will represent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models.generic</span> <span class="k">import</span> <span class="n">GenericModel</span><span class="p">,</span> <span class="n">GenericSession</span><span class="p">,</span> <span class="n">GenericColumn</span>

<span class="k">class</span> <span class="nc">PSModel</span><span class="p">(</span><span class="n">GenericModel</span><span class="p">):</span>
    <span class="n">UID</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">PID</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">PPID</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">C</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">STIME</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">TTY</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">TIME</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">CMD</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see, we are subclassing from <strong>GenericModel</strong> and use <strong>GenericColumn</strong> much like SQLAlchemy.
except type are really python types. No type obligation is implemented, but you should respect it when
implementing your own data generation</p>
<p>For your data generation, and regarding our example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PSSession</span><span class="p">(</span><span class="n">GenericSession</span><span class="p">):</span>
    <span class="n">regexp</span> <span class="o">=</span> <span class="s2">&quot;(\w+) +(\w+) +(\w+) +(\w+) +(\w+:\w+|\w+) (\?|tty\w+) +(\w+:\w+:\w+) +(.+)</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">_add_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">re</span>

        <span class="n">group</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">regexp</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">group</span><span class="p">:</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">PSModel</span><span class="p">()</span>
            <span class="n">model</span><span class="o">.</span><span class="n">UID</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">model</span><span class="o">.</span><span class="n">PID</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">model</span><span class="o">.</span><span class="n">PPID</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">model</span><span class="o">.</span><span class="n">C</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">model</span><span class="o">.</span><span class="n">STIME</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">model</span><span class="o">.</span><span class="n">TTY</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span>
            <span class="n">model</span><span class="o">.</span><span class="n">TIME</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span>
            <span class="n">model</span><span class="o">.</span><span class="n">CMD</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_all</span><span class="p">(</span><span class="n">PSModel</span><span class="p">())</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="s1">&#39;ps -p </span><span class="si">{0}</span><span class="s1"> -f&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pk</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_object</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">PSSession</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_all</span><span class="p">(</span><span class="n">PSModel</span><span class="p">())</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="s1">&#39;ps -ef&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_object</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">PSSession</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
<p>So each time the framework queries the data source, it will <strong>delete_all</strong> records, and
call ‘ps -ef’ for a query all records, or ‘ps -p &lt;PID&gt;’ for a single record.</p>
<p>The <strong>GenericSession</strong> class will implement by itself the Filters and order by methods
to be applied prior to your <em>all</em> method. So that everything works much like SQLAlchemy.</p>
<p>I implemented this feature out of the necessity of representing LDAP queries, but of course
you can use it to wherever your imagination/necessity drives you.</p>
<p>Finally you can use it on the framework like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sess</span> <span class="o">=</span> <span class="n">PSSession</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">PSView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">GenericInterface</span><span class="p">(</span><span class="n">PSModel</span><span class="p">,</span> <span class="n">sess</span><span class="p">)</span>
    <span class="n">base_permissions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;can_list&#39;</span><span class="p">,</span> <span class="s1">&#39;can_show&#39;</span><span class="p">]</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;UID&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;CMD&#39;</span><span class="p">,</span> <span class="s1">&#39;TIME&#39;</span><span class="p">]</span>
    <span class="n">search_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;UID&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;CMD&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>And then register it like a normal ModelView.</p>
<p>You can try this example on <cite>quickhowto2 example &lt;https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/quickhowto2&gt;</cite></p>
<p>I know this is still a short doc for such a complex feature, any doubts you may have just open an issue.</p>
</div>
</div>
<span id="document-multipledbs"></span><div class="section" id="multiple-databases">
<h3>Multiple Databases<a class="headerlink" href="#multiple-databases" title="Permalink to this headline">¶</a></h3>
<p>Because you can use Flask-SQLAlchemy (using the framework SQLA class) multiple databases is supported.</p>
<p>You can configure them the following way, first setup config.py:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SQLALCHEMY_DATABASE_URI</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="s1">&#39;app.db&#39;</span><span class="p">)</span>

<span class="n">SQLALCHEMY_BINDS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;my_sql1&#39;</span><span class="p">:</span> <span class="s1">&#39;mysql://root:password@localhost/quickhowto&#39;</span>
    <span class="s1">&#39;my_sql2&#39;</span><span class="p">:</span> <span class="s1">&#39;mysql://root:password@externalserver.domain.com/quickhowto2&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <strong>SQLALCHEMY_DATABASE_URI</strong> is the default connection this is where the framework’s
security tables will be created. The <strong>SQLALCHEMY_BINDS</strong> are the extra binds.</p>
<p>Now you can configure which models reside on which database using the __bind_key__ property</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Model1</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__bind_key__</span> <span class="o">=</span> <span class="s1">&#39;my_sql1&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span>  <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Model2</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__bind_key__</span> <span class="o">=</span> <span class="s1">&#39;my_sql2&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span>  <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Model3</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span>  <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>On this example:</dt>
<dd><ul class="first last simple">
<li>Model1 will be on the local MySql instance with db ‘quickhowto’.</li>
<li>Model2 will be on the externalserver.domain.com MySql instance with db ‘quickhowto2’.</li>
<li>Model3 will be on the default connection using sqlite.</li>
</ul>
</dd>
</dl>
</div>
<span id="document-i18n"></span><div class="section" id="i18n-translations">
<h3>i18n Translations<a class="headerlink" href="#i18n-translations" title="Permalink to this headline">¶</a></h3>
<div class="section" id="introduction">
<h4>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>F.A.B. has support for seven languages (planning for some more):</dt>
<dd><ul class="first last simple">
<li>Chinese</li>
<li>English</li>
<li>French</li>
<li>German</li>
<li>Japanese</li>
<li>Polish</li>
<li>Portuguese</li>
<li>Portuguese Brazil</li>
<li>Russian</li>
<li>Spanish</li>
<li>Greek</li>
</ul>
</dd>
</dl>
<p>This means that all messages, builtin on the framework are translated to these languages.</p>
<p>You can add your own translations for your application, using Flask-BabelPkg, this is a fork from Flask-Babel,
created because it was not possible to separate package translations from the application translations.</p>
<p>You can add your own translations, and your own language support.
Take a look at <a class="reference external" href="http://pythonhosted.org/Flask-Babel">Flask-Babel</a> for setup an babel initial configuration.</p>
</div>
<div class="section" id="initial-configuration">
<h4>Initial Configuration<a class="headerlink" href="#initial-configuration" title="Permalink to this headline">¶</a></h4>
<p>On you projects root create a directory named babel,
then create and edit a file named babel.cfg with the following content (this configuration is already made on the
base skeleton application):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">python</span><span class="p">:</span> <span class="o">**.</span><span class="n">py</span><span class="p">]</span>
<span class="p">[</span><span class="n">jinja2</span><span class="p">:</span> <span class="o">**/</span><span class="n">templates</span><span class="o">/**.</span><span class="n">html</span><span class="p">]</span>
<span class="n">encoding</span> <span class="o">=</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
<p>First, create your translations, for example to portuguese, spanish and german, execute on you projects root:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pybabel</span> <span class="n">init</span> <span class="o">-</span><span class="n">i</span> <span class="o">./</span><span class="n">babel</span><span class="o">/</span><span class="n">messages</span><span class="o">.</span><span class="n">pot</span> <span class="o">-</span><span class="n">d</span> <span class="n">app</span><span class="o">/</span><span class="n">translations</span> <span class="o">-</span><span class="n">l</span> <span class="n">pt</span>
<span class="n">pybabel</span> <span class="n">init</span> <span class="o">-</span><span class="n">i</span> <span class="o">./</span><span class="n">babel</span><span class="o">/</span><span class="n">messages</span><span class="o">.</span><span class="n">pot</span> <span class="o">-</span><span class="n">d</span> <span class="n">app</span><span class="o">/</span><span class="n">translations</span> <span class="o">-</span><span class="n">l</span> <span class="n">es</span>
<span class="n">pybabel</span> <span class="n">init</span> <span class="o">-</span><span class="n">i</span> <span class="o">./</span><span class="n">babel</span><span class="o">/</span><span class="n">messages</span><span class="o">.</span><span class="n">pot</span> <span class="o">-</span><span class="n">d</span> <span class="n">app</span><span class="o">/</span><span class="n">translations</span> <span class="o">-</span><span class="n">l</span> <span class="n">de</span>
</pre></div>
</div>
<p>Next extract your strings to be translated, execute on you projects root:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flask fab babel-extract
</pre></div>
</div>
<p>If you want to, or if you’re using a version prior to 1.3.0 you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pybabel</span> <span class="n">extract</span> <span class="o">-</span><span class="n">F</span> <span class="o">./</span><span class="n">babel</span><span class="o">/</span><span class="n">babel</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">k</span> <span class="n">lazy_gettext</span> <span class="o">-</span><span class="n">o</span> <span class="o">./</span><span class="n">babel</span><span class="o">/</span><span class="n">messages</span><span class="o">.</span><span class="n">pot</span> <span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="quick-how-to">
<h4>Quick How to<a class="headerlink" href="#quick-how-to" title="Permalink to this headline">¶</a></h4>
<p>Let’s work with the contacts application example,
so you want to add translations for the menus “List Groups” and “List Contacts”.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask.ext.babelpkg</span> <span class="k">import</span> <span class="n">lazy_gettext</span> <span class="k">as</span> <span class="n">_</span>

<span class="k">class</span> <span class="nc">GroupModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">ContactGroup</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">ContactModelView</span><span class="p">]</span>
    <span class="n">label_columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">)}</span>

<span class="n">genapp</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">GroupModelView</span><span class="p">(),</span> <span class="s2">&quot;List Groups&quot;</span><span class="p">,</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;th-large&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;List Groups&#39;</span><span class="p">),</span>
                    <span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;Contacts&quot;</span><span class="p">,</span> <span class="n">category_icon</span><span class="o">=</span><span class="s1">&#39;fa-envelope&#39;</span><span class="p">,</span> <span class="n">category_label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Contacts&#39;</span><span class="p">))</span>
<span class="n">genapp</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ContactModelView</span><span class="p">(),</span> <span class="s2">&quot;List Contacts&quot;</span><span class="p">,</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;earphone&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;List Contacts&#39;</span><span class="p">),</span>
                    <span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>1 - Run the extraction, from the root directory of your project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flask fab babel-extract
</pre></div>
</div>
<p>If you want to, or if you’re using a version prior to 1.3.0 you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pybabel</span> <span class="n">extract</span> <span class="o">-</span><span class="n">F</span> <span class="o">./</span><span class="n">babel</span><span class="o">/</span><span class="n">babel</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">k</span> <span class="n">lazy_gettext</span> <span class="o">-</span><span class="n">o</span> <span class="o">./</span><span class="n">babel</span><span class="o">/</span><span class="n">messages</span><span class="o">.</span><span class="n">pot</span> <span class="o">.</span>
</pre></div>
</div>
<p>2 - Make your translations</p>
<blockquote>
<div><ul>
<li><p class="first">On app/translations/pt/LC_MESSAGES/messages.po you will find the messages you added to translate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msgid</span> <span class="s2">&quot;Name&quot;</span>
<span class="n">msgstr</span> <span class="s2">&quot;&quot;</span>

<span class="n">msgid</span> <span class="s2">&quot;Contacts&quot;</span>
<span class="n">msgstr</span> <span class="s2">&quot;&quot;</span>

<span class="n">msgid</span> <span class="s2">&quot;List Groups&quot;</span>
<span class="n">msgstr</span> <span class="s2">&quot;&quot;</span>

<span class="n">msgid</span> <span class="s2">&quot;List Contacts&quot;</span>
<span class="n">msgstr</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">Translate them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msgid</span> <span class="s2">&quot;Name&quot;</span>
<span class="n">msgstr</span> <span class="s2">&quot;Nome&quot;</span>

<span class="n">msgid</span> <span class="s2">&quot;Contacts&quot;</span>
<span class="n">msgstr</span> <span class="s2">&quot;Contactos&quot;</span>

<span class="n">msgid</span> <span class="s2">&quot;List Groups&quot;</span>
<span class="n">msgstr</span> <span class="s2">&quot;Lista de Grupos&quot;</span>

<span class="n">msgid</span> <span class="s2">&quot;List Contacts&quot;</span>
<span class="n">msgstr</span> <span class="s2">&quot;Lista de Contactos&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>3 - Compile your translations, from the root directory of your project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flask fab babel-compile
</pre></div>
</div>
<p>4 - Add your language support to the framework</p>
<blockquote>
<div><ul>
<li><p class="first">On config tell the framework the languages you support.
With this you will render a menu with the corresponding country flags.
use the config var ‘LANGUAGES’ with a dict whose first key is a string with the corresponding babel language code,
the value is another dict with two keys ‘flag’ and ‘name’, with the country flag code, and text to be displayed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LANGUAGES</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">&#39;en&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;flag&#39;</span><span class="p">:</span><span class="s1">&#39;gb&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;English&#39;</span><span class="p">},</span>
   <span class="s1">&#39;pt&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;flag&#39;</span><span class="p">:</span><span class="s1">&#39;pt&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;Portuguese&#39;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>And thats it!</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-security"></span><div class="section" id="security">
<h3>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h3>
<div class="section" id="supported-authentication-types">
<h4>Supported Authentication Types<a class="headerlink" href="#supported-authentication-types" title="Permalink to this headline">¶</a></h4>
<p>You have four types of authentication methods</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Database:</th><td class="field-body">username and password style that is queried from the database to match. Passwords are kept hashed on the database.</td>
</tr>
<tr class="field-even field"><th class="field-name">Open ID:</th><td class="field-body">Uses the user’s email field to authenticate on Gmail, Yahoo etc…</td>
</tr>
<tr class="field-odd field"><th class="field-name">LDAP:</th><td class="field-body">Authentication against an LDAP server, like Microsoft Active Directory.</td>
</tr>
<tr class="field-even field"><th class="field-name">REMOTE_USER:</th><td class="field-body">Reads the <em>REMOTE_USER</em> web server environ var, and verifies if it’s authorized with the framework users table.
It’s the web server responsibility to authenticate the user, useful for intranet sites, when the server (Apache, Nginx)
is configured to use kerberos, no need for the user to login with username and password on F.A.B.</td>
</tr>
<tr class="field-odd field"><th class="field-name">OAUTH:</th><td class="field-body">Authentication using OAUTH (v1 or v2). You need to install flask-oauthlib.</td>
</tr>
</tbody>
</table>
<p>Configure the authentication type on config.py, take a look at <a class="reference internal" href="index.html#document-config"><span class="doc">Base Configuration</span></a></p>
<p>The session is preserved and encrypted using Flask-Login, OpenID requires Flask-OpenID.</p>
</div>
<div class="section" id="role-based">
<h4>Role based<a class="headerlink" href="#role-based" title="Permalink to this headline">¶</a></h4>
<p>Each user has multiple roles, and a role holds permissions on views/API and menus,
so a user has permissions on views/API and menus.</p>
<p>Roles can be user defined (backed by the backend) and builtin readonly. Builtin readonly roles
support regex for views/API and permissions, this simplifies security management and
improve performance since the many to many permissions between a role and it’s permissions
does not need to be fetched from the backend.</p>
<p>Builtin roles are defined on the config using <code class="docutils literal notranslate"><span class="pre">FAB_ROLES</span></code> key and respect the following data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FAB_ROLES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;&lt;ROLE NAME&gt;&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;&lt;VIEW/MENU/API NAME&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;PERMISSION NAME&quot;</span><span class="p">],</span>
        <span class="o">....</span>
    <span class="p">],</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>So for example a <strong>Read Only</strong> role might look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FAB_ROLES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ReadOnly&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">,</span> <span class="s2">&quot;can_list&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">,</span> <span class="s2">&quot;can_show&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">,</span> <span class="s2">&quot;menu_access&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">,</span> <span class="s2">&quot;can_get&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">,</span> <span class="s2">&quot;can_info&quot;</span><span class="p">]</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>These roles are inserted automatically to the database (only their name is added), and
can be associated to users just like a “normal”/user defined role.</p>
<p>If you want to later on change the name of these roles, you can map these roles by their backend id:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FAB_ROLES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ReadOnly_Altered&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">,</span> <span class="s2">&quot;can_list&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">,</span> <span class="s2">&quot;can_show&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">,</span> <span class="s2">&quot;menu_access&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">,</span> <span class="s2">&quot;can_get&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">,</span> <span class="s2">&quot;can_info&quot;</span><span class="p">]</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="n">FAB_ROLES_MAPPING</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;ReadOnly_Altered&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There are two special roles, you can define their names on the <a class="reference internal" href="index.html#document-config"><span class="doc">Base Configuration</span></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Admin Role:</th><td class="field-body">Special builtin read only Role, will have full access.</td>
</tr>
<tr class="field-even field"><th class="field-name">Public Role:</th><td class="field-body">This is a special role for non authenticated users,
you can assign all the permissions on views and menus to this role,
and everyone will access specific parts of you application.</td>
</tr>
</tbody>
</table>
<p>Of course you can create any additional role you want and configure them as you like.</p>
</div>
<div class="section" id="permissions">
<h4>Permissions<a class="headerlink" href="#permissions" title="Permalink to this headline">¶</a></h4>
<p>The framework automatically creates for you all the possible existing permissions on your views, API or menus,
by “inspecting” your code.</p>
<p>Each time you create a new view based on a model (inherit from ModelView) it will create the following permissions:</p>
<ul class="simple">
<li>can list</li>
<li>can show</li>
<li>can add</li>
<li>can edit</li>
<li>can delete</li>
<li>can download</li>
</ul>
<p>In the case of CRUD REST API:</p>
<ul class="simple">
<li>can get</li>
<li>can put</li>
<li>can post</li>
<li>can delete</li>
<li>can info</li>
</ul>
<p>These base permissions will be associated to your view or API, so if you create a view named <code class="docutils literal notranslate"><span class="pre">MyModelView</span></code>
you can assign to any role these permissions:</p>
<ul class="simple">
<li>can list on MyModelView</li>
<li>can show on MyModelView</li>
<li>can add on MyModelView</li>
<li>can edit on MyModelView</li>
<li>can delete on MyModelView</li>
<li>can download on MyModelView</li>
</ul>
<p>In case your developing a backend REST API subclassing <code class="docutils literal notranslate"><span class="pre">ModelRestApi</span></code> and create a class named <code class="docutils literal notranslate"><span class="pre">MyApi</span></code>:</p>
<ul class="simple">
<li>can get on MyApi</li>
<li>can put on MyApi</li>
<li>can post on MyApi</li>
<li>can delete on MyApi</li>
<li>can info on MyApi</li>
</ul>
<p>If you extend your view with some exposed method via the &#64;expose decorator and you want to protect it
use the &#64;has_access decorator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Group</span><span class="p">)</span>

    <span class="nd">@has_access</span>
    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/mymethod/&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">mymethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># do something</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>The framework will create the following access based on your method’s name:</p>
<ul class="simple">
<li>can mymethod on MyModelView</li>
</ul>
<p>You can aggregate some of your method’s on a single permission, this can simplify the security configuration
if there is no need for granular permissions on a group of methods, for this use &#64;permission_name decorator.</p>
<p>You can use the &#64;permission_name to override the permission’s name to whatever you like.</p>
<p>Take a look at <a class="reference internal" href="index.html#document-api"><span class="doc">API Reference</span></a></p>
</div>
<div class="section" id="permission-customization">
<h4>Permission Customization<a class="headerlink" href="#permission-customization" title="Permalink to this headline">¶</a></h4>
<p>The default view/menu, permissions are highly granular, this is a good default since it enables a high level
of customization, but on medium to large application the amount of permission pairs generated can get a bit daunting.
You can fully customize the generated permission names generated and if you wish aggregate them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">OneApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">class_permission_name</span> <span class="o">=</span> <span class="s2">&quot;api&quot;</span>


<span class="k">class</span> <span class="nc">TwoApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">class_permission_name</span> <span class="o">=</span> <span class="s2">&quot;api&quot;</span>
</pre></div>
</div>
<p>The previous example will generate half the default permissions, by just creating the following:</p>
<ul class="simple">
<li>can get on api</li>
<li>can put on api</li>
<li>can post on api</li>
<li>can delete on api</li>
<li>can info on api</li>
</ul>
<p>You can also aggregate method permissions by using <code class="docutils literal notranslate"><span class="pre">method_permission_name</span></code> attribute.
Use the following <code class="docutils literal notranslate"><span class="pre">Dict</span></code> structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">method_permission_name</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;&lt;METHOD_NAME&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;PERMISSION_NAME&gt;&quot;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">OneApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">class_permission_name</span> <span class="o">=</span> <span class="s2">&quot;api&quot;</span>
    <span class="n">method_permission_name</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;get_list&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;get&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;post&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;put&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span>
    <span class="p">}</span>


<span class="k">class</span> <span class="nc">TwoApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">class_permission_name</span> <span class="o">=</span> <span class="s2">&quot;api&quot;</span>
    <span class="n">method_permission_name</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;get_list&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;get&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;post&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;put&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Now FAB will only generate one permission pair:</p>
<ul class="simple">
<li>can access on api</li>
</ul>
<p>If you want to revert back your permission names override, or change just them again, you need to hint FAB
about what were your last permissions, so that the security converge procedure knows what to do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">OneApi</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">class_permission_name</span> <span class="o">=</span> <span class="s2">&quot;OneApi&quot;</span>
    <span class="n">previous_permission_name</span> <span class="o">=</span> <span class="s2">&quot;api&quot;</span>
    <span class="n">method_permission_name</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;get_list&quot;</span><span class="p">:</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span>
        <span class="s2">&quot;get&quot;</span><span class="p">:</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span>
        <span class="s2">&quot;post&quot;</span><span class="p">:</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span>
        <span class="s2">&quot;put&quot;</span><span class="p">:</span> <span class="s2">&quot;put&quot;</span><span class="p">,</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="s2">&quot;delete&quot;</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="s2">&quot;info&quot;</span>
    <span class="p">}</span>
    <span class="n">previous_method_permission_name</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;get_list&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;get&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;post&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;put&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Then run the following FAB cli command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flask fab security-converge
</pre></div>
</div>
<p>Security converge will migrate all your permissions from the previous names to the current names, and
also change all your roles, so you can migrate smoothly to your new security naming. After converging
you can delete all your <code class="docutils literal notranslate"><span class="pre">previous_*</span></code> attributes.</p>
<p>You can also migrate back by switching <code class="docutils literal notranslate"><span class="pre">previous_*</span></code> attributes to their target, ie switch
<code class="docutils literal notranslate"><span class="pre">previous_method_permission_name</span></code> by <code class="docutils literal notranslate"><span class="pre">method_permission_name</span></code> and
<code class="docutils literal notranslate"><span class="pre">previous_permission_name</span></code> by <code class="docutils literal notranslate"><span class="pre">class_permission_name</span></code>. Then run security converge will expand back all permissions
on all your Roles.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">note:</th><td class="field-body">You should backup your production database before migrating your permissions. Also note that you
can run <code class="docutils literal notranslate"><span class="pre">flask</span> <span class="pre">fab</span> <span class="pre">security-converge</span> <span class="pre">--dry-run</span></code> to get a list of operations the converge will perform.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="automatic-cleanup">
<h4>Automatic Cleanup<a class="headerlink" href="#automatic-cleanup" title="Permalink to this headline">¶</a></h4>
<p>All your permissions and views are added automatically to the backend and associated with the ‘Admin’ <em>role</em>.
The same applies to removing them. But, if you change the name of a view or menu, the framework
will add the new <em>Views</em> and <em>Menus</em> names to the backend, but will not delete the old ones. It will generate unwanted
names on the security models, basically <em>garbage</em>. To clean them, use the <em>security_cleanup</em> method.</p>
<p>Using security_cleanup is not always necessary, but using it after code rework, will guarantee that the permissions, and
associated permissions to menus and views are exactly what exists on your app. It will prevent orphaned permission names
and associations.</p>
<p>Use the cleanup after you have registered all your views.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">GroupModelView</span><span class="p">,</span> <span class="s2">&quot;List Groups&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ContactModelView</span><span class="p">,</span> <span class="s2">&quot;List Contacts&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_separator</span><span class="p">(</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ContactChartView</span><span class="p">,</span> <span class="s2">&quot;Contacts Chart&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ContactTimeChartView</span><span class="p">,</span> <span class="s2">&quot;Contacts Birth Chart&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>

<span class="n">appbuilder</span><span class="o">.</span><span class="n">security_cleanup</span><span class="p">()</span>
</pre></div>
</div>
<p>You can always use it and everything will be painlessly automatic. But if you use it only when needed
(change class name, add <em>security_cleanup</em> to your code, the <em>garbage</em> names are removed, then remove the method)
no overhead is added when starting your site.</p>
</div>
<div class="section" id="auditing">
<h4>Auditing<a class="headerlink" href="#auditing" title="Permalink to this headline">¶</a></h4>
<p>All user’s creation and modification are audited.
On the show detail for each user you can check who created the user and when and who has last changed it.</p>
<p>You can check also, a total login count (successful login), and the last failed logins
(these are reset if a successful login occurred).</p>
<p>If you’re using SQLAlchemy you can mix auditing to your models in a simple way. Mix AuditMixin class to your models:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models.mixins</span> <span class="k">import</span> <span class="n">AuditMixin</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">Model</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span>


<span class="k">class</span> <span class="nc">Project</span><span class="p">(</span><span class="n">AuditMixin</span><span class="p">,</span> <span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>This will add the following columns to your model:</p>
<ul class="simple">
<li>created_on: The date and time of the record creation.</li>
<li>changed_on: The last date and time of record update.</li>
<li>created_by: Who created the record.</li>
<li>changed_by: Who last modified the record.</li>
</ul>
<p>These columns will be automatically updated by the framework upon creation or update of records. So you should
exclude them from add and edit form. Using our example you will define our view like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ProjectModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Project</span><span class="p">)</span>
    <span class="n">add_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="n">edit_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="authentication-methods">
<h4>Authentication Methods<a class="headerlink" href="#authentication-methods" title="Permalink to this headline">¶</a></h4>
<p>We are now looking at the authentication methods, and how you can configure them and customize them.
The framework has 5 authentication methods and you choose one of them, you configure the method to be used
on the <strong>config.py</strong> (when using the create-app, or following the proposed app structure). First the
configuration imports the constants for the authentication methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.security.manager</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">AUTH_DB</span><span class="p">,</span>
    <span class="n">AUTH_LDAP</span><span class="p">,</span>
    <span class="n">AUTH_OAUTH</span><span class="p">,</span>
    <span class="n">AUTH_OID</span><span class="p">,</span>
    <span class="n">AUTH_REMOTE_USER</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Next you will use the <strong>AUTH_TYPE</strong> key to choose the type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AUTH_TYPE</span> <span class="o">=</span> <span class="n">AUTH_DB</span>
</pre></div>
</div>
<p>Additionally you can customize the name of the builtin roles for Admin and Public accesses:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AUTH_ROLE_ADMIN</span> <span class="o">=</span> <span class="s1">&#39;My Admin Role Name&#39;</span>
<span class="n">AUTH_ROLE_PUBLIC</span> <span class="o">=</span> <span class="s1">&#39;My Public Role Name&#39;</span>
</pre></div>
</div>
<p>Finally you can allow users to self register (take a look at the following chapters for further detail):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AUTH_USER_REGISTRATION</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">AUTH_USER_REGISTRATION_ROLE</span> <span class="o">=</span> <span class="s2">&quot;My Public Role Name&quot;</span>
</pre></div>
</div>
<p>These settings can apply to all the authentication methods. When you create your first admin user
using <strong>flask fab</strong> command line, this user will be authenticated using the authentication method
defined on your <strong>config.py</strong>.</p>
</div>
<div class="section" id="authentication-database">
<h4>Authentication: Database<a class="headerlink" href="#authentication-database" title="Permalink to this headline">¶</a></h4>
<p>The database authentication type is the most <em>simple</em> one, it authenticates users against an
username and hashed password field kept on your database.</p>
<p>Administrators can create users with passwords, and users can change their passwords. This is all done using the UI.
(You can override and extend the default UI as we’ll see on <em>Your Custom Security</em>)</p>
</div>
<div class="section" id="authentication-openid">
<h4>Authentication: OpenID<a class="headerlink" href="#authentication-openid" title="Permalink to this headline">¶</a></h4>
<p>This authentication method uses <a class="reference external" href="https://github.com/mitsuhiko/flask-openid">Flask-OpenID</a>. All configuration is done
on <strong>config.py</strong> using OPENID_PROVIDERS key, just add or remove from the list the providers you want to enable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AUTH_TYPE</span> <span class="o">=</span> <span class="n">AUTH_OID</span>
<span class="n">OPENID_PROVIDERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Yahoo&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;https://me.yahoo.com&#39;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;AOL&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://openid.aol.com/&lt;username&gt;&#39;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Flickr&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://www.flickr.com/&lt;username&gt;&#39;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;MyOpenID&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;https://www.myopenid.com&#39;</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Each list entry is a dict with a readable OpenID name and it’s url, if the url needs an username just add it using &lt;username&gt;.
The login template for this method will provide a text box for the user to fillout his/her username.</p>
<p>F.A.B. will ask for the ‘email’ from OpenID, and if this email belongs to some user on your application he/she will login successfully.</p>
</div>
<div class="section" id="authentication-ldap">
<h4>Authentication: LDAP<a class="headerlink" href="#authentication-ldap" title="Permalink to this headline">¶</a></h4>
<p>This method will authenticate the user’s credentials against an LDAP server. Using this method without self user registration
is very simple, for MSFT AD just define the LDAP server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AUTH_TYPE</span> <span class="o">=</span> <span class="n">AUTH_LDAP</span>
<span class="n">AUTH_LDAP_SERVER</span> <span class="o">=</span> <span class="s2">&quot;ldap://ldapserver.local&quot;</span>
<span class="n">AUTH_LDAP_USE_TLS</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>For OpenLDAP or if you need/want to bind first with a query LDAP user,
then using username to search the LDAP server and binding to it (using the user provided password):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AUTH_TYPE</span> <span class="o">=</span> <span class="n">AUTH_LDAP</span>
<span class="n">AUTH_LDAP_SERVER</span> <span class="o">=</span> <span class="s2">&quot;ldap://ldapserver.local&quot;</span>
<span class="n">AUTH_LDAP_USE_TLS</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">AUTH_LDAP_SEARCH</span> <span class="o">=</span> <span class="s2">&quot;dc=domain,dc=local&quot;</span>
<span class="n">AUTH_LDAP_BIND_USER</span> <span class="o">=</span> <span class="s2">&quot;CN=Query User,OU=People,dc=domain,dc=local&quot;</span>
<span class="n">AUTH_LDAP_BIND_PASSWORD</span> <span class="o">=</span> <span class="s2">&quot;password&quot;</span>
</pre></div>
</div>
<p>for MSFT AD users will be authenticated using the attribute ‘userPrincipalName’, so username’s will be of the form
<a class="reference external" href="mailto:'someuser&#37;&#52;&#48;somedomail&#46;local">‘someuser<span>&#64;</span>somedomail<span>&#46;</span>local</a>’. Since 1.6.1 you can use a new configuration to set all domains to a certain default,
this will allow users to authenticate using ‘someuser’ be setting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AUTH_LDAP_APPEND_DOMAIN</span> <span class="o">=</span> <span class="s1">&#39;somedomain.local&#39;</span>
</pre></div>
</div>
<p>When using self user registration, you can use the following to config further:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">AUTH_LDAP_UID_FIELD:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Default to ‘uid’ will be used to search the user on the LDAP server.
For MSFT AD you can set it to ‘userPrincipalName’</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">AUTH_LDAP_FIRSTNAME_FIELD:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Default to ‘givenName’ will use MSFT AD attribute to register first_name on the db.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">AUTH_LDAP_LASTTNAME_FIELD:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Default to ‘sn’ will use MSFT AD attribute to register last_name on the db.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">AUTH_LDAP_EMAIL_FIELD:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Default to ‘mail’ will use MSFT AD attribute to register email on the db.
If this attribute is null the framework will register &lt;username + <a class="reference external" href="mailto:'&#37;&#52;&#48;email&#46;notfound'">‘<span>&#64;</span>email<span>&#46;</span>notfound’</a>&gt;</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">AUTH_LDAP_SEARCH:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">This must be set when using self user registration.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="authentication-oauth">
<h4>Authentication: OAuth<a class="headerlink" href="#authentication-oauth" title="Permalink to this headline">¶</a></h4>
<p>By using this method it will be possible to use the provider API, this is because you’re requesting the user to give
permission to your app to access or manage the user’s account on the provider.</p>
<p>So you can send tweets, post on the users facebook, retrieve the user’s linkedin profile etc.</p>
<p>To use OAuth you need to install <a class="reference external" href="https://flask-oauthlib.readthedocs.org/en/latest/">Flask-OAuthLib</a>. It’s useful
to get to know this library since F.A.B. will expose the remote application object for you to play with.</p>
<p>Take a look at the <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/oauth">example</a>
to get an idea of a simple use for this.</p>
<p>Use <strong>config.py</strong> configure OAUTH_PROVIDERS with a list of oauth providers, notice that the remote_app
key is just the configuration for flask-oauthlib:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AUTH_TYPE</span> <span class="o">=</span> <span class="n">AUTH_OAUTH</span>

<span class="n">OAUTH_PROVIDERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;twitter&#39;</span><span class="p">,</span> <span class="s1">&#39;icon&#39;</span><span class="p">:</span><span class="s1">&#39;fa-twitter&#39;</span><span class="p">,</span>
        <span class="s1">&#39;remote_app&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;consumer_key&#39;</span><span class="p">:</span><span class="s1">&#39;TWITTER KEY&#39;</span><span class="p">,</span>
            <span class="s1">&#39;consumer_secret&#39;</span><span class="p">:</span><span class="s1">&#39;TWITTER SECRET&#39;</span><span class="p">,</span>
            <span class="s1">&#39;base_url&#39;</span><span class="p">:</span><span class="s1">&#39;https://api.twitter.com/1.1/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;request_token_url&#39;</span><span class="p">:</span><span class="s1">&#39;https://api.twitter.com/oauth/request_token&#39;</span><span class="p">,</span>
            <span class="s1">&#39;access_token_url&#39;</span><span class="p">:</span><span class="s1">&#39;https://api.twitter.com/oauth/access_token&#39;</span><span class="p">,</span>
            <span class="s1">&#39;authorize_url&#39;</span><span class="p">:</span><span class="s1">&#39;https://api.twitter.com/oauth/authenticate&#39;</span><span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;google&#39;</span><span class="p">,</span> <span class="s1">&#39;icon&#39;</span><span class="p">:</span><span class="s1">&#39;fa-google&#39;</span><span class="p">,</span> <span class="s1">&#39;token_key&#39;</span><span class="p">:</span><span class="s1">&#39;access_token&#39;</span><span class="p">,</span>
        <span class="s1">&#39;remote_app&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;consumer_key&#39;</span><span class="p">:</span><span class="s1">&#39;GOOGLE KEY&#39;</span><span class="p">,</span>
            <span class="s1">&#39;consumer_secret&#39;</span><span class="p">:</span><span class="s1">&#39;GOOGLE SECRET&#39;</span><span class="p">,</span>
            <span class="s1">&#39;base_url&#39;</span><span class="p">:</span><span class="s1">&#39;https://www.googleapis.com/oauth2/v2/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;request_token_params&#39;</span><span class="p">:{</span>
              <span class="s1">&#39;scope&#39;</span><span class="p">:</span> <span class="s1">&#39;email profile&#39;</span>
            <span class="p">},</span>
            <span class="s1">&#39;request_token_url&#39;</span><span class="p">:</span><span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;access_token_url&#39;</span><span class="p">:</span><span class="s1">&#39;https://accounts.google.com/o/oauth2/token&#39;</span><span class="p">,</span>
            <span class="s1">&#39;authorize_url&#39;</span><span class="p">:</span><span class="s1">&#39;https://accounts.google.com/o/oauth2/auth&#39;</span><span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This needs a small explanation, you basically have five special keys:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">name:</th><td class="field-body">The name of the provider, you can choose whatever you want. But the framework as some
builtin logic to retrieve information about a user that you can make use of if you choose:
‘twitter’, ‘google’, ‘github’,’linkedin’.</td>
</tr>
<tr class="field-even field"><th class="field-name">icon:</th><td class="field-body">The font-awesome icon for this provider.</td>
</tr>
<tr class="field-odd field"><th class="field-name">token_key:</th><td class="field-body">The token key name that this provider uses, google and github uses <em>‘access_token’</em>,
twitter uses <em>‘oauth_token’</em> and thats the default.</td>
</tr>
<tr class="field-even field"><th class="field-name">token_secret:</th><td class="field-body">The token secret key name, default is <em>‘oauth_token_secret’</em></td>
</tr>
</tbody>
</table>
<p>After the user authenticates and grants access permissions to your application
the framework retrieves information about the user, username and email. This info
will be checked with the internal user (user record on User Model), first by username next by email.</p>
<p>To override/customize the user information retrieval from oauth, you can create your own method like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@appbuilder</span><span class="o">.</span><span class="n">sm</span><span class="o">.</span><span class="n">oauth_user_info_getter</span>
<span class="k">def</span> <span class="nf">my_user_info_getter</span><span class="p">(</span><span class="n">sm</span><span class="p">,</span> <span class="n">provider</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">provider</span> <span class="o">==</span> <span class="s1">&#39;github&#39;</span><span class="p">:</span>
        <span class="n">me</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">oauth_remotes</span><span class="p">[</span><span class="n">provider</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">)}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>
</pre></div>
</div>
<p>Decorate your method with the SecurityManager <strong>oauth_user_info_getter</strong> decorator.
Make your method accept the exact parameters as on this example, and then return a dictionary
with the retrieved user information. The dictionary keys must have the same column names as the User Model.
Your method will be called after the user authorizes your application on the OAuth provider, and it will
receive the following: <strong>sm</strong> is F.A.B’s SecurityManager class, <strong>provider</strong> is a string with the name you configured
this provider with, <strong>response</strong> is the response.</p>
<p>Take a look at the <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/oauth">example</a></p>
</div>
<div class="section" id="your-custom-security">
<h4>Your Custom Security<a class="headerlink" href="#your-custom-security" title="Permalink to this headline">¶</a></h4>
<p>If you want to alter the security views, or authentication methods since (1.0.1) you can do it in a simple way.
The <strong>AppBuilder</strong> has a new optional initialization parameter where you pass your own custom <strong>SecurityManager</strong>
If you want to add, for example, actions to the list of users you can do it in a simple way.</p>
<p>First i advise you to create security.py and add the following to it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">redirect</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.security.views</span> <span class="k">import</span> <span class="n">UserDBModelView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.security.sqla.manager</span> <span class="k">import</span> <span class="n">SecurityManager</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.actions</span> <span class="k">import</span> <span class="n">action</span>


<span class="k">class</span> <span class="nc">MyUserDBView</span><span class="p">(</span><span class="n">UserDBModelView</span><span class="p">):</span>
    <span class="nd">@action</span><span class="p">(</span><span class="s2">&quot;muldelete&quot;</span><span class="p">,</span> <span class="s2">&quot;Delete&quot;</span><span class="p">,</span> <span class="s2">&quot;Delete all Really?&quot;</span><span class="p">,</span> <span class="s2">&quot;fa-rocket&quot;</span><span class="p">,</span> <span class="n">single</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">muldelete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datamodel</span><span class="o">.</span><span class="n">delete_all</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_redirect</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_redirect</span><span class="p">())</span>


<span class="k">class</span> <span class="nc">MySecurityManager</span><span class="p">(</span><span class="n">SecurityManager</span><span class="p">):</span>
    <span class="n">userdbmodelview</span> <span class="o">=</span> <span class="n">MyUserDBView</span>
</pre></div>
</div>
<p>Then on the __init__.py initialize AppBuilder with you own security class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">,</span> <span class="n">security_manager_class</span><span class="o">=</span><span class="n">MySecurityManager</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively since 1.13.1 you can declare your custom <strong>SecurityManager</strong> on the config.
This is a must have if your using the factory app pattern, on the config declare you class the following way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FAB_SECURITY_MANAGER_CLASS</span><span class="o">=</span><span class="s1">&#39;app.security.MySecurityManager&#39;</span>
</pre></div>
</div>
<p>F.A.B. uses a different user view for each authentication method</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">UserDBModelView:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">For database auth method</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">UserOIDModelView:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">For Open ID auth method</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">UserLDAPModelView:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">For LDAP auth method</td>
</tr>
</tbody>
</table>
<p>You can extend or create from scratch your own, and then tell F.A.B. to use them instead, by overriding their
correspondent lower case properties on <strong>SecurityManager</strong> (just like on the given example).</p>
<p>Take a look and run the example on <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/tree/master/examples/employees">Employees example</a></p>
<p>Study the source code of <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/blob/master/flask_appbuilder/security/manager.py">BaseSecurityManager</a></p>
</div>
<div class="section" id="extending-the-user-model">
<h4>Extending the User Model<a class="headerlink" href="#extending-the-user-model" title="Permalink to this headline">¶</a></h4>
<p>If you want to extend the <strong>User</strong> Model with extra columns specific to your application (since 1.3.0) you
can easily do it. Use the same type of approach as explained earlier.</p>
<p>First extend the User Model (create a sec_models.py file):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.security.sqla.models</span> <span class="k">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="k">import</span> <span class="n">relationship</span><span class="p">,</span> <span class="n">backref</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">Model</span>

<span class="k">class</span> <span class="nc">MyUser</span><span class="p">(</span><span class="n">User</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;ab_user&#39;</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">256</span><span class="p">))</span>
</pre></div>
</div>
<p>Next define a new User view, just like the default User view but with the extra column (create a sec_view.py)
If you’re using:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">AUTH_DB:</th><td class="field-body">Extend UserDBModelView</td>
</tr>
<tr class="field-even field"><th class="field-name">AUTH_LDAP:</th><td class="field-body">Extend UserLDAPModelView</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">AUTH_REMOTE_USER:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Extend UserRemoteUserModelView</td>
</tr>
<tr class="field-even field"><th class="field-name">AUTH_OID:</th><td class="field-body">Extend UserOIDModelView</td>
</tr>
<tr class="field-odd field"><th class="field-name">AUTH_OAUTH:</th><td class="field-body">Extend UserOAuthModelView</td>
</tr>
</tbody>
</table>
<p>So using AUTH_DB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.security.views</span> <span class="k">import</span> <span class="n">UserDBModelView</span>
<span class="kn">from</span> <span class="nn">flask_babelpkg</span> <span class="k">import</span> <span class="n">lazy_gettext</span>

<span class="k">class</span> <span class="nc">MyUserDBModelView</span><span class="p">(</span><span class="n">UserDBModelView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        View that add DB specifics to User view.</span>
<span class="sd">        Override to implement your own custom view.</span>
<span class="sd">        Then override userdbmodelview property on SecurityManager</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">show_fieldsets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;User info&#39;</span><span class="p">),</span>
         <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;roles&#39;</span><span class="p">,</span> <span class="s1">&#39;login_count&#39;</span><span class="p">,</span> <span class="s1">&#39;extra&#39;</span><span class="p">]}),</span>
        <span class="p">(</span><span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Personal Info&#39;</span><span class="p">),</span>
         <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">],</span> <span class="s1">&#39;expanded&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Audit Info&#39;</span><span class="p">),</span>
         <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;last_login&#39;</span><span class="p">,</span> <span class="s1">&#39;fail_login_count&#39;</span><span class="p">,</span> <span class="s1">&#39;created_on&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;created_by&#39;</span><span class="p">,</span> <span class="s1">&#39;changed_on&#39;</span><span class="p">,</span> <span class="s1">&#39;changed_by&#39;</span><span class="p">],</span> <span class="s1">&#39;expanded&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}),</span>
    <span class="p">]</span>

    <span class="n">user_show_fieldsets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;User info&#39;</span><span class="p">),</span>
         <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;roles&#39;</span><span class="p">,</span> <span class="s1">&#39;login_count&#39;</span><span class="p">,</span> <span class="s1">&#39;extra&#39;</span><span class="p">]}),</span>
        <span class="p">(</span><span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Personal Info&#39;</span><span class="p">),</span>
         <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">],</span> <span class="s1">&#39;expanded&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}),</span>
    <span class="p">]</span>

    <span class="n">add_columns</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;username&#39;</span><span class="p">,</span>
        <span class="s1">&#39;active&#39;</span><span class="p">,</span>
        <span class="s1">&#39;email&#39;</span><span class="p">,</span>
        <span class="s1">&#39;roles&#39;</span><span class="p">,</span>
        <span class="s1">&#39;extra&#39;</span><span class="p">,</span>
        <span class="s1">&#39;password&#39;</span><span class="p">,</span>
        <span class="s1">&#39;conf_password&#39;</span>
    <span class="p">]</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;username&#39;</span><span class="p">,</span>
        <span class="s1">&#39;email&#39;</span><span class="p">,</span>
        <span class="s1">&#39;active&#39;</span><span class="p">,</span>
        <span class="s1">&#39;roles&#39;</span>
    <span class="p">]</span>
    <span class="n">edit_columns</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;username&#39;</span><span class="p">,</span>
        <span class="s1">&#39;active&#39;</span><span class="p">,</span>
        <span class="s1">&#39;email&#39;</span><span class="p">,</span>
        <span class="s1">&#39;roles&#39;</span><span class="p">,</span>
        <span class="s1">&#39;extra&#39;</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>Next create your own SecurityManager class, overriding your model and view for User (create a sec.py):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.security.sqla.manager</span> <span class="k">import</span> <span class="n">SecurityManager</span>
<span class="kn">from</span> <span class="nn">.sec_models</span> <span class="k">import</span> <span class="n">MyUser</span>
<span class="kn">from</span> <span class="nn">.sec_views</span> <span class="k">import</span> <span class="n">MyUserDBModelView</span>

<span class="k">class</span> <span class="nc">MySecurityManager</span><span class="p">(</span><span class="n">SecurityManager</span><span class="p">):</span>
    <span class="n">user_model</span> <span class="o">=</span> <span class="n">MyUser</span>
    <span class="n">userdbmodelview</span> <span class="o">=</span> <span class="n">MyUserDBModelView</span>
</pre></div>
</div>
<p>Note that this is for AUTH_DB, so if you’re using:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">AUTH_DB:</th><td class="field-body">Override userdbmodelview</td>
</tr>
<tr class="field-even field"><th class="field-name">AUTH_LDAP:</th><td class="field-body">Override userldapmodelview</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">AUTH_REMOTE_USER:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Override userremoteusermodelview</td>
</tr>
<tr class="field-even field"><th class="field-name">AUTH_OID:</th><td class="field-body">Override useroidmodelview</td>
</tr>
</tbody>
</table>
<p>Finally (as shown on the previous example) tell F.A.B. to use your SecurityManager class, so when initializing
<strong>AppBuilder</strong> (on __init__.py):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">SQLA</span><span class="p">,</span> <span class="n">AppBuilder</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.menu</span> <span class="k">import</span> <span class="n">Menu</span>
<span class="kn">from</span> <span class="nn">.sec</span> <span class="k">import</span> <span class="n">MySecurityManager</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLA</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">Menu</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="n">security_manager_class</span><span class="o">=</span><span class="n">MySecurityManager</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">app</span> <span class="k">import</span> <span class="n">views</span>
</pre></div>
</div>
<p>Now you’ll have your extended User model as the authenticated user, <em>g.user</em> will have your model with the extra col.</p>
<p>Some images:</p>
<a class="reference internal image-reference" href="_images/security.png"><img alt="_images/security.png" src="_images/security.png" style="width: 100%;" /></a>
</div>
</div>
<span id="document-user_registration"></span><div class="section" id="user-registration">
<h3>User Registration<a class="headerlink" href="#user-registration" title="Permalink to this headline">¶</a></h3>
<p>Allows users to register themselves as users, will behave differently according to the authentication method.</p>
<div class="section" id="database-authentication">
<h4>Database Authentication<a class="headerlink" href="#database-authentication" title="Permalink to this headline">¶</a></h4>
<p>Using database authentication (auth db) the login screen will present a new ‘Register’ option where the
user is directed to a form where he/she fill’s a form with the necessary login/user information.
The form includes a Recaptcha field to ensure a human is filling the form. After the form is correctly filled
by the user an email is sent to the user with a link with an URL containing a hash belonging to his/her registration.</p>
<p>If the URL is accessed the user is inserted into the F.A.B user model and activated.</p>
<p>This behaviour can be easily configured or completely altered. By overriding the <strong>RegisterUserDBView</strong> properties.
or implementing an all new class. <strong>RegisterUserDBView</strong> inherits from BaseRegisterUser that hold some handy base methods
and properties.</p>
<p>Note that the process required for sending email’s uses the excellent flask-mail package so make sure you installed it
first.</p>
<p>Enabling and using the default implementation is easy just configure the following global config keys on config.py:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AUTH_TYPE</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Database Authentication</span>
<span class="n">AUTH_USER_REGISTRATION</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">AUTH_USER_REGISTRATION_ROLE</span> <span class="o">=</span> <span class="s1">&#39;Public&#39;</span>
<span class="c1"># Config for Flask-WTF Recaptcha necessary for user registration</span>
<span class="n">RECAPTCHA_PUBLIC_KEY</span> <span class="o">=</span> <span class="s1">&#39;GOOGLE PUBLIC KEY FOR RECAPTCHA&#39;</span>
<span class="n">RECAPTCHA_PRIVATE_KEY</span> <span class="o">=</span> <span class="s1">&#39;GOOGLE PRIVATE KEY FOR RECAPTCHA&#39;</span>
<span class="c1"># Config for Flask-Mail necessary for user registration</span>
<span class="n">MAIL_SERVER</span> <span class="o">=</span> <span class="s1">&#39;smtp.gmail.com&#39;</span>
<span class="n">MAIL_USE_TLS</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">MAIL_USERNAME</span> <span class="o">=</span> <span class="s1">&#39;yourappemail@gmail.com&#39;</span>
<span class="n">MAIL_PASSWORD</span> <span class="o">=</span> <span class="s1">&#39;passwordformail&#39;</span>
<span class="n">MAIL_DEFAULT_SENDER</span> <span class="o">=</span> <span class="s1">&#39;fabtest10@gmail.com&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="openid-authentication">
<h4>OpenID Authentication<a class="headerlink" href="#openid-authentication" title="Permalink to this headline">¶</a></h4>
<p>Registering a user when using OpenID authentication is very similar to database authentication, but this time
all the basic necessary information is fetched from the provider and presented to the user to alter it (or not)
and submit.</p>
</div>
<div class="section" id="ldap-authentication">
<h4>LDAP Authentication<a class="headerlink" href="#ldap-authentication" title="Permalink to this headline">¶</a></h4>
<p>LDAP user self registration is automatic, no register user option is shown. All users are registered, and the
required information is fetched from the LDAP server.</p>
</div>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>You can configure the default behaviour and UI on many different ways. The easiest one is making your own RegisterUser
class and inherit from RegisterUserDBView (when using auth db). Let’s take a look at a practical example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.security.registerviews</span> <span class="k">import</span> <span class="n">RegisterUserDBView</span>

<span class="k">class</span> <span class="nc">MyRegisterUserDBView</span><span class="p">(</span><span class="n">RegisterUserDBView</span><span class="p">):</span>
    <span class="n">email_template</span> <span class="o">=</span> <span class="s1">&#39;register_mail.html&#39;</span>
    <span class="n">email_subject</span> <span class="o">=</span> <span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Your Account activation&#39;</span><span class="p">)</span>
    <span class="n">activation_template</span> <span class="o">=</span> <span class="s1">&#39;activation.html&#39;</span>
    <span class="n">form_title</span> <span class="o">=</span> <span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Fill out the registration form&#39;</span><span class="p">)</span>
    <span class="n">error_message</span> <span class="o">=</span> <span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Not possible to register you at the moment, try again later&#39;</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Registration sent to your email&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This class will override:</p>
<blockquote>
<div><ul>
<li><p class="first">The template used to generate the email sent by the user. Take a look at the default template to get a simple
starting point <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/blob/master/flask_appbuilder/templates/appbuilder/general/security/register_mail.html">Mail template</a>.
Your template will receive the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li>first_name</li>
<li>last_name</li>
<li>username</li>
<li>url</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">The email subject</p>
</li>
<li><p class="first">The activation template. This the page shown to the user when he/she finishes the activation. Take a look at the default template to get a simple
starting point <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/blob/master/flask_appbuilder/templates/appbuilder/general/security/activation.html">Activation Template</a>.</p>
</li>
<li><p class="first">The form title. The title that is presented on the registration form.</p>
</li>
<li><p class="first">Message is the success message presented to the user when an email was successfully sent to him and his registration
was recorded.</p>
</li>
</ul>
</div></blockquote>
<p>After defining your own class, override SecurityManager class and set the <strong>registeruserdbview</strong> property
with your own class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MySecurityManager</span><span class="p">(</span><span class="n">SecurityManager</span><span class="p">):</span>
    <span class="n">registeruserdbview</span> <span class="o">=</span> <span class="n">MyRegisterUserDBView</span>
</pre></div>
</div>
<p>Then tell F.A.B. to use your security manager class, take a look at the <a class="reference internal" href="index.html#document-security"><span class="doc">Security</span></a> on how to do it.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-diagrams"></span><div class="section" id="diagrams">
<h3>Diagrams<a class="headerlink" href="#diagrams" title="Permalink to this headline">¶</a></h3>
<hr class="docutils" />
<p>This page will show various diagrams about the framework structure.</p>
<div class="section" id="class-view-diagram-tree">
<h4>Class View Diagram Tree<a class="headerlink" href="#class-view-diagram-tree" title="Permalink to this headline">¶</a></h4>
<hr class="docutils" />
<p>All class views tree reflect functionality each layer is responsible for a certain goal. You will be essentially using
BaseViews, IndexViews and the leafs ModelView, chart views and form views.</p>
<div><img height="840" src="_images/blockdiag-dd29374656ea6f18db245a145939ee1b89ef3935.png" width="1024" /></div><p>Next is a summary explanation for each class:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">BaseView:</th><td class="field-body">Collects all the exposed methods, creates the Flask blueprint and registers the URLs, initializes base permissions.</td>
</tr>
<tr class="field-even field"><th class="field-name">UtilView:</th><td class="field-body">Implements exposes <strong>back</strong> for special back UI functionality.</td>
</tr>
<tr class="field-odd field"><th class="field-name">IndexView:</th><td class="field-body">Special view for rendering the index page.</td>
</tr>
<tr class="field-even field"><th class="field-name">SimpleFormView:</th><td class="field-body">Subclass it to render WTForms.</td>
</tr>
<tr class="field-odd field"><th class="field-name">PublicFormView:</th><td class="field-body">Same as SimpleFormView but with public access only.</td>
</tr>
<tr class="field-even field"><th class="field-name">BaseModelView:</th><td class="field-body">Class responsible for an initial datamodel layer, implements search form and filters.</td>
</tr>
<tr class="field-odd field"><th class="field-name">BaseChartView:</th><td class="field-body">Basic chart view functionality.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GroupByChartView:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Subclass it to render Google charts with group by queries.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">DirectByChartView:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Subclass it to render Google charts with queries.</td>
</tr>
<tr class="field-even field"><th class="field-name">BaseCRUDView:</th><td class="field-body">Implement base functionality for add, edit, delete, creates all forms.</td>
</tr>
<tr class="field-odd field"><th class="field-name">RestCRUDView:</th><td class="field-body">Exposes the JSON REST API for CRUD methods and more.</td>
</tr>
<tr class="field-even field"><th class="field-name">ModelView:</th><td class="field-body">Subclass it to render your views based on models, with complete CRUD UI functionality.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">MasterDetailView:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Renders a master ModelView and multiple detail ModelViews thar are database related.</td>
</tr>
<tr class="field-even field"><th class="field-name">MultipleView:</th><td class="field-body">Renders multiple views on the same page (ex: ModelView and GroupByChartView)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="class-data-diagram-tree">
<h4>Class Data Diagram Tree<a class="headerlink" href="#class-data-diagram-tree" title="Permalink to this headline">¶</a></h4>
<hr class="docutils" />
<p>All classes for data access aim for abstracting the backend.</p>
<div><img height="280" src="_images/blockdiag-707db6c7b72f8879cb247054160203fc5aeb8e20.png" width="448" /></div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">BaseInterface:</th><td class="field-body">Interface class, imposes a unique API layer for data access.</td>
</tr>
<tr class="field-even field"><th class="field-name">SQLAInterface:</th><td class="field-body">Data access for SQLAlchemy.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">MongoEngineInterface:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Data access for MongoEngine (MongoDB).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GenericInterface:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Data access for custom data structures.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="class-security-diagram-tree">
<h4>Class Security Diagram Tree<a class="headerlink" href="#class-security-diagram-tree" title="Permalink to this headline">¶</a></h4>
<hr class="docutils" />
<p>Classes that are involved in implementing security. Register security views, implement various methods of authentication
manage permissions (insert/remove all permission on the backend).</p>
<div><img height="200" src="_images/blockdiag-8a8def9c21a112c8fef96122950d5008568ec2ac.png" width="832" /></div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">BaseManager:</th><td class="field-body">Base class for all Manager classes, holds AppBuilder class.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">AbstractSecurityManager:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Abstract class for Security managers, defines the must have methods.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">BaseSecurityManager:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Base class for security, registers security views, implements authentication,
inserts/removes all permission on the database, manages roles/users and views.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">sqla.SecurityManager:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Implements BaseSecurityManager for SQAlchemy.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">mongoengine.SecurityManager:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Implements BaseSecurityManager for MongoEngine.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="security-models-erd">
<h4>Security Models ERD<a class="headerlink" href="#security-models-erd" title="Permalink to this headline">¶</a></h4>
<hr class="docutils" />
<p>This is the ERD of the frameworks security models.</p>
<div><img height="200" src="_images/blockdiag-f9df956983badddecb47b28f0cce7417cb6868f3.png" width="832" /></div></div>
</div>
<span id="document-api"></span><div class="section" id="api-reference">
<h3>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h3>
<div class="section" id="flask-appbuilder">
<h4>flask_appbuilder<a class="headerlink" href="#flask-appbuilder" title="Permalink to this headline">¶</a></h4>
<div class="section" id="module-flask_appbuilder.base">
<span id="appbuilder"></span><h5>AppBuilder<a class="headerlink" href="#module-flask_appbuilder.base" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.base.AppBuilder">
<em class="property">class </em><code class="descclassname">flask_appbuilder.base.</code><code class="descname">AppBuilder</code><span class="sig-paren">(</span><em>app=None</em>, <em>session=None</em>, <em>menu=None</em>, <em>indexview=None</em>, <em>base_template='appbuilder/baselayout.html'</em>, <em>static_folder='static/appbuilder'</em>, <em>static_url_path='/appbuilder'</em>, <em>security_manager_class=None</em>, <em>update_perms=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/base.html#AppBuilder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.base.AppBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the base class for all the framework.
This is were you will register all your views
and create the menu structure.
Will hold your flask app object, all your views, and security classes.</p>
<p>initialize your application like this for SQLAlchemy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">SQLA</span><span class="p">,</span> <span class="n">AppBuilder</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLA</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
</pre></div>
</div>
<p>When using MongoEngine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">AppBuilder</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.security.mongoengine.manager</span> <span class="k">import</span> <span class="n">SecurityManager</span>
<span class="kn">from</span> <span class="nn">flask_mongoengine</span> <span class="k">import</span> <span class="n">MongoEngine</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
<span class="n">dbmongo</span> <span class="o">=</span> <span class="n">MongoEngine</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">security_manager_class</span><span class="o">=</span><span class="n">SecurityManager</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also create everything as an application factory.</p>
<dl class="method">
<dt id="flask_appbuilder.base.AppBuilder.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>app=None</em>, <em>session=None</em>, <em>menu=None</em>, <em>indexview=None</em>, <em>base_template='appbuilder/baselayout.html'</em>, <em>static_folder='static/appbuilder'</em>, <em>static_url_path='/appbuilder'</em>, <em>security_manager_class=None</em>, <em>update_perms=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/base.html#AppBuilder.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>AppBuilder constructor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app</strong> – The flask app object</li>
<li><strong>session</strong> – The SQLAlchemy session object</li>
<li><strong>menu</strong> – optional, a previous contructed menu</li>
<li><strong>indexview</strong> – optional, your customized indexview</li>
<li><strong>static_folder</strong> – optional, your override for the global static folder</li>
<li><strong>static_url_path</strong> – optional, your override for the global static url path</li>
<li><strong>security_manager_class</strong> – optional, pass your own security manager class</li>
<li><strong>update_perms</strong> – optional, update permissions flag (Boolean) you can use
FAB_UPDATE_PERMS config key also</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.base.AppBuilder.add_api">
<code class="descname">add_api</code><span class="sig-paren">(</span><em>baseview</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/base.html#AppBuilder.add_api"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.add_api" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Add a BaseApi class or child to AppBuilder</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>baseview</strong> – A BaseApi type class</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The instantiated base view</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.base.AppBuilder.add_link">
<code class="descname">add_link</code><span class="sig-paren">(</span><em>name</em>, <em>href</em>, <em>icon=''</em>, <em>label=''</em>, <em>category=''</em>, <em>category_icon=''</em>, <em>category_label=''</em>, <em>baseview=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/base.html#AppBuilder.add_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.add_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Add your own links to menu using this method</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> – The string name that identifies the menu.</li>
<li><strong>href</strong> – Override the generated href for the menu.
You can use an url string or an endpoint name</li>
<li><strong>icon</strong> – Font-Awesome icon name, optional.</li>
<li><strong>label</strong> – The label that will be displayed on the menu,
if absent param name will be used</li>
<li><strong>category</strong> – The menu category where the menu will be included,
if non provided the view will be accessible as a top menu.</li>
<li><strong>category_icon</strong> – Font-Awesome icon name for the category, optional.</li>
<li><strong>category_label</strong> – The label that will be displayed on the menu,
if absent param name will be used</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.base.AppBuilder.add_separator">
<code class="descname">add_separator</code><span class="sig-paren">(</span><em>category</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/base.html#AppBuilder.add_separator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.add_separator" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a separator to the menu, you will sequentially create the menu</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>category</strong> – The menu category where the separator will be included.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.base.AppBuilder.add_view">
<code class="descname">add_view</code><span class="sig-paren">(</span><em>baseview</em>, <em>name</em>, <em>href=''</em>, <em>icon=''</em>, <em>label=''</em>, <em>category=''</em>, <em>category_icon=''</em>, <em>category_label=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/base.html#AppBuilder.add_view"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.add_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Add your views associated with menus using this method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>baseview</strong> – A BaseView type class instantiated or not.
This method will instantiate the class for you if needed.</li>
<li><strong>name</strong> – The string name that identifies the menu.</li>
<li><strong>href</strong> – Override the generated href for the menu.
You can use an url string or an endpoint name
if non provided default_view from view will be set as href.</li>
<li><strong>icon</strong> – Font-Awesome icon name, optional.</li>
<li><strong>label</strong> – The label that will be displayed on the menu,
if absent param name will be used</li>
<li><strong>category</strong> – The menu category where the menu will be included,
if non provided the view will be acessible as a top menu.</li>
<li><strong>category_icon</strong> – Font-Awesome icon name for the category, optional.</li>
<li><strong>category_label</strong> – The label that will be displayed on the menu,
if absent param name will be used</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
<span class="c1"># Register a view, rendering a top menu without icon.</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyModelView</span><span class="p">(),</span> <span class="s2">&quot;My View&quot;</span><span class="p">)</span>
<span class="c1"># or not instantiated</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyModelView</span><span class="p">,</span> <span class="s2">&quot;My View&quot;</span><span class="p">)</span>
<span class="c1"># Register a view, a submenu &quot;Other View&quot; from &quot;Other&quot; with a phone icon.</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
    <span class="n">MyOtherModelView</span><span class="p">,</span>
    <span class="s2">&quot;Other View&quot;</span><span class="p">,</span>
    <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;fa-phone&#39;</span><span class="p">,</span>
    <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Others&quot;</span>
<span class="p">)</span>
<span class="c1"># Register a view, with category icon and translation.</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
    <span class="n">YetOtherModelView</span><span class="p">,</span>
    <span class="s2">&quot;Other View&quot;</span><span class="p">,</span>
    <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;fa-phone&#39;</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Other View&#39;</span><span class="p">),</span>
    <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Others&quot;</span><span class="p">,</span>
    <span class="n">category_icon</span><span class="o">=</span><span class="s1">&#39;fa-envelop&#39;</span><span class="p">,</span>
    <span class="n">category_label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Other View&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="c1"># Add a link</span>
<span class="n">appbuilder</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;www.google.com&quot;</span><span class="p">,</span> <span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa-google-plus&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.base.AppBuilder.add_view_no_menu">
<code class="descname">add_view_no_menu</code><span class="sig-paren">(</span><em>baseview</em>, <em>endpoint=None</em>, <em>static_folder=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/base.html#AppBuilder.add_view_no_menu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.add_view_no_menu" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Add your views without creating a menu.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>baseview</strong> – A BaseView type class instantiated.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.base.AppBuilder.app_icon">
<code class="descname">app_icon</code><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.app_icon" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the App icon location</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">String with relative app icon location</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.base.AppBuilder.app_name">
<code class="descname">app_name</code><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.app_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the App name</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">String with app name</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.base.AppBuilder.app_theme">
<code class="descname">app_theme</code><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.app_theme" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the App theme name</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">String app theme name</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.base.AppBuilder.get_app">
<code class="descname">get_app</code><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.get_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current or configured flask app</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Flask App</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.base.AppBuilder.get_session">
<code class="descname">get_session</code><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.get_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current sqlalchemy session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">SQLAlchemy Session</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.base.AppBuilder.init_app">
<code class="descname">init_app</code><span class="sig-paren">(</span><em>app</em>, <em>session</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/base.html#AppBuilder.init_app"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.init_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Will initialize the Flask app, supporting the app factory pattern.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app</strong> – </li>
<li><strong>session</strong> – The SQLAlchemy session</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.base.AppBuilder.security_cleanup">
<code class="descname">security_cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/base.html#AppBuilder.security_cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.security_cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is useful if you have changed
the name of your menus or classes,
changing them will leave behind permissions
that are not associated with anything.</p>
<p>You can use it always or just sometimes to
perform a security cleanup. Warning this will delete any permission
that is no longer part of any registered view or menu.</p>
<p>Remember invoke ONLY AFTER YOU HAVE REGISTERED ALL VIEWS</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.base.AppBuilder.security_converge">
<code class="descname">security_converge</code><span class="sig-paren">(</span><em>dry=False</em><span class="sig-paren">)</span> &#x2192; Dict[KT, VT]<a class="reference internal" href="_modules/flask_appbuilder/base.html#AppBuilder.security_converge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.security_converge" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>This method is useful when you use:</p>
<ul class="simple">
<li><cite>class_permission_name</cite></li>
<li><cite>previous_class_permission_name</cite></li>
<li><cite>method_permission_name</cite></li>
<li><cite>previous_method_permission_name</cite></li>
</ul>
<p>migrates all permissions to the new names on all the Roles</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dry</strong> – If True will not change DB</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Dict with all computed necessary operations</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.base.AppBuilder.version">
<code class="descname">version</code><a class="headerlink" href="#flask_appbuilder.base.AppBuilder.version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current F.A.B. version</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">String with the current F.A.B. version</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-flask_appbuilder.security.decorators">
<span id="flask-appbuilder-security-decorators"></span><h4>flask_appbuilder.security.decorators<a class="headerlink" href="#module-flask_appbuilder.security.decorators" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="flask_appbuilder.security.decorators.protect">
<code class="descclassname">flask_appbuilder.security.decorators.</code><code class="descname">protect</code><span class="sig-paren">(</span><em>allow_browser_login=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/decorators.html#protect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.decorators.protect" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to enable granular security permissions
to your API methods (BaseApi and child classes).
Permissions will be associated to a role, and roles are associated to users.</p>
<p>allow_browser_login will accept signed cookies obtained from the normal MVC app:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>
    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/dosonmething&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
    <span class="nd">@protect</span><span class="p">(</span><span class="n">allow_browser_login</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@safe</span>
    <span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">....</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/dosonmethingelse&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
    <span class="nd">@protect</span><span class="p">()</span>
    <span class="nd">@safe</span>
    <span class="k">def</span> <span class="nf">do_something_else</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">....</span>
</pre></div>
</div>
<p>By default the permission’s name is the methods name.</p>
</dd></dl>

<dl class="function">
<dt id="flask_appbuilder.security.decorators.has_access">
<code class="descclassname">flask_appbuilder.security.decorators.</code><code class="descname">has_access</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/decorators.html#has_access"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.decorators.has_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to enable granular security permissions to your methods.
Permissions will be associated to a role, and roles are associated to users.</p>
<p>By default the permission’s name is the methods name.</p>
</dd></dl>

<dl class="function">
<dt id="flask_appbuilder.security.decorators.permission_name">
<code class="descclassname">flask_appbuilder.security.decorators.</code><code class="descname">permission_name</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/decorators.html#permission_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.decorators.permission_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to override the name of the permission.
has_access will use the methods name has the permission name
if you want to override this add this decorator to your methods.
This is useful if you want to aggregate methods to permissions</p>
<p>It will add ‘_permission_name’ attribute to your method
that will be inspected by BaseView to collect your view’s
permissions.</p>
<p>Note that you should use &#64;has_access to execute after &#64;permission_name
like on the following example.</p>
<p>Use it like this to aggregate permissions for your methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>

    <span class="nd">@has_access</span>
    <span class="nd">@permission_name</span><span class="p">(</span><span class="s1">&#39;GeneralXPTO_Permission&#39;</span><span class="p">)</span>
    <span class="nd">@expose</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s1">&#39;/xpto&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">xpto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Your on xpto&quot;</span>

    <span class="nd">@has_access</span>
    <span class="nd">@permission_name</span><span class="p">(</span><span class="s1">&#39;GeneralXPTO_Permission&#39;</span><span class="p">)</span>
    <span class="nd">@expose</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s1">&#39;/xpto2&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">xpto2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Your on xpto2&quot;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – The name of the permission to override</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-flask_appbuilder.models.decorators">
<span id="flask-appbuilder-models-decorators"></span><h4>flask_appbuilder.models.decorators<a class="headerlink" href="#module-flask_appbuilder.models.decorators" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="flask_appbuilder.models.decorators.renders">
<code class="descclassname">flask_appbuilder.models.decorators.</code><code class="descname">renders</code><span class="sig-paren">(</span><em>col_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/decorators.html#renders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.decorators.renders" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to map your custom Model properties to actual
Model db properties. As an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">custom</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>

    <span class="nd">@renders</span><span class="p">(</span><span class="s1">&#39;custom&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">my_custom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># will render this columns as bold on ListWidget</span>
        <span class="k">return</span> <span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;&#39;</span> <span class="o">+</span> <span class="n">custom</span> <span class="o">+</span> <span class="s1">&#39;&lt;/b&gt;&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
    <span class="n">list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;my_custom&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-flask_appbuilder.api">
<span id="flask-appbuilder-api"></span><h4>flask_appbuilder.api<a class="headerlink" href="#module-flask_appbuilder.api" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="flask_appbuilder.api.expose">
<code class="descclassname">flask_appbuilder.api.</code><code class="descname">expose</code><span class="sig-paren">(</span><em>url='/'</em>, <em>methods=('GET'</em>, <em>)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#expose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.expose" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to expose API endpoints on your API classes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> – Relative URL for the endpoint</li>
<li><strong>methods</strong> – Allowed HTTP methods. By default only GET is allowed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="flask_appbuilder.api.rison">
<code class="descclassname">flask_appbuilder.api.</code><code class="descname">rison</code><span class="sig-paren">(</span><em>schema=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#rison"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.rison" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to parse URI <em>Rison</em> arguments to
a python data structure, your method gets the data
structure on kwargs[‘rison’]. Response is HTTP 400
if <em>Rison</em> is not correct:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>
        <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/risonjson&#39;</span><span class="p">)</span>
        <span class="nd">@rison</span><span class="p">()</span>
        <span class="k">def</span> <span class="nf">rison_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;rison&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>You can additionally pass a JSON schema to
validate Rison arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;arg1&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>
        <span class="nd">@expose</span><span class="p">(</span><span class="s1">&#39;/risonjson&#39;</span><span class="p">)</span>
        <span class="nd">@rison</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">rison_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;rison&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="flask_appbuilder.api.safe">
<code class="descclassname">flask_appbuilder.api.</code><code class="descname">safe</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#safe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.safe" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that catches uncaught exceptions and
return the response in JSON format (inspired on Superset code)</p>
</dd></dl>

<div class="section" id="baseapi">
<h5>BaseApi<a class="headerlink" href="#baseapi" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.api.BaseApi">
<em class="property">class </em><code class="descclassname">flask_appbuilder.api.</code><code class="descname">BaseApi</code><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi" title="Permalink to this definition">¶</a></dt>
<dd><p>All apis inherit from this class.
it’s constructor will register your exposed urls on flask
as a Blueprint.</p>
<p>This class does not expose any urls,
but provides a common base for all APIS.</p>
<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.allow_browser_login">
<code class="descname">allow_browser_login</code><em class="property"> = False</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.allow_browser_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Will allow flask-login cookie authorization on the API
default is False.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.apispec_parameter_schemas">
<code class="descname">apispec_parameter_schemas</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.apispec_parameter_schemas" title="Permalink to this definition">¶</a></dt>
<dd><p>Set your custom Rison parameter schemas here so that
they get registered on the OpenApi spec:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">custom_parameter</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">CustomApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>
    <span class="n">apispec_parameter_schemas</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;custom_parameter&quot;</span><span class="p">:</span> <span class="n">custom_parameter</span>
    <span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.base_permissions">
<code class="descname">base_permissions</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.base_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of allowed base permissions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExampleApi</span><span class="p">(</span><span class="n">BaseApi</span><span class="p">):</span>
    <span class="n">base_permissions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;can_get&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.class_permission_name">
<code class="descname">class_permission_name</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.class_permission_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override class permission name default fallback to self.__class__.__name__</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.BaseApi.get_init_inner_views">
<code class="descname">get_init_inner_views</code><span class="sig-paren">(</span><em>views</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi.get_init_inner_views"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi.get_init_inner_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets initialized inner views</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.BaseApi.get_uninit_inner_views">
<code class="descname">get_uninit_inner_views</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi.get_uninit_inner_views"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi.get_uninit_inner_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Will return a list with views that need to be initialized.
Normally related_views from ModelView</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.method_permission_name">
<code class="descname">method_permission_name</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.method_permission_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override method permission names, example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">method_permissions_name</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;get_list&#39;</span><span class="p">:</span> <span class="s1">&#39;read&#39;</span><span class="p">,</span>
    <span class="s1">&#39;get&#39;</span><span class="p">:</span> <span class="s1">&#39;read&#39;</span><span class="p">,</span>
    <span class="s1">&#39;put&#39;</span><span class="p">:</span> <span class="s1">&#39;write&#39;</span><span class="p">,</span>
    <span class="s1">&#39;post&#39;</span><span class="p">:</span> <span class="s1">&#39;write&#39;</span><span class="p">,</span>
    <span class="s1">&#39;delete&#39;</span><span class="p">:</span> <span class="s1">&#39;write&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.BaseApi.operation_helper">
<code class="descname">operation_helper</code><span class="sig-paren">(</span><em>path=None</em>, <em>operations=None</em>, <em>methods=None</em>, <em>func=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi.operation_helper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi.operation_helper" title="Permalink to this definition">¶</a></dt>
<dd><p>May mutate operations.
:param str path: Path to the resource
:param dict operations: A <cite>dict</cite> mapping HTTP methods to operation object. See
:param list methods: A list of methods registered for this path</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.BaseApi.path_helper">
<code class="descname">path_helper</code><span class="sig-paren">(</span><em>path=None</em>, <em>operations=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi.path_helper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi.path_helper" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Works like a apispec plugin
May return a path as string and mutate operations dict.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>str</em>) – Path to the resource</li>
<li><strong>operations</strong> (<em>dict</em>) – A <cite>dict</cite> mapping HTTP methods to operation object. See
<a class="reference external" href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#operationObject">https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#operationObject</a></li>
<li><strong>kwargs</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Return value should be a string or None. If a string is returned, it</p>
</td>
</tr>
</tbody>
</table>
<p>is set as the path.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.previous_class_permission_name">
<code class="descname">previous_class_permission_name</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.previous_class_permission_name" title="Permalink to this definition">¶</a></dt>
<dd><p>If set security converge will replace all permissions tuples
with this name by the class_permission_name or self.__class__.__name__</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.previous_method_permission_name">
<code class="descname">previous_method_permission_name</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.previous_method_permission_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Use same structure as method_permission_name. If set security converge
will replace all method permissions by the new ones</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.resource_name">
<code class="descname">resource_name</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.resource_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a custom resource name, overrides the inferred from Class name
makes no sense to use it with route base</p>
</dd></dl>

<dl class="staticmethod">
<dt id="flask_appbuilder.api.BaseApi.response">
<em class="property">static </em><code class="descname">response</code><span class="sig-paren">(</span><em>code</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi.response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi.response" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Generic HTTP JSON response method</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> – HTTP code (int)</li>
<li><strong>kwargs</strong> – Data structure for response (dict)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">HTTP Json response</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.BaseApi.response_400">
<code class="descname">response_400</code><span class="sig-paren">(</span><em>message=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi.response_400"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi.response_400" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Helper method for HTTP 400 response</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> – Error message (str)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">HTTP Json response</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.BaseApi.response_401">
<code class="descname">response_401</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi.response_401"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi.response_401" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Helper method for HTTP 401 response</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> – Error message (str)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">HTTP Json response</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.BaseApi.response_404">
<code class="descname">response_404</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi.response_404"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi.response_404" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Helper method for HTTP 404 response</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> – Error message (str)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">HTTP Json response</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.BaseApi.response_422">
<code class="descname">response_422</code><span class="sig-paren">(</span><em>message=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi.response_422"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi.response_422" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Helper method for HTTP 422 response</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> – Error message (str)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">HTTP Json response</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.BaseApi.response_500">
<code class="descname">response_500</code><span class="sig-paren">(</span><em>message=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#BaseApi.response_500"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.BaseApi.response_500" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Helper method for HTTP 500 response</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> – Error message (str)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">HTTP Json response</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.responses">
<code class="descname">responses</code><em class="property"> = {'400': {'content': {'application/json': {'schema': {'properties': {'message': {'type': 'string'}}, 'type': 'object'}}}, 'description': 'Bad request'}, '401': {'content': {'application/json': {'schema': {'properties': {'message': {'type': 'string'}}, 'type': 'object'}}}, 'description': 'Unauthorized'}, '404': {'content': {'application/json': {'schema': {'properties': {'message': {'type': 'string'}}, 'type': 'object'}}}, 'description': 'Not found'}, '422': {'content': {'application/json': {'schema': {'properties': {'message': {'type': 'string'}}, 'type': 'object'}}}, 'description': 'Could not process entity'}, '500': {'content': {'application/json': {'schema': {'properties': {'message': {'type': 'string'}}, 'type': 'object'}}}, 'description': 'Fatal error'}}</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.responses" title="Permalink to this definition">¶</a></dt>
<dd><p>Override custom OpenApi responses</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.route_base">
<code class="descname">route_base</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.route_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the route base where all methods will suffix from</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.BaseApi.version">
<code class="descname">version</code><em class="property"> = 'v1'</em><a class="headerlink" href="#flask_appbuilder.api.BaseApi.version" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the Api version for this resource/class</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="modelrestapi">
<h5>ModelRestApi<a class="headerlink" href="#modelrestapi" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.api.ModelRestApi">
<em class="property">class </em><code class="descclassname">flask_appbuilder.api.</code><code class="descname">ModelRestApi</code><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.add_columns">
<code class="descname">add_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.add_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be allowed to post</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.add_exclude_columns">
<code class="descname">add_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.add_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns to exclude from the add endpoint.
By default all columns are included.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.add_model_schema">
<code class="descname">add_model_schema</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.add_model_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to provide your own marshmallow Schema
for JSON to SQLA dumps</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.add_query_rel_fields">
<code class="descname">add_query_rel_fields</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.add_query_rel_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Add Customized query for related add fields.
Assign a dictionary where the keys are the column names of
the related models to filter, the value for each key, is a list of lists with the
same format as base_filter
{‘relation col name’:[[‘Related model col’,FilterClass,’Filter Value’],…],…}
Add a custom filter to form related fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">add_query_rel_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;group&#39;</span><span class="p">:[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="n">FilterStartsWith</span><span class="p">,</span><span class="s1">&#39;W&#39;</span><span class="p">]]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.add_title">
<code class="descname">add_title</code><em class="property"> = ''</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.add_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Add Title , if not configured the default is
‘Add ‘ with pretty model name</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>pk</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete item from Model
—
delete:</p>
<blockquote>
<div><p>parameters:
- in: path</p>
<blockquote>
<div><dl class="docutils">
<dt>schema:</dt>
<dd>type: integer</dd>
</dl>
<p>name: pk</p>
</div></blockquote>
<dl class="docutils">
<dt>responses:</dt>
<dd><dl class="first last docutils">
<dt>200:</dt>
<dd><p class="first">description: Item deleted
content:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>application/json:</dt>
<dd><dl class="first last docutils">
<dt>schema:</dt>
<dd><p class="first">type: object
properties:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>message:</dt>
<dd>type: string</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>404:</dt>
<dd>$ref: ‘#/components/responses/404’</dd>
<dt>422:</dt>
<dd>$ref: ‘#/components/responses/422’</dd>
<dt>500:</dt>
<dd>$ref: ‘#/components/responses/500’</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.description_columns">
<code class="descname">description_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.description_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary with column descriptions that will be shown on the forms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">MyTable</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>

    <span class="n">description_columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;your models name column&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;address&#39;</span><span class="p">:</span><span class="s1">&#39;the address column&#39;</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.edit_columns">
<code class="descname">edit_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.edit_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be allowed to update</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.edit_exclude_columns">
<code class="descname">edit_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.edit_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns to exclude from the edit endpoint.
By default all columns are included.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.edit_model_schema">
<code class="descname">edit_model_schema</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.edit_model_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to provide your own marshmallow Schema
for JSON to SQLA dumps</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.edit_query_rel_fields">
<code class="descname">edit_query_rel_fields</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.edit_query_rel_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Add Customized query for related edit fields.
Assign a dictionary where the keys are the column names of
the related models to filter, the value for each key, is a list of lists with the
same format as base_filter
{‘relation col name’:[[‘Related model col’,FilterClass,’Filter Value’],…],…}
Add a custom filter to form related fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">Contact</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
    <span class="n">edit_query_rel_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;group&#39;</span><span class="p">:[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="n">FilterStartsWith</span><span class="p">,</span><span class="s1">&#39;W&#39;</span><span class="p">]]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.edit_title">
<code class="descname">edit_title</code><em class="property"> = ''</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.edit_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Edit Title , if not configured the default is
‘Edit ‘ with pretty model name</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>pk</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get item from Model
—
get:</p>
<blockquote>
<div><p>parameters:
- in: path</p>
<blockquote>
<div><dl class="docutils">
<dt>schema:</dt>
<dd>type: integer</dd>
</dl>
<p>name: pk</p>
</div></blockquote>
<ul class="simple">
<li>$ref: ‘#/components/parameters/get_item_schema’</li>
</ul>
<dl class="docutils">
<dt>responses:</dt>
<dd><dl class="first last docutils">
<dt>200:</dt>
<dd><p class="first">description: Item from Model
content:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>application/json:</dt>
<dd><dl class="first last docutils">
<dt>schema:</dt>
<dd><p class="first">type: object
properties:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>label_columns:</dt>
<dd>type: object</dd>
<dt>show_columns:</dt>
<dd><p class="first">type: array
items:</p>
<blockquote class="last">
<div>type: string</div></blockquote>
</dd>
<dt>description_columns:</dt>
<dd>type: object</dd>
<dt>show_title:</dt>
<dd>type: string</dd>
<dt>id:</dt>
<dd>type: string</dd>
<dt>result:</dt>
<dd>$ref: ‘#/components/schemas/{{self.__class__.__name__}}.get’</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>400:</dt>
<dd>$ref: ‘#/components/responses/400’</dd>
<dt>401:</dt>
<dd>$ref: ‘#/components/responses/401’</dd>
<dt>404:</dt>
<dd>$ref: ‘#/components/responses/404’</dd>
<dt>422:</dt>
<dd>$ref: ‘#/components/responses/422’</dd>
<dt>500:</dt>
<dd>$ref: ‘#/components/responses/500’</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.get_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of items from Model
—
get:</p>
<blockquote>
<div><p>parameters:
- $ref: ‘#/components/parameters/get_list_schema’
responses:</p>
<blockquote>
<div><dl class="docutils">
<dt>200:</dt>
<dd><p class="first">description: Items from Model
content:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>application/json:</dt>
<dd><dl class="first last docutils">
<dt>schema:</dt>
<dd><p class="first">type: object
properties:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>label_columns:</dt>
<dd>type: object</dd>
<dt>list_columns:</dt>
<dd><p class="first">type: array
items:</p>
<blockquote class="last">
<div>type: string</div></blockquote>
</dd>
<dt>description_columns:</dt>
<dd>type: object</dd>
<dt>list_title:</dt>
<dd>type: string</dd>
<dt>ids:</dt>
<dd><p class="first">type: array
items:</p>
<blockquote class="last">
<div>type: string</div></blockquote>
</dd>
<dt>order_columns:</dt>
<dd><p class="first">type: array
items:</p>
<blockquote class="last">
<div>type: string</div></blockquote>
</dd>
<dt>result:</dt>
<dd><p class="first">type: array
items:</p>
<blockquote class="last">
<div>$ref: ‘#/components/schemas/{{self.__class__.__name__}}.get_list’  # noqa</div></blockquote>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>400:</dt>
<dd>$ref: ‘#/components/responses/400’</dd>
<dt>401:</dt>
<dd>$ref: ‘#/components/responses/401’</dd>
<dt>422:</dt>
<dd>$ref: ‘#/components/responses/422’</dd>
<dt>500:</dt>
<dd>$ref: ‘#/components/responses/500’</dd>
</dl>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.info">
<code class="descname">info</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint that renders a response for CRUD REST meta data
—
get:</p>
<blockquote>
<div><p>parameters:
- $ref: ‘#/components/parameters/get_info_schema’
responses:</p>
<blockquote>
<div><dl class="docutils">
<dt>200:</dt>
<dd><p class="first">description: Item from Model
content:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>application/json:</dt>
<dd><dl class="first last docutils">
<dt>schema:</dt>
<dd><p class="first">type: object
properties:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>add_columns:</dt>
<dd>type: object</dd>
<dt>edit_columns:</dt>
<dd>type: object</dd>
<dt>filters:</dt>
<dd>type: object</dd>
<dt>permissions:</dt>
<dd><p class="first">type: array
items:</p>
<blockquote class="last">
<div>type: string</div></blockquote>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>400:</dt>
<dd>$ref: ‘#/components/responses/400’</dd>
<dt>401:</dt>
<dd>$ref: ‘#/components/responses/401’</dd>
<dt>422:</dt>
<dd>$ref: ‘#/components/responses/422’</dd>
<dt>500:</dt>
<dd>$ref: ‘#/components/responses/500’</dd>
</dl>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.list_columns">
<code class="descname">list_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.list_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be displayed on the list view.
Use it to control the order of the display</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.list_exclude_columns">
<code class="descname">list_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.list_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns to exclude from the get list endpoint.
By default all columns are included.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.list_model_schema">
<code class="descname">list_model_schema</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.list_model_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to provide your own marshmallow Schema
for JSON to SQLA dumps</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.list_title">
<code class="descname">list_title</code><em class="property"> = ''</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.list_title" title="Permalink to this definition">¶</a></dt>
<dd><p>List Title, if not configured the default is
‘List ‘ with pretty model name</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.model2schemaconverter">
<code class="descname">model2schemaconverter</code><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.model2schemaconverter" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.api.convert.Model2SchemaConverter</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.order_columns">
<code class="descname">order_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.order_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Allowed order columns</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.order_rel_fields">
<code class="descname">order_rel_fields</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.order_rel_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Impose order on related fields.
assign a dictionary where the keys are the related column names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelRestApi</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">Contact</span><span class="p">)</span>
    <span class="n">order_rel_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;asc&#39;</span><span class="p">)</span>
        <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;asc&#39;</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.page_size">
<code class="descname">page_size</code><em class="property"> = 20</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.page_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this property to change default page size</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.post">
<code class="descname">post</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.post" title="Permalink to this definition">¶</a></dt>
<dd><p>POST item to Model
—
post:</p>
<blockquote>
<div><dl class="docutils">
<dt>requestBody:</dt>
<dd><p class="first">description: Model schema
required: true
content:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>application/json:</dt>
<dd><dl class="first last docutils">
<dt>schema:</dt>
<dd>$ref: ‘#/components/schemas/{{self.__class__.__name__}}.post’</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>responses:</dt>
<dd><dl class="first last docutils">
<dt>201:</dt>
<dd><p class="first">description: Item inserted
content:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>application/json:</dt>
<dd><dl class="first last docutils">
<dt>schema:</dt>
<dd><p class="first">type: object
properties:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>id:</dt>
<dd>type: string</dd>
<dt>result:</dt>
<dd>$ref: ‘#/components/schemas/{{self.__class__.__name__}}.post’</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>400:</dt>
<dd>$ref: ‘#/components/responses/400’</dd>
<dt>401:</dt>
<dd>$ref: ‘#/components/responses/401’</dd>
<dt>422:</dt>
<dd>$ref: ‘#/components/responses/422’</dd>
<dt>500:</dt>
<dd>$ref: ‘#/components/responses/500’</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.post_add">
<code class="descname">post_add</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.post_add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.post_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called after update</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.post_delete">
<code class="descname">post_delete</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.post_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.post_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called after delete</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.post_update">
<code class="descname">post_update</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.post_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.post_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called after update</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.pre_add">
<code class="descname">pre_add</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.pre_add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.pre_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called before add.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.pre_delete">
<code class="descname">pre_delete</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.pre_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.pre_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called before delete</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.pre_get">
<code class="descname">pre_get</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.pre_get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.pre_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called before data is sent
to the requester on get item endpoint.
You can use it to mutate the response sent.
Note that any new field added will not be reflected on the OpenApi spec.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.pre_get_list">
<code class="descname">pre_get_list</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.pre_get_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.pre_get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called before data is sent
to the requester on get list endpoint.
You can use it to mutate the response sent
Note that any new field added will not be reflected on the OpenApi spec.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.pre_update">
<code class="descname">pre_update</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.pre_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.pre_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, this method is called before the update takes place.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.api.ModelRestApi.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>pk</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/api.html#ModelRestApi.put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.put" title="Permalink to this definition">¶</a></dt>
<dd><p>POST item to Model
—
put:</p>
<blockquote>
<div><p>parameters:
- in: path</p>
<blockquote>
<div><dl class="docutils">
<dt>schema:</dt>
<dd>type: integer</dd>
</dl>
<p>name: pk</p>
</div></blockquote>
<dl class="docutils">
<dt>requestBody:</dt>
<dd><p class="first">description: Model schema
required: true
content:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>application/json:</dt>
<dd><dl class="first last docutils">
<dt>schema:</dt>
<dd>$ref: ‘#/components/schemas/{{self.__class__.__name__}}.put’</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>responses:</dt>
<dd><dl class="first last docutils">
<dt>200:</dt>
<dd><p class="first">description: Item changed
content:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>application/json:</dt>
<dd><dl class="first last docutils">
<dt>schema:</dt>
<dd><p class="first">type: object
properties:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>result:</dt>
<dd>$ref: ‘#/components/schemas/{{self.__class__.__name__}}.put’</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>400:</dt>
<dd>$ref: ‘#/components/responses/400’</dd>
<dt>401:</dt>
<dd>$ref: ‘#/components/responses/401’</dd>
<dt>404:</dt>
<dd>$ref: ‘#/components/responses/404’</dd>
<dt>422:</dt>
<dd>$ref: ‘#/components/responses/422’</dd>
<dt>500:</dt>
<dd>$ref: ‘#/components/responses/500’</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.show_columns">
<code class="descname">show_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.show_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) for the get item endpoint.
Use it to control the order of the results</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.show_exclude_columns">
<code class="descname">show_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.show_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns to exclude from the get item endpoint.
By default all columns are included.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.show_model_schema">
<code class="descname">show_model_schema</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.show_model_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to provide your own marshmallow Schema
for JSON to SQLA dumps</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.show_title">
<code class="descname">show_title</code><em class="property"> = ''</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.show_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Show Title , if not configured the default is
‘Show ‘ with pretty model name</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.api.ModelRestApi.validators_columns">
<code class="descname">validators_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.api.ModelRestApi.validators_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary to add your own validators for forms</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-flask_appbuilder.baseviews">
<span id="flask-appbuilder-baseviews"></span><h4>flask_appbuilder.baseviews<a class="headerlink" href="#module-flask_appbuilder.baseviews" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="flask_appbuilder.baseviews.expose">
<code class="descclassname">flask_appbuilder.baseviews.</code><code class="descname">expose</code><span class="sig-paren">(</span><em>url='/'</em>, <em>methods=('GET'</em>, <em>)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#expose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.expose" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to expose views on your view classes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> – Relative URL for the view</li>
<li><strong>methods</strong> – Allowed HTTP methods. By default only GET is allowed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="baseview">
<h5>BaseView<a class="headerlink" href="#baseview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.baseviews.BaseView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.baseviews.</code><code class="descname">BaseView</code><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView" title="Permalink to this definition">¶</a></dt>
<dd><p>All views inherit from this class.
it’s constructor will register your exposed urls on flask as a Blueprint.</p>
<p>This class does not expose any urls, but provides a common base for all views.</p>
<p>Extend this class if you want to expose methods for your own templates</p>
<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseView.base_permissions">
<code class="descname">base_permissions</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.base_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>List with allowed base permission.
Use it like this if you want to restrict your view to readonly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">base_permissions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;can_list&#39;</span><span class="p">,</span><span class="s1">&#39;can_show&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseView.class_permission_name">
<code class="descname">class_permission_name</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.class_permission_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override class permission name default fallback to self.__class__.__name__</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseView.create_blueprint">
<code class="descname">create_blueprint</code><span class="sig-paren">(</span><em>appbuilder</em>, <em>endpoint=None</em>, <em>static_folder=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseView.create_blueprint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.create_blueprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Create Flask blueprint. You will generally not use it</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>appbuilder</strong> – the AppBuilder object</li>
<li><strong>endpoint</strong> – endpoint override for this blueprint,
will assume class name if not provided</li>
<li><strong>static_folder</strong> – the relative override for static folder,
if omitted application will use the appbuilder static</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseView.default_view">
<code class="descname">default_view</code><em class="property"> = 'list'</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.default_view" title="Permalink to this definition">¶</a></dt>
<dd><p>the default view for this BaseView, to be used with url_for (method name)</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseView.extra_args">
<code class="descname">extra_args</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.extra_args" title="Permalink to this definition">¶</a></dt>
<dd><p>dictionary for injecting extra arguments into template</p>
</dd></dl>

<dl class="classmethod">
<dt id="flask_appbuilder.baseviews.BaseView.get_default_url">
<em class="property">classmethod </em><code class="descname">get_default_url</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseView.get_default_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.get_default_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the url for this class default endpoint</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseView.get_init_inner_views">
<code class="descname">get_init_inner_views</code><span class="sig-paren">(</span><em>views</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseView.get_init_inner_views"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.get_init_inner_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets initialized inner views</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseView.get_redirect">
<code class="descname">get_redirect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseView.get_redirect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.get_redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the previous url.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseView.get_uninit_inner_views">
<code class="descname">get_uninit_inner_views</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseView.get_uninit_inner_views"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.get_uninit_inner_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Will return a list with views that need to be initialized.
Normally related_views from ModelView</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseView.method_permission_name">
<code class="descname">method_permission_name</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.method_permission_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override method permission names, example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">method_permissions_name</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;get_list&#39;</span><span class="p">:</span> <span class="s1">&#39;read&#39;</span><span class="p">,</span>
    <span class="s1">&#39;get&#39;</span><span class="p">:</span> <span class="s1">&#39;read&#39;</span><span class="p">,</span>
    <span class="s1">&#39;put&#39;</span><span class="p">:</span> <span class="s1">&#39;write&#39;</span><span class="p">,</span>
    <span class="s1">&#39;post&#39;</span><span class="p">:</span> <span class="s1">&#39;write&#39;</span><span class="p">,</span>
    <span class="s1">&#39;delete&#39;</span><span class="p">:</span> <span class="s1">&#39;write&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseView.previous_class_permission_name">
<code class="descname">previous_class_permission_name</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.previous_class_permission_name" title="Permalink to this definition">¶</a></dt>
<dd><p>If set security cleanup will remove all permissions tuples
with this name</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseView.previous_method_permission_name">
<code class="descname">previous_method_permission_name</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.previous_method_permission_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Use same structure as method_permission_name. If set security converge
will replace all method permissions by the new ones</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseView.render_template">
<code class="descname">render_template</code><span class="sig-paren">(</span><em>template</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseView.render_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.render_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this method on your own endpoints, will pass the extra_args
to the templates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>template</strong> – The template relative path</li>
<li><strong>kwargs</strong> – arguments to be passed to the template</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseView.route_base">
<code class="descname">route_base</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.route_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this if you want to define your own relative url</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseView.static_folder">
<code class="descname">static_folder</code><em class="property"> = 'static'</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.static_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>The static folder relative location</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseView.template_folder">
<code class="descname">template_folder</code><em class="property"> = 'templates'</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.template_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>The template folder relative location</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseView.update_redirect">
<code class="descname">update_redirect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseView.update_redirect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseView.update_redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>Call it on your own endpoint’s to update the back history navigation.
If you bypass it, the next submit or back will go over it.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="baseformview">
<h5>BaseFormView<a class="headerlink" href="#baseformview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.baseviews.BaseFormView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.baseviews.</code><code class="descname">BaseFormView</code><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseFormView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseFormView" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class FormView’s</p>
<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseFormView.default_view">
<code class="descname">default_view</code><em class="property"> = 'this_form_get'</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseFormView.default_view" title="Permalink to this definition">¶</a></dt>
<dd><p>The form view default entry endpoint</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseFormView.edit_widget">
<code class="descname">edit_widget</code><a class="headerlink" href="#flask_appbuilder.baseviews.BaseFormView.edit_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.widgets.FormWidget</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseFormView.form">
<code class="descname">form</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseFormView.form" title="Permalink to this definition">¶</a></dt>
<dd><p>The WTF form to render</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseFormView.form_columns">
<code class="descname">form_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseFormView.form_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>The form columns to include, if empty will include all</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseFormView.form_fieldsets">
<code class="descname">form_fieldsets</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseFormView.form_fieldsets" title="Permalink to this definition">¶</a></dt>
<dd><p>Form field sets</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseFormView.form_get">
<code class="descname">form_get</code><span class="sig-paren">(</span><em>form</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseFormView.form_get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseFormView.form_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this method to implement your form processing</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseFormView.form_post">
<code class="descname">form_post</code><span class="sig-paren">(</span><em>form</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseFormView.form_post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseFormView.form_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this method to implement your form processing</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>form</strong> – WTForm form</td>
</tr>
</tbody>
</table>
<p>Return None or a flask response to render
a custom template or redirect the user</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseFormView.form_title">
<code class="descname">form_title</code><em class="property"> = ''</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseFormView.form_title" title="Permalink to this definition">¶</a></dt>
<dd><p>The form title to be displayed</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="basemodelview">
<h5>BaseModelView<a class="headerlink" href="#basemodelview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.baseviews.BaseModelView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.baseviews.</code><code class="descname">BaseModelView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseModelView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class of ModelView and ChartView, all properties are inherited
Customize ModelView and ChartView overriding this properties</p>
<p>This class supports all the basics for query</p>
<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.base_filters">
<code class="descname">base_filters</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.base_filters" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the view use: [[‘column_name’,BaseFilter,’value’],]</p>
<p>example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_user</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">user</span>

<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
    <span class="n">base_filters</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;created_by&#39;</span><span class="p">,</span> <span class="n">FilterEqualFunction</span><span class="p">,</span> <span class="n">get_user</span><span class="p">],</span>
                    <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">FilterStartsWith</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.base_order">
<code class="descname">base_order</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.base_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this property to set default ordering for lists (‘col_name’,’asc|desc’):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
    <span class="n">base_order</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;my_column_name&#39;</span><span class="p">,</span><span class="s1">&#39;asc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.datamodel">
<code class="descname">datamodel</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.datamodel" title="Permalink to this definition">¶</a></dt>
<dd><p>Your sqla model you must initialize it like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.label_columns">
<code class="descname">label_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.label_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of labels for your columns,
override this if you want different pretify labels</p>
<p>example (will just override the label for name column):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
    <span class="n">label_columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;My Name Label Override&#39;</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.search_columns">
<code class="descname">search_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.search_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>List with allowed search columns, if not provided
all possible search columns will be used
If you want to limit the search (<em>filter</em>) columns possibilities,
define it with a list of column names from your model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MyTable</span><span class="p">)</span>
    <span class="n">search_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;address&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.search_exclude_columns">
<code class="descname">search_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.search_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>List with columns to exclude from search.
Search includes all possible columns by default</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.search_form">
<code class="descname">search_form</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.search_form" title="Permalink to this definition">¶</a></dt>
<dd><p>To implement your own add WTF form for Search</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.search_form_extra_fields">
<code class="descname">search_form_extra_fields</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.search_form_extra_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary containing column names and a WTForm
Form fields to be added to the Add form, these fields do not
exist on the model itself ex:</p>
<p>search_form_extra_fields = {‘some_col’:BooleanField(‘Some Col’, default=False)}</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.search_form_query_rel_fields">
<code class="descname">search_form_query_rel_fields</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.search_form_query_rel_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Add Customized query for related fields on search form.
Assign a dictionary where the keys are the column names of
the related models to filter, the value for each key, is a list of lists with the
same format as base_filter
{‘relation col name’:[[‘Related model col’,FilterClass,’Filter Value’],…],…}
Add a custom filter to form related fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">Contact</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
    <span class="n">search_form_query_rel_fields</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;group&#39;</span><span class="p">:[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="n">FilterStartsWith</span><span class="p">,</span><span class="s1">&#39;W&#39;</span><span class="p">]]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseModelView.search_widget">
<code class="descname">search_widget</code><a class="headerlink" href="#flask_appbuilder.baseviews.BaseModelView.search_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.widgets.SearchWidget</span></code></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="basecrudview">
<h5>BaseCRUDView<a class="headerlink" href="#basecrudview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.baseviews.BaseCRUDView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.baseviews.</code><code class="descname">BaseCRUDView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for ModelView, all properties are inherited
Customize ModelView overriding this properties</p>
<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_columns">
<code class="descname">add_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be displayed on the add form view.
Use it to control the order of the display</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_exclude_columns">
<code class="descname">add_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns to exclude from the add form.
By default all columns are included.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_fieldsets">
<code class="descname">add_fieldsets</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_fieldsets" title="Permalink to this definition">¶</a></dt>
<dd><p>add fieldsets django style (look at show_fieldsets for an example)</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_form">
<code class="descname">add_form</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_form" title="Permalink to this definition">¶</a></dt>
<dd><p>To implement your own, assign WTF form for Add</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_form_extra_fields">
<code class="descname">add_form_extra_fields</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_form_extra_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary containing column names and a WTForm
Form fields to be added to the Add form, these fields do not
exist on the model itself ex:</p>
<p>add_form_extra_fields = {‘some_col’:BooleanField(‘Some Col’, default=False)}</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_form_query_rel_fields">
<code class="descname">add_form_query_rel_fields</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_form_query_rel_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Add Customized query for related fields to add form.
Assign a dictionary where the keys are the column names of
the related models to filter, the value for each key, is a list of lists with the
same format as base_filter
{</p>
<blockquote>
<div><dl class="docutils">
<dt>‘relation col name’:</dt>
<dd>[[‘Related model col’, FilterClass, ‘Filter Value’],…],…</dd>
</dl>
</div></blockquote>
<p>}
Add a custom filter to form related fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">Contact</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
    <span class="n">add_form_query_rel_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">FilterStartsWith</span><span class="p">,</span> <span class="s1">&#39;W&#39;</span><span class="p">]]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_template">
<code class="descname">add_template</code><em class="property"> = 'appbuilder/general/model/add.html'</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Your own add jinja2 template for add</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_title">
<code class="descname">add_title</code><em class="property"> = ''</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Add Title , if not configured the default is ‘Add ‘ with pretty model name</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.add_widget">
<code class="descname">add_widget</code><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.add_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.widgets.FormWidget</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.description_columns">
<code class="descname">description_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.description_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary with column descriptions that will be shown on the forms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">MyTable</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>

    <span class="n">description_columns</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;your models name column&#39;</span><span class="p">,</span>
        <span class="s1">&#39;address&#39;</span><span class="p">:</span> <span class="s1">&#39;the address column&#39;</span>
    <span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_columns">
<code class="descname">edit_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be displayed on the edit form view.
Use it to control the order of the display</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_exclude_columns">
<code class="descname">edit_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>A list of columns to exclude from the edit form.</dt>
<dd>By default all columns are included.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_fieldsets">
<code class="descname">edit_fieldsets</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_fieldsets" title="Permalink to this definition">¶</a></dt>
<dd><p>edit fieldsets django style (look at show_fieldsets for an example)</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_form">
<code class="descname">edit_form</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_form" title="Permalink to this definition">¶</a></dt>
<dd><p>To implement your own, assign WTF form for Edit</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_form_extra_fields">
<code class="descname">edit_form_extra_fields</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_form_extra_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary to add extra fields to the Edit form using this property</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_form_query_rel_fields">
<code class="descname">edit_form_query_rel_fields</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_form_query_rel_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Add Customized query for related fields to edit form.
Assign a dictionary where the keys are the column names of
the related models to filter, the value for each key, is a list of lists with the
same format as base_filter
{</p>
<blockquote>
<div><dl class="docutils">
<dt>‘relation col name’:</dt>
<dd>[[‘Related model col’, FilterClass, ‘Filter Value’],…],…</dd>
</dl>
</div></blockquote>
<p>}
Add a custom filter to form related fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContactModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">Contact</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
    <span class="n">edit_form_query_rel_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;group&#39;</span><span class="p">:[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="n">FilterStartsWith</span><span class="p">,</span><span class="s1">&#39;W&#39;</span><span class="p">]]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_template">
<code class="descname">edit_template</code><em class="property"> = 'appbuilder/general/model/edit.html'</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Your own add jinja2 template for edit</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_title">
<code class="descname">edit_title</code><em class="property"> = ''</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Edit Title , if not configured the default is ‘Edit ‘ with pretty model name</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.edit_widget">
<code class="descname">edit_widget</code><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.edit_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.widgets.FormWidget</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.formatters_columns">
<code class="descname">formatters_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.formatters_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of formatter used to format the display of columns</p>
<p>formatters_columns = {‘some_date_col’: lambda x: x.isoformat() }</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.get_init_inner_views">
<code class="descname">get_init_inner_views</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView.get_init_inner_views"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.get_init_inner_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of related ModelViews after they have been initialized</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.get_uninit_inner_views">
<code class="descname">get_uninit_inner_views</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView.get_uninit_inner_views"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.get_uninit_inner_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Will return a list with views that need to be initialized.
Normally related_views from ModelView</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.list_columns">
<code class="descname">list_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.list_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be displayed on the list view.
Use it to control the order of the display</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.list_template">
<code class="descname">list_template</code><em class="property"> = 'appbuilder/general/model/list.html'</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.list_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Your own add jinja2 template for list</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.list_title">
<code class="descname">list_title</code><em class="property"> = ''</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.list_title" title="Permalink to this definition">¶</a></dt>
<dd><p>List Title, if not configured the default is ‘List ‘ with pretty model name</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.list_widget">
<code class="descname">list_widget</code><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.list_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.widgets.ListWidget</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.order_columns">
<code class="descname">order_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.order_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Allowed order columns</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.page_size">
<code class="descname">page_size</code><em class="property"> = 10</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.page_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this property to change default page size</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.post_add">
<code class="descname">post_add</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView.post_add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.post_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called after update</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.post_delete">
<code class="descname">post_delete</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView.post_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.post_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called after delete</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.post_update">
<code class="descname">post_update</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView.post_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.post_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called after update</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.pre_add">
<code class="descname">pre_add</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView.pre_add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.pre_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called before add.
If an exception is raised by this method,
the message is shown to the user and the add operation is aborted.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.pre_delete">
<code class="descname">pre_delete</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView.pre_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.pre_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called before delete
If an exception is raised by this method,
the message is shown to the user and the delete operation is
aborted. Because of this behavior, it can be used as a way to
implement more complex logic around deletes. For instance
allowing only the original creator of the object to delete it.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.pre_update">
<code class="descname">pre_update</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView.pre_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.pre_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, this method is called before the update takes place.
If an exception is raised by this method,
the message is shown to the user and the update operation is
aborted. Because of this behavior, it can be used as a way to
implement more complex logic around updates. For instance
allowing only the original creator of the object to update it.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.prefill_form">
<code class="descname">prefill_form</code><span class="sig-paren">(</span><em>form</em>, <em>pk</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView.prefill_form"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.prefill_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called only if the current action is rendering
an edit form (a GET request), and is used to perform additional action to
prefill the form.</p>
<p>This is useful when you have added custom fields that depend on the
database contents. Fields that were added by name of a normal column
or relationship should work out of the box.</p>
<p>example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">prefill_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">email</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
        <span class="n">form</span><span class="o">.</span><span class="n">email_confirmation</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">email</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.process_form">
<code class="descname">process_form</code><span class="sig-paren">(</span><em>form</em>, <em>is_created</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/baseviews.html#BaseCRUDView.process_form"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.process_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this, will be called only if the current action is submitting
a create/edit form (a POST request), and is used to perform additional
action before the form is used to populate the item.</p>
<p>By default does nothing.</p>
<p>example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">is_created</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">form</span><span class="o">.</span><span class="n">owner</span><span class="p">:</span>
        <span class="n">form</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;n/a&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.related_views">
<code class="descname">related_views</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.related_views" title="Permalink to this definition">¶</a></dt>
<dd><p>List with ModelView classes
Will be displayed related with this one using relationship sqlalchemy property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">Group</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">MyOtherRelatedView</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.show_columns">
<code class="descname">show_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.show_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns (or model’s methods) to be displayed on the show view.
Use it to control the order of the display</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.show_exclude_columns">
<code class="descname">show_exclude_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.show_exclude_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of columns to exclude from the show view.
By default all columns are included.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.show_fieldsets">
<code class="descname">show_fieldsets</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.show_fieldsets" title="Permalink to this definition">¶</a></dt>
<dd><p>show fieldsets django style [(&lt;’TITLE’<a href="#id1"><span class="problematic" id="id2">|</span></a>None&gt;, {‘fields’:[&lt;F1&gt;,&lt;F2&gt;,…]}),….]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">MyTable</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>

    <span class="n">show_fieldsets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;Summary&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s1">&#39;name&#39;</span><span class="p">,</span>
                <span class="s1">&#39;address&#39;</span><span class="p">,</span>
                <span class="s1">&#39;group&#39;</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Personal Info&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s1">&#39;birthday&#39;</span><span class="p">,</span>
                <span class="s1">&#39;personal_phone&#39;</span>
                <span class="p">],</span>
            <span class="s1">&#39;expanded&#39;</span><span class="p">:</span><span class="kc">False</span>
            <span class="p">}</span>
        <span class="p">),</span>
    <span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.show_template">
<code class="descname">show_template</code><em class="property"> = 'appbuilder/general/model/show.html'</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.show_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Your own add jinja2 template for show</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.show_title">
<code class="descname">show_title</code><em class="property"> = ''</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.show_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Show Title , if not configured the default is ‘Show ‘ with pretty model name</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.show_widget">
<code class="descname">show_widget</code><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.show_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.widgets.ShowWidget</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.baseviews.BaseCRUDView.validators_columns">
<code class="descname">validators_columns</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.baseviews.BaseCRUDView.validators_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary to add your own validators for forms</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-flask_appbuilder.views">
<span id="flask-appbuilder-views"></span><h4>flask_appbuilder.views<a class="headerlink" href="#module-flask_appbuilder.views" title="Permalink to this headline">¶</a></h4>
<div class="section" id="indexview">
<h5>IndexView<a class="headerlink" href="#indexview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.views.IndexView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.views.</code><code class="descname">IndexView</code><a class="reference internal" href="_modules/flask_appbuilder/views.html#IndexView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.IndexView" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple view that implements the index for the site</p>
</dd></dl>

</div>
<div class="section" id="simpleformview">
<h5>SimpleFormView<a class="headerlink" href="#simpleformview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.views.SimpleFormView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.views.</code><code class="descname">SimpleFormView</code><a class="reference internal" href="_modules/flask_appbuilder/views.html#SimpleFormView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.SimpleFormView" title="Permalink to this definition">¶</a></dt>
<dd><p>View for presenting your own forms
Inherit from this view to provide some base processing
for your customized form views.</p>
<p>Notice that this class inherits from BaseView so all properties
from the parent class can be overridden also.</p>
<p>Implement form_get and form_post to implement your
form pre-processing and post-processing</p>
</dd></dl>

</div>
<div class="section" id="publicformview">
<h5>PublicFormView<a class="headerlink" href="#publicformview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.views.PublicFormView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.views.</code><code class="descname">PublicFormView</code><a class="reference internal" href="_modules/flask_appbuilder/views.html#PublicFormView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.PublicFormView" title="Permalink to this definition">¶</a></dt>
<dd><p>View for presenting your own forms
Inherit from this view to provide some base
processing for your customized form views.</p>
<p>Notice that this class inherits from BaseView
so all properties from the parent class can be overridden also.</p>
<p>Implement form_get and form_post to implement
your form pre-processing and post-processing</p>
</dd></dl>

</div>
<div class="section" id="modelview">
<h5>ModelView<a class="headerlink" href="#modelview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.views.ModelView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.views.</code><code class="descname">ModelView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#ModelView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.ModelView" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the CRUD generic view.
If you want to automatically implement create, edit,
delete, show, and list from your database tables,
inherit your views from this class.</p>
<p>Notice that this class inherits from BaseCRUDView and BaseModelView
so all properties from the parent class can be overridden.</p>
<dl class="method">
<dt id="flask_appbuilder.views.ModelView.action">
<code class="descname">action</code><span class="sig-paren">(</span><em>name</em>, <em>pk</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#ModelView.action"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.ModelView.action" title="Permalink to this definition">¶</a></dt>
<dd><p>Action method to handle actions from a show view</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.views.ModelView.action_post">
<code class="descname">action_post</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#ModelView.action_post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.ModelView.action_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Action method to handle multiple records selected from a list view</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.views.ModelView.post_add_redirect">
<code class="descname">post_add_redirect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#ModelView.post_add_redirect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.ModelView.post_add_redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this function to control the
redirect after add endpoint is called.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.views.ModelView.post_delete_redirect">
<code class="descname">post_delete_redirect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#ModelView.post_delete_redirect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.ModelView.post_delete_redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this function to control the
redirect after edit endpoint is called.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.views.ModelView.post_edit_redirect">
<code class="descname">post_edit_redirect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#ModelView.post_edit_redirect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.ModelView.post_edit_redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this function to control the
redirect after edit endpoint is called.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="multipleview">
<h5>MultipleView<a class="headerlink" href="#multipleview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.views.MultipleView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.views.</code><code class="descname">MultipleView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#MultipleView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.MultipleView" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this view to render multiple views on the same page,
exposed on the list endpoint.</p>
<p>example (after defining GroupModelView and ContactModelView):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MultipleViewsExp</span><span class="p">(</span><span class="n">MultipleView</span><span class="p">):</span>
    <span class="n">views</span> <span class="o">=</span> <span class="p">[</span><span class="n">GroupModelView</span><span class="p">,</span> <span class="n">ContactModelView</span><span class="p">]</span>
</pre></div>
</div>
<dl class="method">
<dt id="flask_appbuilder.views.MultipleView.get_init_inner_views">
<code class="descname">get_init_inner_views</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#MultipleView.get_init_inner_views"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.MultipleView.get_init_inner_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets initialized inner views</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.views.MultipleView.get_uninit_inner_views">
<code class="descname">get_uninit_inner_views</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#MultipleView.get_uninit_inner_views"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.MultipleView.get_uninit_inner_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Will return a list with views that need to be initialized.
Normally related_views from ModelView</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.views.MultipleView.list_template">
<code class="descname">list_template</code><em class="property"> = 'appbuilder/general/model/multiple_views.html'</em><a class="headerlink" href="#flask_appbuilder.views.MultipleView.list_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this to implement your own template for the list endpoint</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.views.MultipleView.views">
<code class="descname">views</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.views.MultipleView.views" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of ModelView’s to render on the same page</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="masterdetailview">
<h5>MasterDetailView<a class="headerlink" href="#masterdetailview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.views.MasterDetailView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.views.</code><code class="descname">MasterDetailView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#MasterDetailView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.MasterDetailView" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements behaviour for controlling two CRUD views
linked by PK and FK, in a master/detail type with
two lists.</p>
<p>Master view will behave like a left menu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DetailView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">DetailTable</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MasterView</span><span class="p">(</span><span class="n">MasterDetailView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">MasterTable</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">DetailView</span><span class="p">]</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="flask_appbuilder.views.MasterDetailView.list_widget">
<code class="descname">list_widget</code><a class="headerlink" href="#flask_appbuilder.views.MasterDetailView.list_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.widgets.ListMasterWidget</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.views.MasterDetailView.master_div_width">
<code class="descname">master_div_width</code><em class="property"> = 2</em><a class="headerlink" href="#flask_appbuilder.views.MasterDetailView.master_div_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Set to configure bootstrap class for master grid size</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="compactcrudmixin">
<h5>CompactCRUDMixin<a class="headerlink" href="#compactcrudmixin" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.views.CompactCRUDMixin">
<em class="property">class </em><code class="descclassname">flask_appbuilder.views.</code><code class="descname">CompactCRUDMixin</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#CompactCRUDMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.CompactCRUDMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Mix with ModelView to implement a list with add and edit on the same page.</p>
<dl class="classmethod">
<dt id="flask_appbuilder.views.CompactCRUDMixin.del_key">
<em class="property">classmethod </em><code class="descname">del_key</code><span class="sig-paren">(</span><em>k</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#CompactCRUDMixin.del_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.CompactCRUDMixin.del_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Matching get method for <code class="docutils literal notranslate"><span class="pre">set_key</span></code></p>
</dd></dl>

<dl class="classmethod">
<dt id="flask_appbuilder.views.CompactCRUDMixin.get_key">
<em class="property">classmethod </em><code class="descname">get_key</code><span class="sig-paren">(</span><em>k</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#CompactCRUDMixin.get_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.CompactCRUDMixin.get_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Matching get method for <code class="docutils literal notranslate"><span class="pre">set_key</span></code></p>
</dd></dl>

<dl class="classmethod">
<dt id="flask_appbuilder.views.CompactCRUDMixin.set_key">
<em class="property">classmethod </em><code class="descname">set_key</code><span class="sig-paren">(</span><em>k</em>, <em>v</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/views.html#CompactCRUDMixin.set_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.views.CompactCRUDMixin.set_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows attaching stateless information to the class using the
flask session dict</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-flask_appbuilder.actions">
<span id="flask-appbuilder-actions"></span><h4>flask_appbuilder.actions<a class="headerlink" href="#module-flask_appbuilder.actions" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="flask_appbuilder.actions.action">
<code class="descclassname">flask_appbuilder.actions.</code><code class="descname">action</code><span class="sig-paren">(</span><em>name</em>, <em>text</em>, <em>confirmation=None</em>, <em>icon=None</em>, <em>multiple=True</em>, <em>single=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/actions.html#action"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.actions.action" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to expose actions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> – Action name</li>
<li><strong>text</strong> – Action text.</li>
<li><strong>confirmation</strong> – Confirmation text. If not provided, action will be executed
unconditionally.</li>
<li><strong>icon</strong> – Font Awesome icon name</li>
<li><strong>multiple</strong> – If true will display action on list view</li>
<li><strong>single</strong> – If true will display action on show view</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-flask_appbuilder.security.manager">
<span id="flask-appbuilder-security"></span><h4>flask_appbuilder.security<a class="headerlink" href="#module-flask_appbuilder.security.manager" title="Permalink to this headline">¶</a></h4>
<div class="section" id="basesecuritymanager">
<h5>BaseSecurityManager<a class="headerlink" href="#basesecuritymanager" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager">
<em class="property">class </em><code class="descclassname">flask_appbuilder.security.manager.</code><code class="descname">BaseSecurityManager</code><span class="sig-paren">(</span><em>appbuilder</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.add_permission">
<code class="descname">add_permission</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.add_permission"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.add_permission" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a permission to the backend, model permission</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – name of the permission: ‘can_add’,’can_edit’ etc…</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.add_permission_role">
<code class="descname">add_permission_role</code><span class="sig-paren">(</span><em>role</em>, <em>perm_view</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.add_permission_role"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.add_permission_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Add permission-ViewMenu object to Role</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>role</strong> – The role object</li>
<li><strong>perm_view</strong> – The PermissionViewMenu object</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.add_permission_view_menu">
<code class="descname">add_permission_view_menu</code><span class="sig-paren">(</span><em>permission_name</em>, <em>view_menu_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.add_permission_view_menu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.add_permission_view_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a permission on a view or menu to the backend</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>permission_name</strong> – name of the permission to add: ‘can_add’,’can_edit’ etc…</li>
<li><strong>view_menu_name</strong> – name of the view menu to add</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.add_permissions_menu">
<code class="descname">add_permissions_menu</code><span class="sig-paren">(</span><em>view_menu_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.add_permissions_menu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.add_permissions_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds menu_access to menu on permission_view_menu</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>view_menu_name</strong> – The menu name</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.add_permissions_view">
<code class="descname">add_permissions_view</code><span class="sig-paren">(</span><em>base_permissions</em>, <em>view_menu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.add_permissions_view"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.add_permissions_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a permission on a view menu to the backend</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>base_permissions</strong> – <dl class="docutils">
<dt>list of permissions from view (all exposed methods):</dt>
<dd>’can_add’,’can_edit’ etc…</dd>
</dl>
</li>
<li><strong>view_menu</strong> – name of the view or menu to add</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.add_register_user">
<code class="descname">add_register_user</code><span class="sig-paren">(</span><em>username</em>, <em>first_name</em>, <em>last_name</em>, <em>email</em>, <em>password=''</em>, <em>hashed_password=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.add_register_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.add_register_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function to add user registration</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.add_user">
<code class="descname">add_user</code><span class="sig-paren">(</span><em>username</em>, <em>first_name</em>, <em>last_name</em>, <em>email</em>, <em>role</em>, <em>password=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.add_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.add_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function to create user</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.add_view_menu">
<code class="descname">add_view_menu</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.add_view_menu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.add_view_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a view or menu to the backend, model view_menu
param name:</p>
<blockquote>
<div>name of the view menu to add</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.auth_user_db">
<code class="descname">auth_user_db</code><span class="sig-paren">(</span><em>username</em>, <em>password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.auth_user_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.auth_user_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for authenticating user, auth db style</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>username</strong> – The username or registered email address</li>
<li><strong>password</strong> – The password, will be tested against hashed password on db</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.auth_user_ldap">
<code class="descname">auth_user_ldap</code><span class="sig-paren">(</span><em>username</em>, <em>password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.auth_user_ldap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.auth_user_ldap" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for authenticating user, auth LDAP style.
depends on ldap module that is not mandatory requirement
for F.A.B.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>username</strong> – The username</li>
<li><strong>password</strong> – The password</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.auth_user_oauth">
<code class="descname">auth_user_oauth</code><span class="sig-paren">(</span><em>userinfo</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.auth_user_oauth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.auth_user_oauth" title="Permalink to this definition">¶</a></dt>
<dd><p>OAuth user Authentication</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Userinfo:</th><td class="field-body">dict with user information the keys have the same name</td>
</tr>
</tbody>
</table>
<p>as User model columns.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.auth_user_oid">
<code class="descname">auth_user_oid</code><span class="sig-paren">(</span><em>email</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.auth_user_oid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.auth_user_oid" title="Permalink to this definition">¶</a></dt>
<dd><p>OpenID user Authentication</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>email</strong> – user’s email to authenticate</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.auth_user_remote_user">
<code class="descname">auth_user_remote_user</code><span class="sig-paren">(</span><em>username</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.auth_user_remote_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.auth_user_remote_user" title="Permalink to this definition">¶</a></dt>
<dd><p>REMOTE_USER user Authentication</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>username</strong> – user’s username for remote auth</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.auth_view">
<code class="descname">auth_view</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.auth_view" title="Permalink to this definition">¶</a></dt>
<dd><p>The obj instance for authentication view</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.authdbview">
<code class="descname">authdbview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.authdbview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.AuthDBView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.authldapview">
<code class="descname">authldapview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.authldapview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.AuthLDAPView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.authoauthview">
<code class="descname">authoauthview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.authoauthview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.AuthOAuthView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.authoidview">
<code class="descname">authoidview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.authoidview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.AuthOIDView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.authremoteuserview">
<code class="descname">authremoteuserview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.authremoteuserview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.AuthRemoteUserView</span></code></p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.count_users">
<code class="descname">count_users</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.count_users"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.count_users" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function to count the existing users</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.create_db">
<code class="descname">create_db</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.create_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.create_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Setups the DB, creates admin and public roles if they don’t exist.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.create_jwt_manager">
<code class="descname">create_jwt_manager</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span> &#x2192; flask_jwt_extended.jwt_manager.JWTManager<a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.create_jwt_manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.create_jwt_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to implement your custom JWT manager instance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>app</strong> – Flask app</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.create_login_manager">
<code class="descname">create_login_manager</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span> &#x2192; flask_login.login_manager.LoginManager<a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.create_login_manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.create_login_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to implement your custom login manager instance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>app</strong> – Flask app</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.create_state_transitions">
<code class="descname">create_state_transitions</code><span class="sig-paren">(</span><em>baseviews: List[T], menus: List[T]</em><span class="sig-paren">)</span> &#x2192; Dict[KT, VT]<a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.create_state_transitions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.create_state_transitions" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Creates a Dict with all the necessary vm/permission transitions</p>
<dl class="docutils">
<dt>Dict: {</dt>
<dd><blockquote class="first">
<div>“add”: {(&lt;VM&gt;, &lt;PERM&gt;): ((&lt;VM&gt;, PERM), … )}
“del_role_pvm”: ((&lt;VM&gt;, &lt;PERM&gt;), …)
“del_views”: (&lt;VM&gt;, … )
“del_perms”: (&lt;PERM&gt;, … )</div></blockquote>
<p class="last">}</p>
</dd>
</dl>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>baseviews</strong> – List with all the registered BaseView, BaseApi</li>
<li><strong>menus</strong> – List with all the menu entries</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Dict with state transitions</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.del_permission">
<code class="descname">del_permission</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.del_permission"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.del_permission" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes a permission from the backend, model permission</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – name of the permission: ‘can_add’,’can_edit’ etc…</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.del_permission_role">
<code class="descname">del_permission_role</code><span class="sig-paren">(</span><em>role</em>, <em>perm_view</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.del_permission_role"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.del_permission_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove permission-ViewMenu object to Role</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>role</strong> – The role object</li>
<li><strong>perm_view</strong> – The PermissionViewMenu object</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.del_register_user">
<code class="descname">del_register_user</code><span class="sig-paren">(</span><em>register_user</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.del_register_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.del_register_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function to delete user registration</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.del_view_menu">
<code class="descname">del_view_menu</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.del_view_menu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.del_view_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes a ViewMenu from the backend</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – name of the ViewMenu</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.find_permission">
<code class="descname">find_permission</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.find_permission"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.find_permission" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds and returns a Permission by name</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.find_permission_view_menu">
<code class="descname">find_permission_view_menu</code><span class="sig-paren">(</span><em>permission_name</em>, <em>view_menu_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.find_permission_view_menu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.find_permission_view_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds and returns a PermissionView by names</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.find_permissions_view_menu">
<code class="descname">find_permissions_view_menu</code><span class="sig-paren">(</span><em>view_menu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.find_permissions_view_menu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.find_permissions_view_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds all permissions from ViewMenu, returns list of PermissionView</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>view_menu</strong> – ViewMenu object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of PermissionView objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.find_register_user">
<code class="descname">find_register_user</code><span class="sig-paren">(</span><em>registration_hash</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.find_register_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.find_register_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function to return user registration</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.find_user">
<code class="descname">find_user</code><span class="sig-paren">(</span><em>username=None</em>, <em>email=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.find_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.find_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function find a user by it’s username or email</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.find_view_menu">
<code class="descname">find_view_menu</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.find_view_menu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.find_view_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds and returns a ViewMenu by name</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.get_all_users">
<code class="descname">get_all_users</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.get_all_users"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.get_all_users" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function that returns all exsiting users</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.get_oauth_token_key_name">
<code class="descname">get_oauth_token_key_name</code><span class="sig-paren">(</span><em>provider</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.get_oauth_token_key_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.get_oauth_token_key_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the token_key name for the oauth provider
if none is configured defaults to oauth_token
this is configured using OAUTH_PROVIDERS and token_key key.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.get_oauth_token_secret_name">
<code class="descname">get_oauth_token_secret_name</code><span class="sig-paren">(</span><em>provider</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.get_oauth_token_secret_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.get_oauth_token_secret_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the token_secret name for the oauth provider
if none is configured defaults to oauth_secret
this is configured using OAUTH_PROVIDERS and token_secret</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.get_oauth_user_info">
<code class="descname">get_oauth_user_info</code><span class="sig-paren">(</span><em>provider</em>, <em>resp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.get_oauth_user_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.get_oauth_user_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Since there are different OAuth API’s with different ways to
retrieve user info</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.get_public_permissions">
<code class="descname">get_public_permissions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.get_public_permissions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.get_public_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>returns all permissions from public role</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.get_user_by_id">
<code class="descname">get_user_by_id</code><span class="sig-paren">(</span><em>pk</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.get_user_by_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.get_user_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function to return user by it’s id (pk)</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.has_access">
<code class="descname">has_access</code><span class="sig-paren">(</span><em>permission_name</em>, <em>view_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.has_access"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.has_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if current user or public has access to view or menu</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.is_item_public">
<code class="descname">is_item_public</code><span class="sig-paren">(</span><em>permission_name</em>, <em>view_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.is_item_public"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.is_item_public" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if view has public permissions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>permission_name</strong> – the permission: can_show, can_edit…</li>
<li><strong>view_name</strong> – the name of the class view (child of BaseView)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.jwt_manager">
<code class="descname">jwt_manager</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.jwt_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Flask-JWT-Extended</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.lm">
<code class="descname">lm</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.lm" title="Permalink to this definition">¶</a></dt>
<dd><p>Flask-Login LoginManager</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.oauth">
<code class="descname">oauth</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.oauth" title="Permalink to this definition">¶</a></dt>
<dd><p>Flask-OAuth</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.oauth_remotes">
<code class="descname">oauth_remotes</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.oauth_remotes" title="Permalink to this definition">¶</a></dt>
<dd><p>OAuth email whitelists</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.oauth_tokengetter">
<code class="descname">oauth_tokengetter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.oauth_tokengetter" title="Permalink to this definition">¶</a></dt>
<dd><p>OAuth tokengetter function override to implement your own tokengetter method</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.oauth_user_info_getter">
<code class="descname">oauth_user_info_getter</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.oauth_user_info_getter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.oauth_user_info_getter" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator function to be the OAuth user info getter
for all the providers, receives provider and response
return a dict with the information returned from the provider.
The returned user info dict should have it’s keys with the same
name as the User Model.</p>
<p>Use it like this an example for GitHub</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@appbuilder</span><span class="o">.</span><span class="n">sm</span><span class="o">.</span><span class="n">oauth_user_info_getter</span>
<span class="k">def</span> <span class="nf">my_oauth_user_info</span><span class="p">(</span><span class="n">sm</span><span class="p">,</span> <span class="n">provider</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">provider</span> <span class="o">==</span> <span class="s1">&#39;github&#39;</span><span class="p">:</span>
        <span class="n">me</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">oauth_remotes</span><span class="p">[</span><span class="n">provider</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">)}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.oauth_whitelists">
<code class="descname">oauth_whitelists</code><em class="property"> = {}</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.oauth_whitelists" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialized (remote_app) providers dict {‘provider_name’, OBJ }</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.oid">
<code class="descname">oid</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.oid" title="Permalink to this definition">¶</a></dt>
<dd><p>Flask-OpenID OpenID</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.permission_model">
<code class="descname">permission_model</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.permission_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to set your own Permission Model</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.permissionmodelview">
<code class="descname">permissionmodelview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.permissionmodelview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.PermissionModelView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.permissionview_model">
<code class="descname">permissionview_model</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.permissionview_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to set your own PermissionView Model</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.permissionviewmodelview">
<code class="descname">permissionviewmodelview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.permissionviewmodelview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.PermissionViewModelView</span></code></p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.register_views">
<code class="descname">register_views</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.register_views"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.register_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function to create the security views</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.registeruser_model">
<code class="descname">registeruser_model</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.registeruser_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to set your own RegisterUser Model</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.registeruser_view">
<code class="descname">registeruser_view</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.registeruser_view" title="Permalink to this definition">¶</a></dt>
<dd><p>The obj instance for registering user view</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.registeruserdbview">
<code class="descname">registeruserdbview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.registeruserdbview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.registerviews.RegisterUserDBView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.registerusermodelview">
<code class="descname">registerusermodelview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.registerusermodelview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.RegisterUserModelView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.registeruseroauthview">
<code class="descname">registeruseroauthview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.registeruseroauthview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.registerviews.RegisterUserOAuthView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.registeruseroidview">
<code class="descname">registeruseroidview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.registeruseroidview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.registerviews.RegisterUserOIDView</span></code></p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.reset_password">
<code class="descname">reset_password</code><span class="sig-paren">(</span><em>userid</em>, <em>password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.reset_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.reset_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Change/Reset a user’s password for authdb.
Password will be hashed and saved.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>userid</strong> – the user.id to reset the password</li>
<li><strong>password</strong> – The clear text password to reset and save hashed on the db</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.resetmypasswordview">
<code class="descname">resetmypasswordview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.resetmypasswordview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.ResetMyPasswordView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.resetpasswordview">
<code class="descname">resetpasswordview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.resetpasswordview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.ResetPasswordView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.role_model">
<code class="descname">role_model</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.role_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to set your own Role Model</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.rolemodelview">
<code class="descname">rolemodelview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.rolemodelview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.RoleModelView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.security_api">
<code class="descname">security_api</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.security_api" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.api.SecurityApi</span></code></p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.security_cleanup">
<code class="descname">security_cleanup</code><span class="sig-paren">(</span><em>baseviews</em>, <em>menus</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.security_cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.security_cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Will cleanup all unused permissions from the database</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>baseviews</strong> – A list of BaseViews class</li>
<li><strong>menus</strong> – Menu class</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.security_converge">
<code class="descname">security_converge</code><span class="sig-paren">(</span><em>baseviews: List[T], menus: List[T], dry=False</em><span class="sig-paren">)</span> &#x2192; Dict[KT, VT]<a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.security_converge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.security_converge" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Converges overridden permissions on all registered views/api
will compute all necessary operations from <cite>class_permissions_name</cite>,
<cite>previous_class_permission_name</cite>, method_permission_name`,
<cite>previous_permissions_name</cite> class attributes.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>baseviews</strong> – List of registered views/apis</li>
<li><strong>menus</strong> – List of menu items</li>
<li><strong>dry</strong> – If True will not change DB</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Dict with the necessary operations (state_transitions)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.set_oauth_session">
<code class="descname">set_oauth_session</code><span class="sig-paren">(</span><em>provider</em>, <em>oauth_response</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.set_oauth_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.set_oauth_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the current session with OAuth user secrets</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.update_user">
<code class="descname">update_user</code><span class="sig-paren">(</span><em>user</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.update_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.update_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function to update user</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>user</strong> – User model to update to database</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.update_user_auth_stat">
<code class="descname">update_user_auth_stat</code><span class="sig-paren">(</span><em>user</em>, <em>success=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/manager.html#BaseSecurityManager.update_user_auth_stat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.update_user_auth_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Update authentication successful to user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>user</strong> – The authenticated user model</li>
<li><strong>success</strong> – Default to true, if false increments fail_login_count on user model</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.user_model">
<code class="descname">user_model</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.user_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to set your own User Model</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.user_view">
<code class="descname">user_view</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.user_view" title="Permalink to this definition">¶</a></dt>
<dd><p>The obj instance for user view</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.userdbmodelview">
<code class="descname">userdbmodelview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.userdbmodelview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.UserDBModelView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.userinfoeditview">
<code class="descname">userinfoeditview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.userinfoeditview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.UserInfoEditView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.userldapmodelview">
<code class="descname">userldapmodelview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.userldapmodelview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.UserLDAPModelView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.useroauthmodelview">
<code class="descname">useroauthmodelview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.useroauthmodelview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.UserOAuthModelView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.useroidmodelview">
<code class="descname">useroidmodelview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.useroidmodelview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.UserOIDModelView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.userremoteusermodelview">
<code class="descname">userremoteusermodelview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.userremoteusermodelview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.UserRemoteUserModelView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.userstatschartview">
<code class="descname">userstatschartview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.userstatschartview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.UserStatsChartView</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.viewmenu_model">
<code class="descname">viewmenu_model</code><em class="property"> = None</em><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.viewmenu_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to set your own ViewMenu Model</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.manager.BaseSecurityManager.viewmenumodelview">
<code class="descname">viewmenumodelview</code><a class="headerlink" href="#flask_appbuilder.security.manager.BaseSecurityManager.viewmenumodelview" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.security.views.ViewMenuModelView</span></code></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-flask_appbuilder.security.registerviews">
<span id="baseregisteruser"></span><h5>BaseRegisterUser<a class="headerlink" href="#module-flask_appbuilder.security.registerviews" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser">
<em class="property">class </em><code class="descclassname">flask_appbuilder.security.registerviews.</code><code class="descname">BaseRegisterUser</code><a class="reference internal" href="_modules/flask_appbuilder/security/registerviews.html#BaseRegisterUser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser" title="Permalink to this definition">¶</a></dt>
<dd><p>Make your own user registration view and inherit from this class if you
want to implement a completely different registration process. If not,
just inherit from RegisterUserDBView or RegisterUserOIDView depending on
your authentication method.
then override SecurityManager property that defines the class to use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.security.registerviews</span> <span class="k">import</span> <span class="n">RegisterUserDBView</span>

<span class="k">class</span> <span class="nc">MyRegisterUserDBView</span><span class="p">(</span><span class="n">BaseRegisterUser</span><span class="p">):</span>
    <span class="n">email_template</span> <span class="o">=</span> <span class="s1">&#39;register_mail.html&#39;</span>
    <span class="o">...</span>


<span class="k">class</span> <span class="nc">MySecurityManager</span><span class="p">(</span><span class="n">SecurityManager</span><span class="p">):</span>
    <span class="n">registeruserdbview</span> <span class="o">=</span> <span class="n">MyRegisterUserDBView</span>
</pre></div>
</div>
<p>When instantiating AppBuilder set your own SecurityManager class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span>
    <span class="n">app</span><span class="p">,</span>
    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">,</span>
     <span class="n">security_manager_class</span><span class="o">=</span><span class="n">MySecurityManager</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser.activation">
<code class="descname">activation</code><span class="sig-paren">(</span><em>activation_hash</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/registerviews.html#BaseRegisterUser.activation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser.activation" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint to expose an activation url, this url
is sent to the user by email, when accessed the user is inserted
and activated</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser.activation_template">
<code class="descname">activation_template</code><em class="property"> = 'appbuilder/general/security/activation.html'</em><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser.activation_template" title="Permalink to this definition">¶</a></dt>
<dd><p>The activation template, shown when the user is activated</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser.add_registration">
<code class="descname">add_registration</code><span class="sig-paren">(</span><em>username</em>, <em>first_name</em>, <em>last_name</em>, <em>email</em>, <em>password=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/registerviews.html#BaseRegisterUser.add_registration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser.add_registration" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Add a registration request for the user.</div></blockquote>
<p>:rtype : RegisterUser</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser.email_subject">
<code class="descname">email_subject</code><em class="property"> = l'Account activation'</em><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser.email_subject" title="Permalink to this definition">¶</a></dt>
<dd><p>The email subject sent to the user</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser.email_template">
<code class="descname">email_template</code><em class="property"> = 'appbuilder/general/security/register_mail.html'</em><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser.email_template" title="Permalink to this definition">¶</a></dt>
<dd><p>The template used to generate the email sent to the user</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser.error_message">
<code class="descname">error_message</code><em class="property"> = l'Not possible to register you at the moment, try again later'</em><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser.error_message" title="Permalink to this definition">¶</a></dt>
<dd><p>The message shown on an unsuccessful registration</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser.false_error_message">
<code class="descname">false_error_message</code><em class="property"> = l'Registration not found'</em><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser.false_error_message" title="Permalink to this definition">¶</a></dt>
<dd><p>The message shown on an unsuccessful registration</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser.form_title">
<code class="descname">form_title</code><em class="property"> = l'Fill out the registration form'</em><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser.form_title" title="Permalink to this definition">¶</a></dt>
<dd><p>The form title</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser.message">
<code class="descname">message</code><em class="property"> = l'Registration sent to your email'</em><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser.message" title="Permalink to this definition">¶</a></dt>
<dd><p>The message shown on a successful registration</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.security.registerviews.BaseRegisterUser.send_email">
<code class="descname">send_email</code><span class="sig-paren">(</span><em>register_user</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/security/registerviews.html#BaseRegisterUser.send_email"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.security.registerviews.BaseRegisterUser.send_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for sending the registration Email to the user</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-flask_appbuilder.filemanager">
<span id="flask-appbuilder-filemanager"></span><h4>flask_appbuilder.filemanager<a class="headerlink" href="#module-flask_appbuilder.filemanager" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="flask_appbuilder.filemanager.get_file_original_name">
<code class="descclassname">flask_appbuilder.filemanager.</code><code class="descname">get_file_original_name</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/filemanager.html#get_file_original_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.filemanager.get_file_original_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this function to get the user’s original filename.
Filename is concatenated with &lt;UUID&gt;_sep_&lt;FILE NAME&gt;, to avoid collisions.
Use this function on your models on an aditional function</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ProjectFiles</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">FileColumn</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">file_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">get_file_original_name</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">))</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – The file name from model</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Returns the user’s original filename removes &lt;UUID&gt;_sep_</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-flask_appbuilder.models.group">
<span id="aggr-functions-for-group-by-charts"></span><h4>Aggr Functions for Group By Charts<a class="headerlink" href="#module-flask_appbuilder.models.group" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="flask_appbuilder.models.group.aggregate_count">
<code class="descclassname">flask_appbuilder.models.group.</code><code class="descname">aggregate_count</code><span class="sig-paren">(</span><em>items</em>, <em>col</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/group.html#aggregate_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.group.aggregate_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to use on Group by Charts.
accepts a list and returns the count of the list’s items</p>
</dd></dl>

<dl class="function">
<dt id="flask_appbuilder.models.group.aggregate_avg">
<code class="descclassname">flask_appbuilder.models.group.</code><code class="descname">aggregate_avg</code><span class="sig-paren">(</span><em>items</em>, <em>col</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/group.html#aggregate_avg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.group.aggregate_avg" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to use on Group by Charts.
accepts a list and returns the average of the list’s items</p>
</dd></dl>

<dl class="function">
<dt id="flask_appbuilder.models.group.aggregate_sum">
<code class="descclassname">flask_appbuilder.models.group.</code><code class="descname">aggregate_sum</code><span class="sig-paren">(</span><em>items</em>, <em>col</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/group.html#aggregate_sum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.group.aggregate_sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to use on Group by Charts.
accepts a list and returns the sum of the list’s items</p>
</dd></dl>

</div>
<div class="section" id="module-flask_appbuilder.charts.views">
<span id="flask-appbuilder-charts-views"></span><h4>flask_appbuilder.charts.views<a class="headerlink" href="#module-flask_appbuilder.charts.views" title="Permalink to this headline">¶</a></h4>
<div class="section" id="basechartview">
<h5>BaseChartView<a class="headerlink" href="#basechartview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.charts.views.BaseChartView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.charts.views.</code><code class="descname">BaseChartView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/charts/views.html#BaseChartView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.charts.views.BaseChartView" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the base class for all chart views.
Use DirectByChartView or GroupByChartView, override their properties</p>
<blockquote>
<div>and their base classes</div></blockquote>
<p>(BaseView, BaseModelView, BaseChartView) to customise your charts</p>
<dl class="attribute">
<dt id="flask_appbuilder.charts.views.BaseChartView.chart_3d">
<code class="descname">chart_3d</code><em class="property"> = 'true'</em><a class="headerlink" href="#flask_appbuilder.charts.views.BaseChartView.chart_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Will display in 3D?</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.charts.views.BaseChartView.chart_template">
<code class="descname">chart_template</code><em class="property"> = 'appbuilder/general/charts/chart.html'</em><a class="headerlink" href="#flask_appbuilder.charts.views.BaseChartView.chart_template" title="Permalink to this definition">¶</a></dt>
<dd><p>The chart template, override to implement your own</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.charts.views.BaseChartView.chart_title">
<code class="descname">chart_title</code><em class="property"> = 'Chart'</em><a class="headerlink" href="#flask_appbuilder.charts.views.BaseChartView.chart_title" title="Permalink to this definition">¶</a></dt>
<dd><p>A title to be displayed on the chart</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.charts.views.BaseChartView.chart_type">
<code class="descname">chart_type</code><em class="property"> = 'PieChart'</em><a class="headerlink" href="#flask_appbuilder.charts.views.BaseChartView.chart_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The chart type PieChart, ColumnChart, LineChart</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.charts.views.BaseChartView.chart_widget">
<code class="descname">chart_widget</code><a class="headerlink" href="#flask_appbuilder.charts.views.BaseChartView.chart_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.charts.widgets.ChartWidget</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.charts.views.BaseChartView.group_by_label">
<code class="descname">group_by_label</code><em class="property"> = l'Group by'</em><a class="headerlink" href="#flask_appbuilder.charts.views.BaseChartView.group_by_label" title="Permalink to this definition">¶</a></dt>
<dd><p>The label that is displayed for the chart selection</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.charts.views.BaseChartView.group_bys">
<code class="descname">group_bys</code><em class="property"> = {}</em><a class="headerlink" href="#flask_appbuilder.charts.views.BaseChartView.group_bys" title="Permalink to this definition">¶</a></dt>
<dd><p>New for 0.6.4, on test, don’t use yet</p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.charts.views.BaseChartView.search_widget">
<code class="descname">search_widget</code><a class="headerlink" href="#flask_appbuilder.charts.views.BaseChartView.search_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.widgets.SearchWidget</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.charts.views.BaseChartView.width">
<code class="descname">width</code><em class="property"> = 400</em><a class="headerlink" href="#flask_appbuilder.charts.views.BaseChartView.width" title="Permalink to this definition">¶</a></dt>
<dd><p>The width</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="directbychartview">
<h5>DirectByChartView<a class="headerlink" href="#directbychartview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.charts.views.DirectByChartView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.charts.views.</code><code class="descname">DirectByChartView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/charts/views.html#DirectByChartView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.charts.views.DirectByChartView" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this class to display charts with multiple series,
based on columns or methods defined on models.
You can display multiple charts on the same view.</p>
<p>Default routing point is ‘/chart’</p>
<p>Setup definitions property to configure the chart</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Label:</th><td class="field-body">(optional) String label to display on chart selection.</td>
</tr>
<tr class="field-even field"><th class="field-name">Group:</th><td class="field-body">String with the column name or method from model.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Formatter:</th><td class="field-body">(optional) function that formats the output of ‘group’ key</td>
</tr>
<tr class="field-even field"><th class="field-name">Series:</th><td class="field-body">A list of tuples with the aggregation function and the column name
to apply the aggregation</td>
</tr>
</tbody>
</table>
<p>The <strong>definitions</strong> property respects the following grammar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
         <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;label for chart definition&#39;</span><span class="p">,</span>
         <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;COLNAME&gt;&#39;</span><span class="o">|</span><span class="s1">&#39;&lt;MODEL FUNCNAME&gt;&#39;</span><span class="p">,</span>
         <span class="s1">&#39;formatter&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">FUNC</span> <span class="n">FORMATTER</span> <span class="n">FOR</span> <span class="n">GROUP</span> <span class="n">COL</span><span class="o">&gt;</span><span class="p">,</span>
         <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;COLNAME&gt;&#39;</span><span class="o">|</span><span class="s1">&#39;&lt;MODEL FUNCNAME&gt;&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">]</span>
        <span class="p">},</span> <span class="o">...</span>
      <span class="p">]</span>
</pre></div>
</div>
<p>example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CountryDirectChartView</span><span class="p">(</span><span class="n">DirectByChartView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">CountryStats</span><span class="p">)</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="s1">&#39;Direct Data Example&#39;</span>

    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Unemployment&#39;</span><span class="p">,</span>
            <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;stat_date&#39;</span><span class="p">,</span>
            <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;unemployed_perc&#39;</span><span class="p">,</span>
                <span class="s1">&#39;college_perc&#39;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="flask_appbuilder.charts.views.DirectByChartView.ProcessClass">
<code class="descname">ProcessClass</code><a class="headerlink" href="#flask_appbuilder.charts.views.DirectByChartView.ProcessClass" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.models.group.DirectProcessData</span></code></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="groupbychartview">
<h5>GroupByChartView<a class="headerlink" href="#groupbychartview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.charts.views.GroupByChartView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.charts.views.</code><code class="descname">GroupByChartView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/charts/views.html#GroupByChartView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.charts.views.GroupByChartView" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="flask_appbuilder.charts.views.GroupByChartView.ProcessClass">
<code class="descname">ProcessClass</code><a class="headerlink" href="#flask_appbuilder.charts.views.GroupByChartView.ProcessClass" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.models.group.GroupByProcessData</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.charts.views.GroupByChartView.chart_widget">
<code class="descname">chart_widget</code><a class="headerlink" href="#flask_appbuilder.charts.views.GroupByChartView.chart_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.charts.widgets.DirectChartWidget</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask_appbuilder.charts.views.GroupByChartView.definitions">
<code class="descname">definitions</code><em class="property"> = []</em><a class="headerlink" href="#flask_appbuilder.charts.views.GroupByChartView.definitions" title="Permalink to this definition">¶</a></dt>
<dd><p>These charts can display multiple series,
based on columns or methods defined on models.
You can display multiple charts on the same view.
This data can be grouped and aggregated has you like.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Label:</th><td class="field-body">(optional) String label to display on chart selection.</td>
</tr>
<tr class="field-even field"><th class="field-name">Group:</th><td class="field-body">String with the column name or method from model.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Formatter:</th><td class="field-body">(optional) function that formats the output of ‘group’ key</td>
</tr>
<tr class="field-even field"><th class="field-name">Series:</th><td class="field-body">A list of tuples with the aggregation function and the column name
to apply the aggregation</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;String&#39;</span><span class="p">,</span>
    <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;COLNAME&gt;&#39;</span><span class="o">|</span><span class="s1">&#39;&lt;FUNCNAME&gt;&#39;</span>
    <span class="s1">&#39;formatter: &lt;FUNC&gt;</span>
    <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="o">&lt;</span><span class="n">AGGR</span> <span class="n">FUNC</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">COLNAME</span><span class="o">&gt;|</span><span class="s1">&#39;&lt;FUNCNAME&gt;&#39;</span><span class="p">),</span><span class="o">...</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CountryGroupByChartView</span><span class="p">(</span><span class="n">GroupByChartView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">CountryStats</span><span class="p">)</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="s1">&#39;Statistics&#39;</span>

<span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Country Stat&#39;</span><span class="p">,</span>
        <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;country&#39;</span><span class="p">,</span>
        <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="n">aggregate_avg</span><span class="p">,</span> <span class="s1">&#39;unemployed_perc&#39;</span><span class="p">),</span>
               <span class="p">(</span><span class="n">aggregate_avg</span><span class="p">,</span> <span class="s1">&#39;population&#39;</span><span class="p">),</span>
               <span class="p">(</span><span class="n">aggregate_avg</span><span class="p">,</span> <span class="s1">&#39;college_perc&#39;</span><span class="p">)</span>
              <span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.charts.views.GroupByChartView.get_group_by_class">
<code class="descname">get_group_by_class</code><span class="sig-paren">(</span><em>definition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/charts/views.html#GroupByChartView.get_group_by_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.charts.views.GroupByChartView.get_group_by_class" title="Permalink to this definition">¶</a></dt>
<dd><p>intantiates the processing class (Direct or Grouped) and returns it.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="deprecated-chartview">
<h5>(Deprecated) ChartView<a class="headerlink" href="#deprecated-chartview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.charts.views.ChartView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.charts.views.</code><code class="descname">ChartView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/charts/views.html#ChartView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.charts.views.ChartView" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong></p>
<p>Provides a simple (and hopefully nice) way to draw charts on your application.</p>
<p>This will show Google Charts based on group by of your tables.</p>
</dd></dl>

</div>
<div class="section" id="deprecated-timechartview">
<h5>(Deprecated) TimeChartView<a class="headerlink" href="#deprecated-timechartview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.charts.views.TimeChartView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.charts.views.</code><code class="descname">TimeChartView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/charts/views.html#TimeChartView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.charts.views.TimeChartView" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong></p>
<p>Provides a simple way to draw some time charts on your application.</p>
<p>This will show Google Charts based on count and group
by month and year for your tables.</p>
</dd></dl>

</div>
<div class="section" id="deprecated-directchartview">
<h5>(Deprecated) DirectChartView<a class="headerlink" href="#deprecated-directchartview" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.charts.views.DirectChartView">
<em class="property">class </em><code class="descclassname">flask_appbuilder.charts.views.</code><code class="descname">DirectChartView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/charts/views.html#DirectChartView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.charts.views.DirectChartView" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong></p>
<p>This class is responsible for displaying a Google chart with
direct model values. Chart widget uses json.
No group by is processed, example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">StatsChartView</span><span class="p">(</span><span class="n">DirectChartView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAInterface</span><span class="p">(</span><span class="n">Stats</span><span class="p">)</span>
    <span class="n">chart_title</span> <span class="o">=</span> <span class="n">lazy_gettext</span><span class="p">(</span><span class="s1">&#39;Statistics&#39;</span><span class="p">)</span>
    <span class="n">direct_columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Some Stats&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;X_col_1&#39;</span><span class="p">,</span> <span class="s1">&#39;stat_col_1&#39;</span><span class="p">,</span> <span class="s1">&#39;stat_col_2&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;Other Stats&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;X_col2&#39;</span><span class="p">,</span> <span class="s1">&#39;stat_col_3&#39;</span><span class="p">)}</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="flask_appbuilder.charts.views.DirectChartView.chart_widget">
<code class="descname">chart_widget</code><a class="headerlink" href="#flask_appbuilder.charts.views.DirectChartView.chart_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">flask_appbuilder.charts.widgets.DirectChartWidget</span></code></p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-flask_appbuilder.models.mixins">
<span id="flask-appbuilder-models-mixins"></span><h4>flask_appbuilder.models.mixins<a class="headerlink" href="#module-flask_appbuilder.models.mixins" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="flask_appbuilder.models.mixins.BaseMixin">
<em class="property">class </em><code class="descclassname">flask_appbuilder.models.mixins.</code><code class="descname">BaseMixin</code><a class="reference internal" href="_modules/flask_appbuilder/models/mixins.html#BaseMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.mixins.BaseMixin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="flask_appbuilder.models.mixins.AuditMixin">
<em class="property">class </em><code class="descclassname">flask_appbuilder.models.mixins.</code><code class="descname">AuditMixin</code><a class="reference internal" href="_modules/flask_appbuilder/models/mixins.html#AuditMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.mixins.AuditMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin for models, adds 4 columns to stamp,
time and user on creation and modification
will create the following columns:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Created on:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Changed on:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Created by:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Changed by:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="extra-columns">
<h5>Extra Columns<a class="headerlink" href="#extra-columns" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="flask_appbuilder.models.mixins.FileColumn">
<em class="property">class </em><code class="descclassname">flask_appbuilder.models.mixins.</code><code class="descname">FileColumn</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/mixins.html#FileColumn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.mixins.FileColumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends SQLAlchemy to support and mostly identify a File Column</p>
<dl class="attribute">
<dt id="flask_appbuilder.models.mixins.FileColumn.impl">
<code class="descname">impl</code><a class="headerlink" href="#flask_appbuilder.models.mixins.FileColumn.impl" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.sqltypes.Text</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="flask_appbuilder.models.mixins.ImageColumn">
<em class="property">class </em><code class="descclassname">flask_appbuilder.models.mixins.</code><code class="descname">ImageColumn</code><span class="sig-paren">(</span><em>thumbnail_size=(20</em>, <em>20</em>, <em>True)</em>, <em>size=(100</em>, <em>100</em>, <em>True)</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/mixins.html#ImageColumn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.mixins.ImageColumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends SQLAlchemy to support and mostly identify an Image Column</p>
<dl class="attribute">
<dt id="flask_appbuilder.models.mixins.ImageColumn.impl">
<code class="descname">impl</code><a class="headerlink" href="#flask_appbuilder.models.mixins.ImageColumn.impl" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.sqltypes.Text</span></code></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="generic-data-source-beta">
<h5>Generic Data Source (Beta)<a class="headerlink" href="#generic-data-source-beta" title="Permalink to this headline">¶</a></h5>
</div>
</div>
<div class="section" id="module-flask_appbuilder.models.generic">
<span id="flask-appbuilder-models-generic"></span><h4>flask_appbuilder.models.generic<a class="headerlink" href="#module-flask_appbuilder.models.generic" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="flask_appbuilder.models.generic.GenericColumn">
<em class="property">class </em><code class="descclassname">flask_appbuilder.models.generic.</code><code class="descname">GenericColumn</code><span class="sig-paren">(</span><em>col_type</em>, <em>primary_key=False</em>, <em>unique=False</em>, <em>nullable=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/generic.html#GenericColumn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.generic.GenericColumn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="flask_appbuilder.models.generic.GenericModel">
<em class="property">class </em><code class="descclassname">flask_appbuilder.models.generic.</code><code class="descname">GenericModel</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/generic.html#GenericModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.generic.GenericModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic Model class to define generic purpose models to use
with the framework.</p>
<p>Use GenericSession much like SQLAlchemy’s Session Class.
Extend GenericSession to implement specific engine features.</p>
<p>Define your models like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyGenericModel</span><span class="p">(</span><span class="n">GenericModel</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">GenericColumn</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="flask_appbuilder.models.generic.GenericSession">
<em class="property">class </em><code class="descclassname">flask_appbuilder.models.generic.</code><code class="descname">GenericSession</code><a class="reference internal" href="_modules/flask_appbuilder/models/generic.html#GenericSession"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.generic.GenericSession" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is a base, you should subclass it
to implement your own generic data source.</p>
<p>Override at least the <strong>all</strong> method.</p>
<p><strong>GenericSession</strong> will implement filter and orders
based on your data generation on the <strong>all</strong> method.</p>
<dl class="method">
<dt id="flask_appbuilder.models.generic.GenericSession.all">
<code class="descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/generic.html#GenericSession.all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.generic.GenericSession.all" title="Permalink to this definition">¶</a></dt>
<dd><p>SQLA like ‘all’ method, will populate all rows and apply all
filters and orders to it.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.models.generic.GenericSession.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/generic.html#GenericSession.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.generic.GenericSession.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the entire store</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.models.generic.GenericSession.delete_all">
<code class="descname">delete_all</code><span class="sig-paren">(</span><em>model_cls</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/generic.html#GenericSession.delete_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.generic.GenericSession.delete_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all objects of type model_cls</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.models.generic.GenericSession.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>pk</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/generic.html#GenericSession.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.generic.GenericSession.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the object for the key
Override it for efficiency.</p>
</dd></dl>

<dl class="method">
<dt id="flask_appbuilder.models.generic.GenericSession.query">
<code class="descname">query</code><span class="sig-paren">(</span><em>model_cls</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flask_appbuilder/models/generic.html#GenericSession.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flask_appbuilder.models.generic.GenericSession.query" title="Permalink to this definition">¶</a></dt>
<dd><p>SQLAlchemy query like method</p>
</dd></dl>

</dd></dl>

</div>
</div>
<span id="document-versionmigration"></span><div class="section" id="version-migration">
<h3>Version Migration<a class="headerlink" href="#version-migration" title="Permalink to this headline">¶</a></h3>
<div class="section" id="migrating-to-1-9-0">
<h4>Migrating to 1.9.0<a class="headerlink" href="#migrating-to-1-9-0" title="Permalink to this headline">¶</a></h4>
<p>If you are using OAuth for authentication, this release will break your logins. This break is due to two reasons</p>
<p>One:</p>
<p>There was a security issue when using the default builtin information getter for the providers
(see github: Prevent masquerade attacks through oauth providers #472)
This fix will prepend the provider to the user id. So you’re usernames will look like ‘google_&lt;USER_ID&gt;’</p>
<p>Two:</p>
<p>For google OAuth we migrated from the old and deprecated google plus API to OAuth2/v2, the old User.username field
was based on the Google Plus display name, and now is based on a Google user_id.</p>
<p>In order to upgrade without breaking, you can override the current default OAuth information getter using something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@appbuilder</span><span class="o">.</span><span class="n">sm</span><span class="o">.</span><span class="n">oauth_user_info_getter</span>
<span class="k">def</span> <span class="nf">get_oauth_user_info</span><span class="p">(</span><span class="n">sm</span><span class="p">,</span> <span class="n">provider</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="c1"># for GITHUB</span>
    <span class="k">if</span> <span class="n">provider</span> <span class="o">==</span> <span class="s1">&#39;github&#39;</span> <span class="ow">or</span> <span class="n">provider</span> <span class="o">==</span> <span class="s1">&#39;githublocal&#39;</span><span class="p">:</span>
        <span class="n">me</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">oauth_remotes</span><span class="p">[</span><span class="n">provider</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">)}</span>
    <span class="c1"># for twitter</span>
    <span class="k">if</span> <span class="n">provider</span> <span class="o">==</span> <span class="s1">&#39;twitter&#39;</span><span class="p">:</span>
        <span class="n">me</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">oauth_remotes</span><span class="p">[</span><span class="n">provider</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;account/settings.json&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;screen_name&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)}</span>
    <span class="c1"># for linkedin</span>
    <span class="k">if</span> <span class="n">provider</span> <span class="o">==</span> <span class="s1">&#39;linkedin&#39;</span><span class="p">:</span>
        <span class="n">me</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">oauth_remotes</span><span class="p">[</span><span class="n">provider</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;people/~:(id,email-address,first-name,last-name)?format=json&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;email-address&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="s1">&#39;first_name&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;firstName&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="s1">&#39;last_name&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;lastName&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)}</span>
    <span class="c1"># for Google</span>
    <span class="k">if</span> <span class="n">provider</span> <span class="o">==</span> <span class="s1">&#39;google&#39;</span><span class="p">:</span>
        <span class="n">me</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">oauth_remotes</span><span class="p">[</span><span class="n">provider</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;userinfo&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="s1">&#39;first_name&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;given_name&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="s1">&#39;last_name&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;family_name&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">me</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)}</span>
</pre></div>
</div>
<p>There was a Fix for the <strong>oauth_user_info_getter</strong> decorator also, now it will obey the doc definition.</p>
<p>Any help you need feel free to submit an Issue!</p>
</div>
<div class="section" id="migrating-to-1-8-0">
<h4>Migrating to 1.8.0<a class="headerlink" href="#migrating-to-1-8-0" title="Permalink to this headline">¶</a></h4>
<p>On this release flask-appbuilder supports python 3.5, and returned to flask-babel original package
(stopped using the fork flask-babelpkg for multiple tranlation directories).</p>
<p>You can and should, uninstall flask-babelpkg from your package list and change all your imports from:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_babelpkg</span> <span class="k">import</span> <span class="o">...</span>
</pre></div>
</div>
<p>To:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_babel</span> <span class="k">import</span> <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="migrating-from-1-2-x-to-1-3-x">
<h4>Migrating from 1.2.X to 1.3.X<a class="headerlink" href="#migrating-from-1-2-x-to-1-3-x" title="Permalink to this headline">¶</a></h4>
<p>There are some breaking features:</p>
<p>1 - Security models have changed, users can have multiple roles, not just one. So you have to upgrade your db.</p>
<ul>
<li><p class="first">The security models schema have changed.</p>
<blockquote>
<div><p>If you are using sqlite, mysql, pgsql, mssql or oracle, use the following procedure:</p>
<blockquote>
<div><p>1 - <em>Backup your DB</em>.</p>
<p>2 - If you haven’t already, upgrade to flask-appbuilder 1.3.0.</p>
<p>3 - Issue the following commands, on your project folder where config.py exists:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /your-main-project-folder/
$ fabmanager upgrade-db
</pre></div>
</div>
<p>4 - Test and Run (if you have a run.py for development)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fabmanager run
</pre></div>
</div>
</div></blockquote>
<p>For <strong>sqlite</strong> you’ll have to drop role_id columns and FK yourself. follow the script instructions to finish the upgrade.</p>
</div></blockquote>
</li>
</ul>
<p>2 - Security. If you were already extending security, this is even more encouraged from now on, but internally many things have
changed. So, modules have changes and changed place, each backend engine will have it’s SecurityManager, and views
are common to all of them. Change:</p>
<p>from:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.security.sqla.views</span> <span class="k">import</span> <span class="n">UserDBModelView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.security.manager</span> <span class="k">import</span> <span class="n">SecurityManager</span>
</pre></div>
</div>
<p>to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.security.views</span> <span class="k">import</span> <span class="n">UserDBModelView</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.security.sqla.manager</span> <span class="k">import</span> <span class="n">SecurityManager</span>
</pre></div>
</div>
<p>3 - SQLAInteface, SQLAModel. If you were importing like the following, change:</p>
<p>from:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models</span> <span class="k">import</span> <span class="n">SQLAInterface</span>
</pre></div>
</div>
<p>to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>
</pre></div>
</div>
<p>4 - Filters, filters import moved:</p>
<p>to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.filters</span> <span class="k">import</span> <span class="n">FilterStartsWith</span><span class="p">,</span> <span class="n">FilterEqualFunction</span><span class="p">,</span> <span class="n">FilterEqual</span>
</pre></div>
</div>
<p>5 - Filters, filtering relationship fields (rendered with select2) changed:</p>
<p>from:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">edit_form_query_rel_fields</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;group&#39;</span><span class="p">,</span>
                               <span class="n">SQLAModel</span><span class="p">(</span><span class="n">Model1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">),</span>
                               <span class="p">[[</span><span class="s1">&#39;field_string&#39;</span><span class="p">,</span> <span class="n">FilterEqual</span><span class="p">,</span> <span class="s1">&#39;G2&#39;</span><span class="p">]]</span>
                              <span class="p">)</span>
                            <span class="p">]</span>
</pre></div>
</div>
<p>to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">edit_form_query_rel_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;group&#39;</span><span class="p">:[[</span><span class="s1">&#39;field_string&#39;</span><span class="p">,</span> <span class="n">FilterEqual</span><span class="p">,</span> <span class="s1">&#39;G2&#39;</span><span class="p">]]}</span>
</pre></div>
</div>
</div>
<div class="section" id="migrating-from-1-1-x-to-1-2-x">
<h4>Migrating from 1.1.X to 1.2.X<a class="headerlink" href="#migrating-from-1-1-x-to-1-2-x" title="Permalink to this headline">¶</a></h4>
<p>There is a breaking feature, change your filters import like this:</p>
<p>from:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flask_appbuilder</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">base</span> <span class="kn">import</span> <span class="nn">Filters</span><span class="o">,</span> <span class="nn">BaseFilter</span><span class="o">,</span> <span class="nn">BaseFilterConverter</span>
<span class="n">flask_appbuilder</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">filters</span> <span class="kn">import</span> <span class="nn">FilterEqual</span><span class="o">,</span> <span class="nn">FilterRelation</span> <span class="o">....</span>
</pre></div>
</div>
<p>to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flask_appbuilder</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">filters</span> <span class="kn">import</span> <span class="nn">Filters</span><span class="o">,</span> <span class="nn">BaseFilter</span><span class="o">,</span> <span class="nn">BaseFilterConverter</span>
<span class="n">flask_appbuilder</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">sqla</span><span class="o">.</span><span class="n">filter</span> <span class="kn">import</span> <span class="nn">FilterEqual</span><span class="o">,</span> <span class="nn">FilterRelation</span> <span class="o">....</span>
</pre></div>
</div>
</div>
<div class="section" id="migrating-from-0-9-x-to-0-10-x">
<h4>Migrating from 0.9.X to 0.10.X<a class="headerlink" href="#migrating-from-0-9-x-to-0-10-x" title="Permalink to this headline">¶</a></h4>
<p>This new version has NO breaking features, all your code will work, unless you are hacking directly onto SQLAModel,
Filters, DataModel etc.</p>
<p>But, to keep up with the changes, you should change these:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models.datamodel</span> <span class="k">import</span> <span class="n">SQLAModel</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.filters</span> <span class="k">import</span> <span class="n">FilterEqual</span><span class="p">,</span> <span class="n">FilterContains</span>
</pre></div>
</div>
<p>to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.interface</span> <span class="k">import</span> <span class="n">SQLAInterface</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.models.sqla.filters</span> <span class="k">import</span> <span class="n">FilterEqual</span><span class="p">,</span> <span class="n">FilterContains</span>
</pre></div>
</div>
</div>
<div class="section" id="migrating-from-0-8-x-to-0-9-x">
<h4>Migrating from 0.8.X to 0.9.X<a class="headerlink" href="#migrating-from-0-8-x-to-0-9-x" title="Permalink to this headline">¶</a></h4>
<p>This new version has a breaking feature, the way you initialize AppBuilder (former BaseApp) has changed.
internal retro compatibility was created, but many things have changed</p>
<p>1 - Initialization of AppBuilder (BaseApp) has changed, pass session not SQLAlchemy <em>db</em> object.
this is the breaking feature.</p>
<blockquote>
<div><p>from (__init__.py)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BaseApp</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
</pre></div>
</div>
<p>to (__init__.py)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>2 - ‘BaseApp’ changed to ‘AppBuilder’. Has you already noticed on 1.</p>
<p>3 - BaseApp or now AppBuilder will not automatically create your models, after declaring them just invoke create_db method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appbuilder</span><span class="o">.</span><span class="n">create_db</span><span class="p">()</span>
</pre></div>
</div>
<p>4 - Change your models inheritance</p>
<blockquote>
<div><p>from:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>5 - Although you’re not obligated, you should not directly use your flask.ext.sqlalchemy class SQLAlchemy.
Use F.A.B. SQLA class instead, read the docs to know why.</p>
<blockquote>
<div><p>from (__init__.py):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask.ext.sqlalchemy</span> <span class="k">import</span> <span class="n">SQLAlchemy</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder.baseapp</span> <span class="k">import</span> <span class="n">BaseApp</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">baseapp</span> <span class="o">=</span> <span class="n">BaseApp</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
</pre></div>
</div>
<p>to (__init__.py):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_appbuilder</span> <span class="k">import</span> <span class="n">SQLA</span><span class="p">,</span> <span class="n">AppBuilder</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLA</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">appbuilder</span> <span class="o">=</span> <span class="n">AppBuilder</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="migrating-from-0-6-x-to-0-7-x">
<h4>Migrating from 0.6.X to 0.7.X<a class="headerlink" href="#migrating-from-0-6-x-to-0-7-x" title="Permalink to this headline">¶</a></h4>
<p>This new version has some breaking features. You don’t have to change any code, main breaking changes are:</p>
<blockquote>
<div><ul>
<li><p class="first">The security models schema have changed.</p>
<blockquote>
<div><p>If you are using sqlite, mysql or pgsql, use the following procedure:</p>
<blockquote>
<div><p>1 - <em>Backup your DB</em>.</p>
<p>2 - If you haven’t already, upgrade to flask-appbuilder 0.7.0.</p>
<p>3 - Issue the following commands, on your project folder where config.py exists:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">your</span><span class="o">-</span><span class="n">main</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">folder</span><span class="o">/</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">dpgaspar</span><span class="o">/</span><span class="n">Flask</span><span class="o">-</span><span class="n">AppBuilder</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">migrate_db_0</span><span class="o">.</span><span class="mf">7.</span><span class="n">py</span>
<span class="n">python</span> <span class="n">migrate_db_0</span><span class="o">.</span><span class="mf">7.</span><span class="n">py</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">dpgaspar</span><span class="o">/</span><span class="n">Flask</span><span class="o">-</span><span class="n">AppBuilder</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">hash_db_password</span><span class="o">.</span><span class="n">py</span>
<span class="n">python</span> <span class="n">hash_db_password</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>4 - Test and Run (if you have a run.py for development)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">run</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div></blockquote>
<p>If not (DB is not sqlite, mysql or pgsql), you will have to alter the schema yourself. use the following procedure:</p>
<blockquote>
<div><p>1 - <em>Backup your DB</em>.</p>
<p>2 - If you haven’t already, upgrade to flask-appbuilder 0.7.0.</p>
<p>3 - issue the corresponding DDL commands to:</p>
<p>ALTER TABLE ab_user MODIFY COLUMN password VARCHAR(256)</p>
<p>ALTER TABLE ab_user ADD COLUMN login_count INTEGER</p>
<p>ALTER TABLE ab_user ADD COLUMN created_on DATETIME</p>
<p>ALTER TABLE ab_user ADD COLUMN changed_on DATETIME</p>
<p>ALTER TABLE ab_user ADD COLUMN created_by_fk INTEGER</p>
<p>ALTER TABLE ab_user ADD COLUMN changed_by_fk INTEGER</p>
<p>ALTER TABLE ab_user ADD COLUMN last_login DATETIME</p>
<p>ALTER TABLE ab_user ADD COLUMN fail_login_count INTEGER</p>
<p>4 - Then hash your passwords:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">dpgaspar</span><span class="o">/</span><span class="n">Flask</span><span class="o">-</span><span class="n">AppBuilder</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">hash_db_password</span><span class="o">.</span><span class="n">py</span>
<span class="n">python</span> <span class="n">hash_db_password</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">All passwords are kept on the database hashed, so all your passwords will be hashed by the framework.</p>
</li>
<li><dl class="first docutils">
<dt>Please <em>backup</em> your DB before altering the schema,  if you feel lost please post an issue on github</dt>
<dd><p class="first last"><a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/issues?state=open">https://github.com/dpgaspar/Flask-AppBuilder/issues?state=open</a></p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="migrating-from-0-5-x-to-0-6-x">
<h4>Migrating from 0.5.X to 0.6.X<a class="headerlink" href="#migrating-from-0-5-x-to-0-6-x" title="Permalink to this headline">¶</a></h4>
<p>This new version has some breaking features, that i hope will be easily changeable on your code.</p>
<p>If you feel lost please post an issue on github: <a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/issues?state=open">https://github.com/dpgaspar/Flask-AppBuilder/issues?state=open</a></p>
<p>If you’re using the <strong>related_views</strong> attribute on ModelView classes, you must not instantiate the related classes. This is the correct form, it will be less memory and cpu resource consuming.</p>
<p>From this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">GeneralView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">Group</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">MyOtherView</span><span class="p">()]</span>
</pre></div>
</div>
<p>Change to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">GeneralView</span><span class="p">):</span>
    <span class="n">datamodel</span> <span class="o">=</span> <span class="n">SQLAModel</span><span class="p">(</span><span class="n">Group</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
    <span class="n">related_views</span> <span class="o">=</span> <span class="p">[</span><span class="n">MyOtherView</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="migrating-from-0-2-x-to-0-3-x">
<h4>Migrating from 0.2.X to 0.3.X<a class="headerlink" href="#migrating-from-0-2-x-to-0-3-x" title="Permalink to this headline">¶</a></h4>
<p>This new version (0.3.X) has many internal changes, if you feel lost please post an issue on github
<a class="reference external" href="https://github.com/dpgaspar/Flask-AppBuilder/issues?state=open">https://github.com/dpgaspar/Flask-AppBuilder/issues?state=open</a></p>
<p>All direct imports from your ‘app’ directory were removed, so there is no obligation in using the base AppBuilder-Skeleton.</p>
<p>Security tables have changed their names, AppBuilder will automatically migrate all your data to the new tables.</p>
<p>1 - Change your BaseApp initialization (views.py)</p>
<p>From this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">baseapp</span> <span class="o">=</span> <span class="n">BaseApp</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
<p>Change to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">baseapp</span> <span class="o">=</span> <span class="n">BaseApp</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
</pre></div>
</div>
<p>2 - Remove from OpenID and Login initialization (__init__.py)</p>
<p>From this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">babel</span> <span class="o">=</span> <span class="n">Babel</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">lm</span> <span class="o">=</span> <span class="n">LoginManager</span><span class="p">()</span>
<span class="n">lm</span><span class="o">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">lm</span><span class="o">.</span><span class="n">login_view</span> <span class="o">=</span> <span class="s1">&#39;login&#39;</span>
<span class="n">oid</span> <span class="o">=</span> <span class="n">OpenID</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="s1">&#39;tmp&#39;</span><span class="p">))</span>

<span class="kn">from</span> <span class="nn">app</span> <span class="k">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">views</span>
</pre></div>
</div>
<p>Change to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">app</span> <span class="k">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">views</span>
</pre></div>
</div>
</div>
<div class="section" id="migrating-from-0-1-x-to-0-2-x">
<h4>Migrating from 0.1.X to 0.2.X<a class="headerlink" href="#migrating-from-0-1-x-to-0-2-x" title="Permalink to this headline">¶</a></h4>
<p>It’s very simple, change this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">baseapp</span> <span class="o">=</span> <span class="n">BaseApp</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">baseapp</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">GroupGeneralView</span><span class="p">,</span> <span class="s2">&quot;List Groups&quot;</span><span class="p">,</span><span class="s2">&quot;/groups/list&quot;</span><span class="p">,</span><span class="s2">&quot;th-large&quot;</span><span class="p">,</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">baseapp</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">PersonGeneralView</span><span class="p">,</span> <span class="s2">&quot;List Contacts&quot;</span><span class="p">,</span><span class="s2">&quot;/persons/list&quot;</span><span class="p">,</span><span class="s2">&quot;earphone&quot;</span><span class="p">,</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">baseapp</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">PersonChartView</span><span class="p">,</span> <span class="s2">&quot;Contacts Chart&quot;</span><span class="p">,</span><span class="s2">&quot;/persons/chart&quot;</span><span class="p">,</span><span class="s2">&quot;earphone&quot;</span><span class="p">,</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">baseapp</span> <span class="o">=</span> <span class="n">BaseApp</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">baseapp</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">GroupGeneralView</span><span class="p">(),</span> <span class="s2">&quot;List Groups&quot;</span><span class="p">,</span><span class="s2">&quot;/groups/list&quot;</span><span class="p">,</span><span class="s2">&quot;th-large&quot;</span><span class="p">,</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">baseapp</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">PersonGeneralView</span><span class="p">(),</span> <span class="s2">&quot;List Contacts&quot;</span><span class="p">,</span><span class="s2">&quot;/persons/list&quot;</span><span class="p">,</span><span class="s2">&quot;earphone&quot;</span><span class="p">,</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
<span class="n">baseapp</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">PersonChartView</span><span class="p">(),</span> <span class="s2">&quot;Contacts Chart&quot;</span><span class="p">,</span><span class="s2">&quot;/persons/chart&quot;</span><span class="p">,</span><span class="s2">&quot;earphone&quot;</span><span class="p">,</span><span class="s2">&quot;Contacts&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Small change you just have to instantiate your classes.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, Daniel Vaz Gaspar
      
        <span class="commit">
          Revision <code>d386d846</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/v1.13.0/">v1.13.0</a></dd>
        
          <dd><a href="/en/v1.8.1/">v1.8.1</a></dd>
        
          <dd><a href="/en/release-2.0.0/">release-2.0.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//readthedocs.org/projects/flask-appbuilder/downloads/htmlzip/latest/">html</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/flask-appbuilder/?fromdocs=flask-appbuilder">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/flask-appbuilder/?fromdocs=flask-appbuilder">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>